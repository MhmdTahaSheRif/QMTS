;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_visual_types";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi_cet_model_editor":dependencies[0],"prezi_featureswitcher":dependencies[1],"prezi_i18n":dependencies[2],"prezi_plugin_api":dependencies[3],"prezi_utils":dependencies[4]}};})());};})(arguments);var moduleImpl=(function(){return module(function(c){var h=c.dependencies.prezi_plugin_api,d=c.dependencies.prezi_cet_model_editor,p=c.dependencies.prezi_utils,n=c.dependencies.prezi_featureswitcher,k=c.dependencies.prezi_i18n,l={};Object.defineProperty(l,"__esModule",{value:!0});l.$=class{init(a){this.u=a.declareUI({j:[],o:[],w:new Set},(a,b)=>{const {j:d,w:g}=a;1>d.length||g.forEach((a)=>this.aa(b,a))});a.onSelectionChange(()=>this.session.document.read((a)=>this.v(a)))}v(a){let g=[],b=[],e=new Set;const c=this.session.coverEdit.getReadonlyMode(a),
m=this.session.selection.getReadonlySelectionInfo(a).allObjects;b=this.session.selection.getReadonlySelectionInfo(a).groups.map((a)=>a.members.map((a)=>a.id));(c.kind===h.CoverEditModeKind.Advanced||c.kind===h.CoverEditModeKind.InsideAdvanced&&c.topicOrOverview.is(d.base.ObjectKind.topic))&&m.every((a)=>a.is(d.base.ObjectKind.simpleObject))&&(g=m.map((a)=>a.id),m.forEach((a)=>{if(a.is(d.base.ObjectKind.simpleObject)){const b=c.kind===h.CoverEditModeKind.InsideAdvanced,f=this.ba(a);0>f.visual.contentChildren.map((a)=>
a.id).indexOf(a.id)&&e.add("visual");!b&&0>f.cover.contentChildren.map((a)=>a.id).indexOf(a.id)&&e.add("cover");n.isActive("js-visual-types")&&b&&f.is(d.base.ObjectKind.planetTopic)&&0>f.master.contentChildren.map((a)=>a.id).indexOf(a.id)&&e.add("master");n.isActive("js-visual-types")&&!b&&f.is(d.base.ObjectKind.planetTopic)&&0>f.surface.contentChildren.map((a)=>a.id).indexOf(a.id)&&e.add("surface");b&&f.is(d.base.ObjectKind.planetTopic)&&0>f.contentChildren.map((a)=>a.id).indexOf(a.id)&&e.add("content")}}));
this.u.setState({j:g,o:b,w:e})}i(a,d,b,c){const {j:g,o:e}=this.u.getState();a.createMenuItem({kind:h.MenuItemKind.context,id:`context-menu-convert-to-${b}`,title:d,weight:13,onClick:(a)=>this.session.document.executeApiCommand(a,{name:`Transform entities into ${b}s`,run:(a)=>{g.map((b)=>a.lookup.simpleObject(b)).sort((a,b)=>a.isAbove(b)?1:-1).forEach((a)=>c(a));e.filter((a)=>2<=a.length).forEach(([b,...d])=>{b=a.lookup.simpleObject(b);b.parent.add.group([b,...d.map((b)=>a.lookup.simpleObject(b))])});
this.v(a)}})})}ba(a){if(a.parent.is(d.base.ObjectKind.planetTopic))return a.parent;if(a.parent.is(d.base.ObjectKind.cover)||a.parent.is(d.base.ObjectKind.surface)||a.parent.is(d.base.ObjectKind.master)||a.parent.is(d.base.ObjectKind.visual))return a.parent.parent;throw Error("Cannot determine object parent");}f(a){if(a.parent.is(d.base.ObjectKind.planetTopic))return a.parent;if(a.parent.is(d.base.ObjectKind.cover)||a.parent.is(d.base.ObjectKind.surface)||a.parent.is(d.base.ObjectKind.master)||a.parent.is(d.base.ObjectKind.visual))return a.parent.parent;
throw Error("Cannot determine object parent");}aa(a,c){switch(c){case "cover":return this.i(a,k.I18n.ts("Make it visible outside only",{context:"Make it visible outside only"}),c,(a)=>a.parent=this.f(a).cover);case "visual":return this.i(a,k.I18n.ts("Make it visible both inside and outside",{context:"Make it visible both inside and outside"}),c,(a)=>a.parent=this.f(a).visual);case "content":return this.i(a,k.I18n.ts("Make it visible inside only",{context:"Make it visible inside only"}),c,(a)=>{const b=
this.f(a);b.is(d.base.ObjectKind.planetTopic)&&(a.parent=b)});case "surface":return this.i(a,"[DEV] Make it a surface",c,(a)=>{const b=this.f(a);b.is(d.base.ObjectKind.planetTopic)&&(a.parent=b.surface)});case "master":return this.i(a,"[DEV] Make it a master",c,(a)=>a.parent=this.f(a).master);default:return p.Utils.assertNever(c)}}};c={};Object.defineProperty(c,"__esModule",{value:!0});c.lazyModule={createPlugin(){return new l.$}};return c});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_visual_types",["require","prezi_cet_model_editor","prezi_featureswitcher","prezi_i18n","prezi_plugin_api","prezi_utils"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_visual_types.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi_cet_model_editor"),require("prezi_featureswitcher"),require("prezi_i18n"),require("prezi_plugin_api"),require("prezi_utils"));}else{this["prezi_visual_types"]=__factory(this["prezi_cet_model_editor"],this["prezi_featureswitcher"],this["prezi_i18n"],this["prezi_plugin_api"],this["prezi_utils"]);}}).call(this);