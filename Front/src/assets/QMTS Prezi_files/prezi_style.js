;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_style";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[0],"prezi_brand_kit_cta":dependencies[1],"prezi_brandkitprovider":dependencies[2],"prezi_cet_model_editor":dependencies[3],"prezi_editor_commander":dependencies[4],"prezi_editor_store_ui":dependencies[5],"prezi_externalassetprovider":dependencies[6],"prezi_featureswitcher":dependencies[7],"prezi_font_provider":dependencies[8],"prezi_i18n":dependencies[9],"prezi_image_color_thief":dependencies[10],"prezi_logger":dependencies[11],"prezi_playback":dependencies[12],"prezi_plugin_api":dependencies[13],"prezi_plugin_meta":dependencies[14],"prezi_service_data":dependencies[15],"prezi_service_fontcatalogue":dependencies[16],"prezi_styleschemeprovider":dependencies[17],"prezi_textstyleprovider":dependencies[18],"prezi_utils":dependencies[19],"prezi_widgets":dependencies[20]}};})());};})(arguments);var moduleImpl=(function(){return module(function(t){function ma(a,b){a=a.title.toLowerCase();b=b.title.toLowerCase();return a<b?-1:a>b?1:0}function aa(a){switch(a){case y.title:return"TITLE";case y.body:return"BODY_ONE";case y.body2:return"BODY_TWO";case y.subtitle:return"SUBTITLE_ONE";case y.subtitle2:return"SUBTITLE_TWO"}}function ua(a,b){var c=["0101.static.prezi.com/","0102.static.prezi.com/","0103.static.prezi.com/","0103.static.prezi.com.s3.amazonaws.com/"];c=c.map((a)=>"https://"+a).concat(c.map((a)=>"http://"+a)).concat(c.map((a)=>
"//"+a));for(let d=0;d<c.length;d++){const g=c[d];if(0===a.indexOf(g))return a=a.substr(g.length),b?"https://media.preziusercontent.com/"+a:"https://s3.amazonaws.com/0103.static.prezi.com/"+a}return a}var S=t.dependencies.prezi_brand_kit_cta,na=t.dependencies.prezi_editor_store_ui,ba=t.dependencies.prezi_externalassetprovider,oa=t.dependencies.prezi_font_provider,pa=t.dependencies.prezi_playback,e=t.dependencies.prezi_plugin_api,A=t.dependencies.prezi_plugin_meta,w=t.dependencies.prezi_utils,v=t.dependencies.prezi_featureswitcher,
I=t.dependencies.prezi_editor_commander,r=t.dependencies.prezi_cet_model_editor,l=t.dependencies.prezi_logger,f=t.dependencies.prezi_i18n,ca=t.dependencies.prezi_styleschemeprovider,va=t.dependencies.prezi_image_color_thief,wa=t.dependencies["prezi.geometry"],xa=t.dependencies.prezi_brandkitprovider,W=t.dependencies.prezi_service_data,X=t.dependencies.prezi_textstyleprovider,qa=t.dependencies.prezi_service_fontcatalogue,u=t.dependencies.prezi_widgets,p={},ya=this&&p.__awaiter||function(a,b,c,d){function g(a){return a instanceof
c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,m){function h(a){try{f(d.next(a))}catch(q){m(q)}}function e(a){try{f(d["throw"](a))}catch(q){m(q)}}function f(a){a.done?c(a.value):g(a.value).then(h,e)}f((d=d.apply(a,b||[])).next())})};Object.defineProperty(p,"__esModule",{value:!0});var O;(function(a){a.custom="custom";a.brandKit="brandKit";a.preset="preset";a.template="template";a.unsaved="unsaved"})(O=p.ItemType||(p.ItemType={}));var L;(function(a){a.none="none";a.info="info";
a.sulInfo="sulInfo";a.full="full";a.noBrand="noBrand"})(L=p.BrandKitSectionKind||(p.BrandKitSectionKind={}));class za{constructor(a,b){this.args=a;this.common=b}createUI(a){const b=this.createCustomSection(a,this.args.customSecton),c=this.createBrandKitSection(a,this.args.brandKitSection),d=this.createSection(a,this.args.presetSection,O.preset),g=null!=this.args.templateSection?this.createSection(a,this.args.templateSection,O.template):[];a=v.isActive("js-developer-features")&&null!=this.args.onDeleteAll?
this.createDeleteAllSection(a):[];return{title:this.args.title,content:[...b,...c,...d,...g,...a]}}createAddButtonItem(a){return a.image({title:f.I18n.ts("Create new"),src:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wLjUgMTA3LjVWMC40OTk5NjlIMTA3LjVWMTA3LjVIMC41WiIgZmlsbD0iI0Y2RjdGOSIgc3Ryb2tlPSIjREZFMUU0Ii8+CjxjaXJjbGUgY3g9IjU0IiBjeT0iNTQiIHI9IjIwIiBmaWxsPSIjMzE4MUZGIi8+CjxwYXRoIGQ9Ik01NS4zMzMgNTIuNjY3SDYyQzYyLjM1MzUgNTIuNjY3IDYyLjY5MjYgNTIuODA3NCA2Mi45NDI2IDUzLjA1NzRDNjMuMTkyNiA1My4zMDc0IDYzLjMzMyA1My42NDY1IDYzLjMzMyA1NEM2My4zMzMgNTQuMzUzNSA2My4xOTI2IDU0LjY5MjYgNjIuOTQyNiA1NC45NDI2QzYyLjY5MjYgNTUuMTkyNiA2Mi4zNTM1IDU1LjMzMyA2MiA1NS4zMzNINTUuMzMzVjYyQzU1LjMzMyA2Mi4zNTM1IDU1LjE5MjYgNjIuNjkyNiA1NC45NDI2IDYyLjk0MjZDNTQuNjkyNiA2My4xOTI2IDU0LjM1MzUgNjMuMzMzIDU0IDYzLjMzM0M1My42NDY1IDYzLjMzMyA1My4zMDc0IDYzLjE5MjYgNTMuMDU3NCA2Mi45NDI2QzUyLjgwNzQgNjIuNjkyNiA1Mi42NjcgNjIuMzUzNSA1Mi42NjcgNjJWNTUuMzMzSDQ2QzQ1LjY0NjUgNTUuMzMzIDQ1LjMwNzQgNTUuMTkyNiA0NS4wNTc0IDU0Ljk0MjZDNDQuODA3NCA1NC42OTI2IDQ0LjY2NyA1NC4zNTM1IDQ0LjY2NyA1NEM0NC42NjcgNTMuNjQ2NSA0NC44MDc0IDUzLjMwNzQgNDUuMDU3NCA1My4wNTc0QzQ1LjMwNzQgNTIuODA3NCA0NS42NDY1IDUyLjY2NyA0NiA1Mi42NjdINTIuNjY3VjQ2QzUyLjY2NyA0NS42NDY1IDUyLjgwNzQgNDUuMzA3NCA1My4wNTc0IDQ1LjA1NzRDNTMuMzA3NCA0NC44MDc0IDUzLjY0NjUgNDQuNjY3IDU0IDQ0LjY2N0M1NC4zNTM1IDQ0LjY2NyA1NC42OTI2IDQ0LjgwNzQgNTQuOTQyNiA0NS4wNTc0QzU1LjE5MjYgNDUuMzA3NCA1NS4zMzMgNDUuNjQ2NSA1NS4zMzMgNDZWNTIuNjY3WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cgo="},
onClick:()=>{if(this.args.isPremium)l.avro.Avro.createDefaultLogger().logAddPresentationColorScheme({presentation_color_scheme_id:null!=this.args.selectedSchemeId?this.args.selectedSchemeId:"new"}),this.args.onCreateNew();else this.args.onOpenPaywallModal()},dataLookup:this.args.id+"/add-scheme-button"})}createCustomSection(a,b){return[a.sectionHeader({content:b.title}),a.simpleList((a)=>{const c=[this.createAddButtonItem(a)],g=null!=this.args.unsavedItem?this.createItem(a,this.args.unsavedItem,O.unsaved,
!1):null;null!=g&&c.push(g);this.args.isPremium&&c.push(...b.items.filter((a)=>null!=a).map((b)=>this.createItem(a,b,O.custom,!1)).sort(ma));return this.createList(b,c)}),a.separator()]}createBrandKitSection(a,b){if(b.kind===L.none)return[];let c=[],d;if(b.kind===L.info)d=b.title,c=this.common.createNoBrandSidebarContent(a,{title:null,text:b.text,extraLabel:null,buttonData:{text:b.buttonText,href:"/branding/",color:b.buttonColor,logFun:b.logFun}});else if(b.kind===L.sulInfo)d=b.title,c=[a.label(b.text),
a.button(e.ButtonSize.Large,e.ButtonAlign.Center,(a)=>[a.button({id:"brandkit-sul-info-section-upgrade",color:e.ButtonColor.Gold,flexibleWidth:!0,content:{text:f.I18n.ts("Upgrade")},onClick:()=>{l.avro.Avro.createDefaultLogger().logUpgradeToTeam({team_upgrade_trigger:b.trigger});window.open("/branding/","_blank")}})])];else if(b.kind===L.full||b.kind===L.noBrand){const g=b.kind===L.noBrand;d=f.I18n.ts("Team Library");c=[a.simpleList((a)=>{const c=b.items.map((b)=>this.createItem(a,b,O.brandKit,g)).sort(ma);
return this.createList(b,c)})]}return[a.sectionHeader({content:d}),...c,a.separator()]}createSection(a,b,c){return[a.sectionHeader({content:b.title}),a.simpleList((a)=>{const d=b.items.filter((a)=>null!=a).map((b)=>this.createItem(a,b,c,!1));return this.createList(b,d)}),a.separator()]}createList(a,b){return{activeId:null!=this.args.unsavedItem?this.args.unsavedItem.id:this.args.selectedSchemeId,id:`${this.args.id}/${a.id}`,items:b,itemType:e.ListItemType.large,itemLayout:u.ListItemLayout.fixed,showTitle:a.showItemTitles,
progress:a.progress}}createItem(a,b,c,d){return a.image({id:b.id,title:null!=b.title&&""!==b.title?b.title:f.I18n.ts("(Unsaved)"),src:{url:b.thumbnailUrl},onClick:(a)=>{this.args.onApply(a,b.id,c)},dataLookup:b.id,primaryAction:d?null:{id:"editAction",onClick:(a)=>this.args.onEdit(a,b.id,c),icon:u.IconSmallId.Edit,enabled:!0,title:f.I18n.ts("Edit")},disabled:d})}createDeleteAllSection(a){return[a.separator(),a.sectionHeader({content:f.I18n.ts("Dev section")}),a.button(e.ButtonSize.Large,e.ButtonAlign.Center,
(a)=>[a.button({color:e.ButtonColor.Gray,id:"delete-all-custom-button",content:{text:f.I18n.ts("Delete all custom styles")},onClick:()=>ya(this,void 0,void 0,function*(){this.args.onDeleteAll()})})])]}}p.StyleList=za;var B={},da=this&&B.__awaiter||function(a,b,c,d){function g(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,m){function h(a){try{f(d.next(a))}catch(q){m(q)}}function e(a){try{f(d["throw"](a))}catch(q){m(q)}}function f(a){a.done?c(a.value):g(a.value).then(h,
e)}f((d=d.apply(a,b||[])).next())})};Object.defineProperty(B,"__esModule",{value:!0});B.TextStyleLogic=class{constructor(a,b,c,d){this.applicationApi=a;this.uiRoot=b;this.session=c;this.textStyleStateHelper=d;this.common=new k.Common(b);this.logger=l.LoggerModule.getLoggerManager().createLogger("prezi_style.TextStyleLogic");this.textStyleProvider=X.TextStyleProviderModule.getTextStyleProvider(this.applicationApi);this.fontProvider=oa.FontProviderModule.getFontProvider(this.applicationApi)}updateFontFamiliesUserSelected(){var {isNetworkOffline:a}=
this.uiRoot.getState();a=a?qa.getBuiltinFontDescriptionsOrderedByName():this.fontProvider.getUserSelectedFonts();a=new Map(a.map((a)=>[a.fontFamily,a]));this.textStyleStateHelper.setState({fontFamiliesUserSelected:a})}updateFontFamiliesInScheme(){const {fontFamiliesBuiltIn:a,fontFamiliesUserSelected:b,fontFamiliesInDocument:c,fontFamiliesInScheme:d,editedScheme:g}=this.textStyleStateHelper.getState();if(g){const e=[];for(const f of Object.keys(g.fontScheme)){var h=g.fontScheme[f],m=h.fontFamily;if(m=
a.get(m)||b.get(m)||c.get(m)||d.get(m))e.push(Promise.resolve(m));else{const a=this.convertCustomFontToFontDescription(h);h=this.fontProvider.createFontPresetData(a,this.session.document.progressiveAssetManager).then((b)=>Object.assign(Object.assign({},a),{imageUri:b.imageUrl}));e.push(h)}}Promise.all(e).then((a)=>{a=new Map(a.map((a)=>[a.fontFamily,a]));this.textStyleStateHelper.setState({fontFamiliesInScheme:a})})}}convertCustomFontToFontDescription(a){if(!a.isCustom)throw Error("Impossible to convert none custom font");
return{fontFamily:a.fontFamily,hasBold:!!a.customKegProperties.boldKeg,hasItalic:!!a.customKegProperties.italicKeg,hasBoldItalic:!!a.customKegProperties.boldItalicKeg,boldItalicKeg:a.customKegProperties.boldItalicKeg,italicKeg:a.customKegProperties.italicKeg,boldKeg:a.customKegProperties.boldKeg,hasNormal:!!a.customKegProperties.normalKeg,normalKeg:a.customKegProperties.normalKeg}}updateFontFamiliesInDocument(a){var b=this.getFontFamiliesInDocument(a);const {fontFamiliesBuiltIn:c,fontFamiliesUserSelected:d,
fontFamiliesInDocument:g,fontFamiliesInScheme:h}=this.textStyleStateHelper.getState();a=[];for(let [m,e]of b)(b=c.get(m)||d.get(m)||g.get(m)||h.get(m))?a.push(Promise.resolve(b)):(b=this.fontProvider.createFontPresetData(e,this.session.document.progressiveAssetManager).then((a)=>Object.assign(Object.assign({},e),{imageUri:a.imageUrl})),a.push(b));Promise.all(a).then((a)=>{a=new Map(a.map((a)=>[a.fontFamily,a]));this.textStyleStateHelper.setState({fontFamiliesInDocument:a})})}getFontFamiliesInDocument(a){return new Map(a.styleSheet.fontDescriptions.filter((a)=>
a.hasNormal).map((a)=>[a.fontFamily,a]))}loadSchemes(){return da(this,void 0,void 0,function*(){const {hasPremium:a,isNetworkOffline:b}=this.uiRoot.getState();this.textStyleStateHelper.setState({presetSchemeDisplayProgress:e.ListProgress.working});var c=yield this.textStyleProvider.getPresetTextStyles(this.session);this.textStyleStateHelper.setState({presetTextStyleList:c,presetSchemeDisplayProgress:e.ListProgress.finished});c=this.session.document.read((a)=>a.meta.templateInfo);null!=c&&(this.textStyleStateHelper.setState({templateId:c.templateId,
templateDisplayProgress:e.ListProgress.working}),c=yield this.getTemplateTextStyle(c),this.textStyleStateHelper.setState({templateTextStyle:c,templateDisplayProgress:e.ListProgress.finished}));if(b)this.textStyleStateHelper.setState({customTextStyleSuccesfullyLoaded:!1,customTextStyleDisplayProgress:e.ListProgress.finished});else if(a){this.textStyleStateHelper.setState({customTextStyleDisplayProgress:e.ListProgress.working});let a;try{a=yield this.textStyleProvider.getCustomTextStyles(this.session)}catch(g){a=
[],this.showErrorLoadSchemes()}this.textStyleStateHelper.setState({customTextStyleList:a,customTextStyleDisplayProgress:e.ListProgress.finished,customTextStyleSuccesfullyLoaded:!0})}this.updateSelectedScheme()})}getTemplateTextStyle(a){return da(this,void 0,void 0,function*(){try{const b=yield this.session.document.progressiveAssetManager.getTemplateStyleSheetReader(a),c=I.EditorCommander.createTextStyleCommander().getFontScheme(b);return yield this.textStyleProvider.convertFontSchemeToTextStyle(c,
"template","template",this.session)}catch(b){return this.logger.warn({action:"get",object:"templateTextStyle",trigger:"error",payload:{error_message:b.message,trace:b.stack}}),null}})}updateSelectedScheme(){return da(this,void 0,void 0,function*(){const {customTextStyleDisplayProgress:a,customTextStyleList:b,presetSchemeDisplayProgress:c,presetTextStyleList:d,selectedScheme:g,templateDisplayProgress:h,templateTextStyle:m,currentPreziScheme:f,brandkitTextStyleList:k}=this.textStyleStateHelper.getState();
var l=this.uiRoot.getState().isNetworkOffline;null==f||h!==e.ListProgress.finished||!l&&a!==e.ListProgress.finished||c!==e.ListProgress.finished||null!=g&&g.id!==x.UnsavedId&&B.TextStyleLogic.areFontSchemesEqual(g.fontScheme,f.fontScheme)||(l=[...b,m,...d,...k].filter((a)=>null!=a).find((a)=>B.TextStyleLogic.areFontSchemesEqual(a.fontScheme,f.fontScheme)),this.textStyleStateHelper.setState({selectedScheme:l?l:f}))})}showErrorLoadSchemes(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with loading your text styles."),
f.I18n.ts("We\u2019re unable to load your text styles at this time. Please try again."),"text_style_plugin_load_schemes_failed")}openRootPage(){this.textStyleStateHelper.setState({schemeCustomizerMode:n.SchemeCustomizerMode.None,editedScheme:null,savedEditedScheme:null});this.common.openSidebar("text-style-sidebar-id")}applyTextStyle(a,b){I.EditorCommander.createTextStyleCommander().applyFontScheme(a,this.session.document.progressiveAssetManager,b.fontScheme)}static areTextStylesEqual(a,b){return B.TextStyleLogic.serializeTextStyle(a)===
B.TextStyleLogic.serializeTextStyle(b)}static areFontSchemesEqual(a,b){return B.TextStyleLogic.serializeFontScheme(a)===B.TextStyleLogic.serializeFontScheme(b)}static serializeTextStyle(a){return null==a?"":JSON.stringify({fontScheme:B.TextStyleLogic.serializeFontScheme(a.fontScheme)})}static serializeFontScheme(a){return null==a?"":JSON.stringify({title:{fontFamily:a.title.fontFamily,hasBold:a.title.hasBold,hasItalic:a.title.hasItalic},subtitle:{fontFamily:a.subtitle.fontFamily,hasBold:a.subtitle.hasBold,
hasItalic:a.subtitle.hasItalic},subtitle2:{fontFamily:a.subtitle2.fontFamily,hasBold:a.subtitle2.hasBold,hasItalic:a.subtitle2.hasItalic},body:{fontFamily:a.body.fontFamily,hasBold:a.body.hasBold,hasItalic:a.body.hasItalic},body2:{fontFamily:a.body2.fontFamily,hasBold:a.body2.hasBold,hasItalic:a.body2.hasItalic}})}};var J={},P=this&&J.__awaiter||function(a,b,c,d){function g(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,m){function h(a){try{f(d.next(a))}catch(q){m(q)}}
function e(a){try{f(d["throw"](a))}catch(q){m(q)}}function f(a){a.done?c(a.value):g(a.value).then(h,e)}f((d=d.apply(a,b||[])).next())})};Object.defineProperty(J,"__esModule",{value:!0});var y;(function(a){a.title="title";a.subtitle="subtitle";a.subtitle2="subtitle2";a.body="body";a.body2="body2"})(y||(y={}));const ea=f.I18n.ts("Untitled style");J.TextStyleCustomizerPageId="textStyleCustomizerPageId";J.TextStyleCustomizer=class{constructor(a,b,c,d,g,h){this.applicationApi=a;this.uiRoot=b;this.session=
c;this.textStyleHelper=d;this.pluginAccess=g;this.getBrandKitPart=h;this.common=new k.Common(this.uiRoot);this.textStyleLogic=new B.TextStyleLogic(this.applicationApi,this.uiRoot,this.session,d);this.textStyleProvider=X.TextStyleProviderModule.getTextStyleProvider(this.applicationApi)}createPage(a,b){return null===b?{}:{[J.TextStyleCustomizerPageId]:this.createPageContent(a,b)}}createPageContent(a,b){var {hasPremium:c}=this.uiRoot.getState();const d=[];c||d.push(...[a.sectionHeader({content:f.I18n.ts("Ready to unlock more features?")}),
a.label(f.I18n.ts("Get access to advanced color editing and much more by upgrading your Prezi license.")),a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[a.button({color:e.ButtonColor.Blue,id:"text-style-customizer-upgrade-button",content:{text:f.I18n.ts("Upgrade now")},onClick:()=>{this.common.openPaywallModal()}})]),a.separator()]);const {fontFamiliesInDocument:g,fontFamiliesInScheme:h,fontFamiliesUserSelected:m}=this.textStyleHelper.getState();c=new Map([...g,...h,...m]);const G=c.get(b.fontScheme.title.fontFamily),
k=c.get(b.fontScheme.subtitle.fontFamily),l=c.get(b.fontScheme.body.fontFamily),N=c.get(b.fontScheme.subtitle2.fontFamily),q=c.get(b.fontScheme.body2.fontFamily);G&&k&&l&&N&&q?(d.push(...[a.sectionHeader({content:f.I18n.ts("Name")}),this.createTitleInput(a,b),a.separator(),a.sectionHeader({content:f.I18n.ts("Title")}),this.createFontDescriptionSelector(a,b.id,y.title,c),this.createTextStyleSelectors(a,b.id,y.title,G),a.separator(),a.sectionHeader({content:f.I18n.ts("Subtitle")}),this.createFontDescriptionSelector(a,
b.id,y.subtitle,c),this.createTextStyleSelectors(a,b.id,y.subtitle,k),a.separator(),a.sectionHeader({content:f.I18n.ts("Body")}),this.createFontDescriptionSelector(a,b.id,y.body,c),this.createTextStyleSelectors(a,b.id,y.body,l),a.separator(),a.collapseSection({id:"text-style-customizer-more-settings",title:f.I18n.ts("More settings"),items:[a.sectionHeader({content:f.I18n.ts("Subtitle 2")}),this.createFontDescriptionSelector(a,b.id,y.subtitle2,c),this.createTextStyleSelectors(a,b.id,y.subtitle2,N),
a.separator(),a.sectionHeader({content:f.I18n.ts("Body 2")}),this.createFontDescriptionSelector(a,b.id,y.body2,c),this.createTextStyleSelectors(a,b.id,y.body2,q)]})]),d.push(...this.createCrossLinkToSchemeSidebar(a))):d.push(a.illustration(f.I18n.ts("Something went wrong"),e.IllustrationLargeLightId.Error));return{title:x.getTextStyleMenuItemAndSidebarTitle(),content:d,footer:[this.createButtonSection(a)]}}createTitleInput(a,b){const {hasPremium:c}=this.uiRoot.getState(),d=this.checkTitleError();
return a.inputField({id:"text-style-customizer-name-input",placeholderText:ea,value:b.title,disabled:!1,maxLength:26,onValueChange:(a,b)=>{c?this.textStyleHelper.setState({editedScheme:Object.assign(Object.assign({},this.textStyleHelper.getState().editedScheme),{title:b})}):this.common.openPaywallModal()},errorText:d.status===k.ResultStatus.error?d.error.msg:null})}checkTitleError(){const {savedEditedScheme:a,editedScheme:b,schemeCustomizerMode:c}=this.textStyleHelper.getState();return b.title&&0!==
b.title.length?c===n.SchemeCustomizerMode.Add&&!this.isSchemeTitleUnique(b.title)||c===n.SchemeCustomizerMode.Edit&&b.title!==a.title&&!this.isSchemeTitleUnique(b.title)?{status:k.ResultStatus.error,error:{msg:f.I18n.ts("Name already used")}}:{status:k.ResultStatus.ok,value:{}}:{status:k.ResultStatus.ok,value:{}}}isSchemeTitleUnique(a){return null==this.textStyleHelper.getState().customTextStyleList.find((b)=>b.title===a)}createFontDescriptionSelector(a,b,c,d){const g=(a,b)=>a.fontFamily.localeCompare(b.fontFamily);
return a.popupDropdown((a)=>{const {isNetworkOffline:h}=this.uiRoot.getState(),{fontFamiliesInDocument:G,editedScheme:k}=this.textStyleHelper.getState();var Y=[...G.values()].sort(g).map((d)=>this.createFontSelector(a,b,d,c)).filter((a)=>null!=a),N=[...d.values()].sort(g).map((d)=>this.createFontSelector(a,b,d,c)).filter((a)=>null!=a);Y={id:`text-style-customizer-${c}-font`,text:k.fontScheme[c].fontFamily,popupHeight:e.PopupHeight.Short,popupHeader:[a.sectionHeader({content:f.I18n.ts("Font")})],popupContent:[a.sectionHeader({content:f.I18n.ts("Used in the document")}),
...Y,a.separator(),...N]};N=[a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[a.button({id:"showMoreFontsButton",color:e.ButtonColor.Gray,content:{text:f.I18n.ts("More fonts")},onClick:()=>{l.avro.Avro.createDefaultLogger().logOpenMoreFontsDialog({font_dialog_source:"TEXT_STYLES_SIDEBAR"});this.pluginAccess.send(A.fontSelector,{kind:"openFontSelectorModal"})},disabled:h})])];return Y=Object.assign(Object.assign({},Y),{popupFooter:N})})}createFontSelector(a,b,c,d){const {hasPremium:g}=this.uiRoot.getState(),
{editedScheme:h}=this.textStyleHelper.getState();return a.imageCheckbox({id:`image-checkbox-${c.fontFamily}`,imgUrl:c.imageUri,checked:h.fontScheme[d].fontFamily===c.fontFamily,onCheck:(a,e)=>{e&&(g?(e=new k.SyncBrandKitAction((a)=>{l.avro.Avro.createDefaultLogger().logSetPresentationTextFont({presentation_font_scheme_id:h.id,fontscheme_attrib_name:aa(d),font_name:c.fontFamily});this.updateEditedSchemeFontFamily(a,c,d)}),this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:e,uat:a,
session:this.session,condition:()=>this.textStyleHelper.warnIfBrandedCondition(b)},()=>this.getBrandKitPart())):this.common.openPaywallModal())}})}updateEditedSchemeFontFamily(a,b,c){const {hasPremium:d}=this.uiRoot.getState(),{editedScheme:g}=this.textStyleHelper.getState(),h=b.fontFamily;if(null!==g&&d){var m=!1;if(!this.textStyleProvider.isBuiltinFont(h)){m=!0;var e={normalKeg:b.normalKeg,italicKeg:b.italicKeg,boldKeg:b.boldKeg,boldItalicKeg:b.boldItalicKeg}}this.updateEditedSchemeAndApply(a,c,
()=>({fontFamily:h,isCustom:m,customKegProperties:e,hasBold:!1,hasItalic:!1}))}}updateEditedSchemeAndApply(a,b,c){const {hasPremium:d}=this.uiRoot.getState(),{editedScheme:g}=this.textStyleHelper.getState();null!==g&&d&&(b=Object.assign(Object.assign({},g),{fontScheme:Object.assign(Object.assign({},g.fontScheme),{[b]:Object.assign(Object.assign({},g.fontScheme[b]),c(g.fontScheme[b]))})}),this.textStyleHelper.setState({editedScheme:b}),this.textStyleLogic.applyTextStyle(a,b),this.textStyleLogic.updateFontFamiliesInScheme())}createTextStyleSelectors(a,
b,c,d){const {editedScheme:{fontScheme:{[c]:{hasBold:g,hasItalic:h}},id:m}}=this.textStyleHelper.getState(),{hasPremium:G}=this.uiRoot.getState();return a.button(e.ButtonSize.Small,e.ButtonAlign.Start,(a)=>[a.toggle({pushed:g,id:`text-style-customizer-${c}-bold-button`,content:{icon:e.IconSmallId.Bold},disabled:!g&&!h&&!d.hasBold||!g&&h&&!d.hasBoldItalic||g&&h&&!d.hasItalic||g&&!h&&!d.hasNormal,onClick:(a)=>{if(G){const d=new k.SyncBrandKitAction((a)=>{l.avro.Avro.createDefaultLogger().logSetPresentationTextStyle({presentation_font_scheme_id:m,
fontscheme_attrib_name:aa(c),font_style:g?"BOLD_ON":"BOLD_OFF"});this.updateEditedSchemeAndApply(a,c,(a)=>({hasBold:!a.hasBold}))});this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:d,uat:a,session:this.session,condition:()=>this.textStyleHelper.warnIfBrandedCondition(b)},()=>this.getBrandKitPart())}else this.common.openPaywallModal()},tooltipText:f.I18n.ts("Bold")}),a.toggle({pushed:h,id:`text-style-customizer-${c}-italic-button`,content:{icon:e.IconSmallId.Italic},disabled:!g&&
!h&&!d.hasItalic||!g&&h&&!d.hasNormal||g&&h&&!d.hasBold||g&&!h&&!d.hasBoldItalic,onClick:(a)=>{if(G){const d=new k.SyncBrandKitAction((a)=>{l.avro.Avro.createDefaultLogger().logSetPresentationTextStyle({presentation_font_scheme_id:m,fontscheme_attrib_name:aa(c),font_style:h?"ITALIC_ON":"ITALIC_OFF"});this.updateEditedSchemeAndApply(a,c,(a)=>({hasItalic:!a.hasItalic}))});this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:d,uat:a,session:this.session,condition:()=>this.textStyleHelper.warnIfBrandedCondition(b)},
()=>this.getBrandKitPart())}else this.common.openPaywallModal()},tooltipText:f.I18n.ts("Italic")})])}createButtonSection(a){const {hasPremium:b,isNetworkOffline:c}=this.uiRoot.getState(),{editedScheme:d,schemeCustomizerMode:g,selectedScheme:h}=this.textStyleHelper.getState();return a.button(e.ButtonSize.Large,e.ButtonAlign.Center,(a)=>[a.button({color:e.ButtonColor.Blue,id:"text-style-customizer-save-button",content:{text:f.I18n.ts("Save")},disabled:!this.isSaveTextStyleButtonEnabled(),onClick:()=>
P(this,void 0,void 0,function*(){b?(l.avro.Avro.createDefaultLogger().logSavePresentationFontScheme({presentation_font_scheme_id:d.id}),yield this.saveEditedSchemeAndReloadList()):this.common.openPaywallModal()})}),a.button({color:e.ButtonColor.Gray,id:"text-style-customizer-copy-button",content:{icon:e.IconSmallId.Copy},disabled:c||g===n.SchemeCustomizerMode.Add,onClick:()=>P(this,void 0,void 0,function*(){b?yield this.saveCopyAndReloadList():this.common.openPaywallModal()}),tooltipText:f.I18n.ts("Make a copy"),
tooltipPosition:"top"}),a.button({color:e.ButtonColor.Gray,id:"text-style-customizer-delete-button",content:{icon:e.IconSmallId.Trash},disabled:c||g!==n.SchemeCustomizerMode.Edit||!h.isCustom,onClick:()=>P(this,void 0,void 0,function*(){b?(l.avro.Avro.createDefaultLogger().logDeletePresentationFontScheme({presentation_font_scheme_id:d.id}),yield this.deleteEditedScheme()):this.common.openPaywallModal()}),tooltipText:f.I18n.ts("Delete"),tooltipPosition:"top"})])}createCrossLinkToSchemeSidebar(a){return[a.infoMessage(f.I18n.ts("Did you know you can set a custom color scheme for text and other parts of your presentation?")),
a.button(e.ButtonSize.Small,e.ButtonAlign.End,(a)=>[a.button({color:e.ButtonColor.Gray,id:"crosslink-to-scheme-sidebar",content:{text:f.I18n.ts("Customize colors")},onClick:()=>{l.avro.Avro.createDefaultLogger().logCustomizeColorsFromFontSchemeSidebar();this.common.openSidebar("color-style-sidebar-id")}})])]}isSaveTextStyleButtonEnabled(){const {isNetworkOffline:a}=this.uiRoot.getState(),{savedEditedScheme:b,editedScheme:c,schemeCustomizerMode:d}=this.textStyleHelper.getState();if(a)return!1;switch(d){case n.SchemeCustomizerMode.Add:return this.checkTitleError().status===
k.ResultStatus.ok;case n.SchemeCustomizerMode.Edit:return this.checkTitleError().status===k.ResultStatus.ok&&(c.title!==b.title||!B.TextStyleLogic.areTextStylesEqual(b,c));default:return!1}}saveEditedSchemeAndReloadList(){return P(this,void 0,void 0,function*(){var {hasPremium:a}=this.uiRoot.getState();const {editedScheme:b}=this.textStyleHelper.getState();null!==b&&a&&(a=Object.assign(Object.assign({},b),{id:b.id===x.UnsavedId?"":b.id}),a=yield this.saveScheme(a))&&(this.textStyleLogic.openRootPage(),
yield this.textStyleLogic.loadSchemes(),this.textStyleHelper.setState({selectedScheme:a}),yield this.textStyleLogic.updateSelectedScheme())})}saveScheme(a){return P(this,void 0,void 0,function*(){try{let b=a;a.title&&0!==a.title.length||(b=Object.assign(Object.assign({},a),{title:k.Common.createUniqTitle(ea,this.textStyleHelper.getState().customTextStyleList)}));return yield this.textStyleProvider.saveCustomTextStyle(b,this.session)}catch(b){return l.avro.Avro.createDefaultLogger().logLoadedFontSchemeSaveErrorDialog(),
this.showErrorSaveScheme(),null}})}saveCopyAndReloadList(){return P(this,void 0,void 0,function*(){const {editedScheme:a,selectedScheme:b,customTextStyleList:c}=this.textStyleHelper.getState();var d=null!=a?a:b;const g=null==(null===d||void 0===d?void 0:d.title)||""===(null===d||void 0===d?void 0:d.title)?ea:f.I18n.tsFormatKeys("Copy of {title}",{title:d.title});d=Object.assign(Object.assign({},d),{id:"",title:k.Common.createUniqTitle(g,c),isCustom:!0});if(d=yield this.saveScheme(d))l.avro.Avro.createDefaultLogger().logCopiedPresentationFontScheme({copied_presentation_font_scheme_id:d.id,
original_presentation_font_scheme_id:b.id}),this.textStyleLogic.openRootPage(),yield this.textStyleLogic.loadSchemes(),yield this.textStyleLogic.updateSelectedScheme()})}deleteEditedScheme(){var {hasPremium:a}=this.uiRoot.getState();const {editedScheme:b}=this.textStyleHelper.getState();null!==b&&a&&(a=this.textStyleProvider.deleteCustomTextStyle(b),a.then(()=>{this.textStyleLogic.openRootPage();return this.textStyleLogic.loadSchemes()}).then(()=>{this.textStyleHelper.setState({selectedScheme:null});
return this.textStyleLogic.updateSelectedScheme()}),a.catch(()=>this.showErrorDeleteScheme()))}showErrorDeleteScheme(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with deleting your text styles."),f.I18n.ts("We\u2019re unable to delete your text styles at this time. Please try again."),"text_style_plugin_delete_scheme_failed")}showErrorSaveScheme(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with saving your text styles."),f.I18n.ts("We\u2019re unable to save your text styles at this time. Please try again."),
"text_style_plugin_save_scheme_failed")}};var x={},fa=this&&x.__awaiter||function(a,b,c,d){function g(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,e){function h(a){try{f(d.next(a))}catch(q){e(q)}}function m(a){try{f(d["throw"](a))}catch(q){e(q)}}function f(a){a.done?c(a.value):g(a.value).then(h,m)}f((d=d.apply(a,b||[])).next())})};Object.defineProperty(x,"__esModule",{value:!0});x.getDefaultTextStyleState=()=>({customTextStyleDisplayProgress:e.ListProgress.finished,
customTextStyleSuccesfullyLoaded:!1,customTextStyleList:[],presetSchemeDisplayProgress:e.ListProgress.finished,presetTextStyleList:[],schemeCustomizerMode:n.SchemeCustomizerMode.None,templateId:null,templateDisplayProgress:e.ListProgress.finished,currentPreziScheme:null,selectedScheme:null,editedScheme:null,savedEditedScheme:null,templateTextStyle:null,shouldLoadSchemeOnOpen:!0,fontFamiliesBuiltIn:new Map,fontFamiliesUserSelected:new Map,fontFamiliesInDocument:new Map,fontFamiliesInScheme:new Map,
allSelectedObjectIsText:!1,brandkitTextStyleList:[]});x.UnsavedId="(Unsaved)";x.getTextStyleMenuItemAndSidebarTitle=()=>f.I18n.ts("Text");x.TextStylePart=class{constructor(a,b,c,d,g){this.applicationApi=a;this.session=b;this.uiRoot=c;this.pluginAccess=d;this.getBrandKitPart=g;this.logger=l.LoggerModule.getLoggerManager().createLogger("prezi_style.TextStylePart");this.common=new k.Common(c);this.textStyleLogic=new B.TextStyleLogic(this.applicationApi,this.uiRoot,this.session,this);this.textStyleSchemeCustomizer=
new J.TextStyleCustomizer(this.applicationApi,this.uiRoot,this.session,this,this.pluginAccess,this.getBrandKitPart);this.textStyleProvider=X.TextStyleProviderModule.getTextStyleProvider(this.applicationApi);oa.FontProviderModule.getFontProvider(a).onUserSelectedFontsChange(()=>{"text-style-sidebar-id"===this.uiRoot.getState().openedSidebar&&this.textStyleLogic.updateFontFamiliesUserSelected()});a.onStyleSheetChange(()=>{"text-style-sidebar-id"===this.uiRoot.getState().openedSidebar&&this.session.document.read((a)=>
{this.textStyleLogic.updateFontFamiliesInDocument(a)})});a.onLicenseChange((a)=>{const {openedSidebar:b,hasPremium:c}=this.uiRoot.getState(),d=this.getState().shouldLoadSchemeOnOpen;a=a.featureSet.pitchCustomSchemes&&!v.isActive("js-text-style-paywall");c!==a&&(this.uiRoot.setState({hasPremium:a}),"text-style-sidebar-id"===b?this.textStyleLogic.loadSchemes():d||this.setState({shouldLoadSchemeOnOpen:!0}))});a.onDocumentChange(()=>fa(this,void 0,void 0,function*(){this.updateFontFamiliesBuiltIn();yield this.updateCurrentPreziScheme();
const a=this.uiRoot.getState().openedSidebar,b=this.getState().schemeCustomizerMode;"text-style-sidebar-id"===a&&b===n.SchemeCustomizerMode.None&&(yield this.textStyleLogic.updateSelectedScheme())}));a.onNetworkStatusChange((a)=>{const b=this.uiRoot.getState().openedSidebar,{customTextStyleSuccesfullyLoaded:c,schemeCustomizerMode:d,shouldLoadSchemeOnOpen:g}=this.getState();a!==e.NetworkStatus.Online||c||("text-style-sidebar-id"===b?this.textStyleLogic.loadSchemes():g||this.setState({shouldLoadSchemeOnOpen:!0}));
"text-style-sidebar-id"===b&&d!==n.SchemeCustomizerMode.None&&this.textStyleLogic.updateFontFamiliesUserSelected()});a.onSelectionChange((a)=>{this.setState({allSelectedObjectIsText:0<a.allObjects.length&&a.allObjects.every(r.base.refIs(r.base.ObjectKind.text))})})}declareUI(a){const b=this.createTextStyleList();this.createTextStyleSidebar(a,b);this.createThemeMenuItem(a);this.createContextMenuItem(a);this.createConfirmDeleteAllDialog(a)}getState(){return this.uiRoot.getState().textStyleState}setState(a){const b=
this.getState();this.uiRoot.setState({textStyleState:Object.assign(Object.assign({},b),a)})}setBrandKit(a){let b=null;const c=()=>{null==b&&(b=this.session.document.read((a)=>I.EditorCommander.createTextStyleCommander().getFontScheme(a.styleSheet)));return b};a=a.filter((a)=>null!=a.text).map((a)=>{const b={title:null!=a.text.title?this.getFontProperties(a.text.title,a.fonts):c().title,subtitle:null!=a.text.subtitle?this.getFontProperties(a.text.subtitle,a.fonts):c().subtitle,subtitle2:null!=a.text.subtitle2?
this.getFontProperties(a.text.subtitle2,a.fonts):c().subtitle2,body:null!=a.text.body?this.getFontProperties(a.text.body,a.fonts):c().body,body2:null!=a.text.body2?this.getFontProperties(a.text.body2,a.fonts):c().body2};return X.TextStyleProviderModule.getTextStyleProvider(this.applicationApi).convertFontSchemeToTextStyle(b,a.id,a.name,this.session).catch(()=>null)});Promise.all(a).then((a)=>{a=a.filter((a)=>null!=a);this.setState({brandkitTextStyleList:a})})}getApplyBrandKitAction(a){return new k.SyncBrandKitAction((b)=>
{const c=this.lookupTextStyle(a,p.ItemType.brandKit);null!=c&&this.textStyleLogic.applyTextStyle(b,c)})}getThumbnailData(a){a=this.lookupTextStyle(a,p.ItemType.brandKit);return null!=a?{url:a.thumbnailUrl,isPlaceholder:!1}:{url:t.getResourceUrl("notset.svg"),isPlaceholder:!0}}getFontProperties(a,b){b=this.findCustomKegProps(a.fontFamily,b);return{fontFamily:a.fontFamily,hasBold:a.bold,hasItalic:a.italic,hasBackground:!1,isCustom:null!=b,customKegProperties:b}}findCustomKegProps(a,b){let c,d,g,h,e;
b.forEach((b)=>{b.fontFamily===a&&("Regular"===b.subfamily?c={origin:r.base.FontOrigin.brandKit,source:b.keg}:"Bold"===b.subfamily?d={origin:r.base.FontOrigin.brandKit,source:b.keg}:"Italic"===b.subfamily?g={origin:r.base.FontOrigin.brandKit,source:b.keg}:"Bold Italic"===b.subfamily?h={origin:r.base.FontOrigin.brandKit,source:b.keg}:e={origin:r.base.FontOrigin.brandKit,source:b.keg})});null==c&&(c=d||g||h||e);return{normalKeg:c,boldKeg:d,italicKeg:g,boldItalicKeg:h}}createTextStyleSidebar(a,b){a.createSidebar("text-style-sidebar-id",
(a)=>{const {editedScheme:c}=this.getState();return{root:b.createUI(a),pages:this.textStyleSchemeCustomizer.createPage(a,c),onOpen:(a)=>{a=a.pageId===J.TextStyleCustomizerPageId;l.avro.Avro.createDefaultLogger().logShowPresentationFontSchemeOptions({fontscheme_sidebar_mode:a?"SCHEMECUSTOMIZER":"SCHEMELIST"});if(!a){var {shouldLoadSchemeOnOpen:a}=this.getState();a&&(this.textStyleLogic.loadSchemes(),this.setState({shouldLoadSchemeOnOpen:!1}));this.textStyleLogic.updateSelectedScheme();"sulInfoSection"===
this.uiRoot.getState().brandkitSectionState&&l.avro.Avro.createDefaultLogger().logShownUpgradeToTeamCta({team_upgrade_trigger:"PRESENT_STYLE_TEXT"})}},onClose:()=>{const {schemeCustomizerMode:a}=this.getState();l.avro.Avro.createDefaultLogger().logClosePresentationFontSchemeSidebar({fontscheme_sidebar_mode:a!==n.SchemeCustomizerMode.None?"SCHEMECUSTOMIZER":"SCHEMELIST"});this.uiRoot.setState({openedSidebar:null})},onPageBack:()=>{l.avro.Avro.createDefaultLogger().logBackFromFontSchemeEditing({fontscheme_sidebar_mode:"SCHEMECUSTOMIZER"});
this.textStyleLogic.openRootPage();this.textStyleLogic.updateSelectedScheme()}}})}createThemeMenuItem(a){a.createTopMenuItem(e.TopMenuId.Style,{id:"topmenu-theme-item-text",kind:e.MenuItemKind.largeButton,enabled:!0,weight:3,title:f.I18n.ts("Text style"),icon:e.IconSmallId.Text,onClick:()=>{l.avro.Avro.createDefaultLogger().logClickTabMenuItem({tab_menu_item:"FONT_STYLE"});this.common.toggleSidebar("text-style-sidebar-id")}})}createContextMenuItem(a){this.getState().allSelectedObjectIsText&&a.createMenuItem({kind:e.MenuItemKind.context,
enabled:!0,onClick:()=>{this.common.toggleSidebar("text-style-sidebar-id")},weight:66,id:"text-style-context-menu",title:f.I18n.ts("Change text style")})}warnIfBrandedCondition(a){var b;const c=null===(b=this.uiRoot.getState().brandInDocument)||void 0===b?void 0:b.brandId;return null!=c&&null!=this.getState().brandkitTextStyleList.find((a)=>a.id===c)&&c!==a}createTextStyleList(){var a,b=this.getState();const c=(a,b,c)=>{const d=new k.SyncBrandKitAction((a)=>{l.avro.Avro.createDefaultLogger().logSelectPresentationFontScheme({presentation_font_scheme_id:b.id});
this.setState({selectedScheme:b});this.textStyleLogic.applyTextStyle(a,b)});null!=c&&d.addExtraCommand(c);this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:d,uat:a,session:this.session,condition:()=>this.warnIfBrandedCondition(b.id)},()=>this.getBrandKitPart())};b={id:"text-style-list",title:x.getTextStyleMenuItemAndSidebarTitle(),isPremium:this.uiRoot.getState().hasPremium,selectedSchemeId:null===(a=b.selectedScheme)||void 0===a?void 0:a.id,customSecton:{id:"custom-section",
title:f.I18n.ts("My Styles"),progress:b.customTextStyleDisplayProgress,items:b.customTextStyleList,showItemTitles:!0},brandKitSection:this.createBrandKitSectionData(this.uiRoot.getState()),presetSection:{id:"preset-section",title:f.I18n.ts("Default Styles"),progress:b.presetSchemeDisplayProgress,items:b.presetTextStyleList,showItemTitles:!1},templateSection:null!=b.templateTextStyle||b.templateDisplayProgress===e.ListProgress.working?{id:"preset-section",title:f.I18n.ts("Template Style"),progress:b.templateDisplayProgress,
items:[b.templateTextStyle],showItemTitles:!1}:null,unsavedItem:null!=b.selectedScheme&&b.selectedScheme.id===x.UnsavedId?b.selectedScheme:null,onApply:(a,b,e)=>{b=this.lookupTextStyle(b,e);null!=b&&c(a,b)},onEdit:(a,b,e)=>{const {hasPremium:d}=this.uiRoot.getState();if(d){const d=this.lookupTextStyle(b,e);null!==d&&c(a,d,(a)=>{this.setState({selectedScheme:d});l.avro.Avro.createDefaultLogger().logEditPresentationFontScheme({presentation_font_scheme_id:b});this.openSchemeCustomizer(n.SchemeCustomizerMode.Edit,
a)})}else this.common.openPaywallModal()},onCreateNew:()=>{var {hasPremium:a}=this.uiRoot.getState();if(a){var {selectedScheme:a}=this.getState();l.avro.Avro.createDefaultLogger().logAddPresentationFontScheme({presentation_font_scheme_id:null!=a?a.id:"new"});this.session.document.read((a)=>this.openSchemeCustomizer(n.SchemeCustomizerMode.Add,a))}else this.common.openPaywallModal()},onOpenPaywallModal:()=>{this.common.openPaywallModal()},onDeleteAll:()=>this.uiRoot.dialog.show("remove-all-text-style-dialog")};
return new p.StyleList(b,this.common)}openSchemeCustomizer(a,b){var {selectedScheme:c}=this.getState();if(null!=c){const d=a===n.SchemeCustomizerMode.Edit?Object.assign(Object.assign({},c),{id:c.isCustom?c.id:"",title:c.isCustom?c.title:""}):Object.assign(Object.assign({},c),{id:"",title:"",isCustom:!0});c=a===n.SchemeCustomizerMode.Edit?Object.assign({},c):null;this.uiRoot.setState({openedSidebar:"text-style-sidebar-id"});this.setState({schemeCustomizerMode:a,editedScheme:d,savedEditedScheme:c});
this.textStyleLogic.updateFontFamiliesUserSelected();this.textStyleLogic.updateFontFamiliesInScheme();this.textStyleLogic.updateFontFamiliesInDocument(b);this.uiRoot.sidebar.open("text-style-sidebar-id",J.TextStyleCustomizerPageId)}}lookupTextStyle(a,b){var c;const d=this.getState();switch(b){case p.ItemType.custom:return d.customTextStyleList.find((b)=>b.id===a);case p.ItemType.brandKit:return d.brandkitTextStyleList.find((b)=>b.id===a);case p.ItemType.preset:return d.presetTextStyleList.find((b)=>
b.id===a);case p.ItemType.unsaved:return null!=d.selectedScheme&&d.selectedScheme.id===x.UnsavedId&&a===x.UnsavedId?d.selectedScheme:null;case p.ItemType.template:return(null===(c=d.templateTextStyle)||void 0===c?void 0:c.id)===a?d.templateTextStyle:null}}createBrandKitSectionData(a){switch(a.brandkitSectionState){case "noBrandkitSection":return{kind:p.BrandKitSectionKind.none};case "sulInfoSection":return{kind:p.BrandKitSectionKind.sulInfo,title:f.I18n.ts("Brand text styles"),text:f.I18n.ts("Upgrade now and build a brand kit for your team and keep your text on-brand."),
trigger:"PRESENT_STYLE_TEXT"};case "infoSection":return{kind:p.BrandKitSectionKind.info,id:"branding-kit-section",title:f.I18n.ts("Brand text styles"),text:f.I18n.ts("To have branded text styles in your presentations, simply create a brand kit."),buttonColor:a.canEditBrandKit?e.ButtonColor.Blue:e.ButtonColor.Ghost,buttonText:a.canEditBrandKit?f.I18n.ts("Create brand kit"):f.I18n.ts("Learn more"),logFun:a.canEditBrandKit?()=>l.avro.Avro.createDefaultLogger().logClickedCreateBrandkitCta({create_brandkit_cta_trigger:"PRESENT_STYLE_TEXT"}):
null,state:a};case "brandkitSection":return 0<a.textStyleState.brandkitTextStyleList.length?{kind:p.BrandKitSectionKind.full,id:"branding-kit-section",title:f.I18n.ts("Team Library"),progress:a.textStyleState.customTextStyleDisplayProgress,items:a.textStyleState.brandkitTextStyleList,showItemTitles:!0}:{kind:p.BrandKitSectionKind.noBrand,id:"branding-kit-section",title:f.I18n.ts("Team Library"),progress:e.ListProgress.finished,items:[{id:"text-brand-not-set",title:"",thumbnailUrl:t.getResourceUrl("textstylenotset.svg")}],
showItemTitles:!1};default:w.Utils.assertNever(a.brandkitSectionState)}}updateCurrentPreziScheme(){return fa(this,void 0,void 0,function*(){const a=this.session.document.read((a)=>I.EditorCommander.createTextStyleCommander().getFontScheme(a.styleSheet));try{const b=yield this.textStyleProvider.convertFontSchemeToTextStyle(a,x.UnsavedId,x.UnsavedId,this.session);this.setState({currentPreziScheme:b})}catch(b){this.logger.warn({action:"get",object:"templateTextStyle",trigger:"error",payload:{error_message:b.message,
trace:b.stack}})}})}updateFontFamiliesBuiltIn(){var a=qa.getBuiltinFontDescriptionsOrderedByName();a=new Map(a.map((a)=>[a.fontFamily,a]));this.setState({fontFamiliesBuiltIn:a})}createConfirmDeleteAllDialog(a){a.dialog.large(()=>({id:"remove-all-text-style-dialog",title:"Delete all custom text styles?",content:[],footer:(a)=>[a.button({color:e.ButtonColor.Gray,content:{text:"No"},id:"delete-all-decline-button",onClick:()=>{this.uiRoot.dialog.hide("remove-all-text-style-dialog")}}),a.button({color:e.ButtonColor.Blue,
content:{text:"Yes"},id:"delete-all-confirm-button",onClick:()=>{this.uiRoot.dialog.hide("remove-all-text-style-dialog");this.deleteAllCustomTextStyles()}})]}))}deleteAllCustomTextStyles(){return fa(this,void 0,void 0,function*(){try{yield this.textStyleProvider.deleteAllCustomTextStyles()}catch(a){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with deleting your text styles."),f.I18n.ts("We\u2019re unable to delete your text styles at this time. Please try again."),"text_style_plugin_delete_scheme_failed")}this.textStyleLogic.loadSchemes()})}};
var F={};Object.defineProperty(F,"__esModule",{value:!0});var E;(function(a){a.notSpecified="notSpecified";a.paywall="paywall";a.noBrand="noBrand";a.full="full"})(E=F.BrandkitBehaviorKind||(F.BrandkitBehaviorKind={}));F.ApproveRevertDialogId="approve-revert-dialog-id";F.getDefaultBrandKitState=function(){return{brandkitBehaviorKind:E.notSpecified,brandKits:null,currentBrandKit:null,currentOnboardingStepId:null,brandKitsSeen:null,organizationId:null,logoThumbnails:[],notificationShown:!1,notificationEnabled:!1,
newBrandKitToApply:null}};class Aa{constructor(a,b,c,d,g,e){this.session=c;this.uiRoot=d;this.userSettings=g;this.brandKitRelatedParts=e;this.isOnboardingShown=!0;this.common=new k.Common(this.uiRoot);this.brandKitProvider=xa.BrandKitProviderModule.getBrandKitProvider(a);a.onLicenseChange((a)=>{if(v.isActive("js-present-editor-brandkit-enabled"))if(a.featureSet.brandKit){const d=c.document.read((a)=>a.brandKit);Promise.all([this.brandKitProvider.getBrandKitData(),this.brandKitProvider.isBrandkitDefinedForOtherPorducts(),
this.brandKitProvider.getOrganizationData()]).then(([c,g,e])=>{var h,f;if(null==c||0===c.length)e=this.canEditBrandKit(e,a),this.setState({brandkitBehaviorKind:E.noBrand}),b.send(A.shapeAndArcEditor,e?"canEditBrandKit":"canNotEditBrandKit"),b.send(A.textEditor,e?A.TextEditorMessage.canEditBrandKit:A.TextEditorMessage.canNotEditBrandKit),b.send(A.solidColor,e?"canEditBrandKit":"canNotEditBrandKit"),b.send(A.bracketFrame,e?"canEditBrandKit":"canNotEditBrandKit"),this.uiRoot.setState({brandkitSectionState:"infoSection",
isBrandKitDefinedForOtherProducts:g,possibleExternalBrandKitInDocument:!0,canEditBrandKit:e,isTeamAdmin:a.isAdmin,teamAdminEmail:0<a.admins.length?null===(h=a.admins[0])||void 0===h?void 0:h.email:""});else{const b=this.movePrimaryToTheBeginning(c),m=null===d||void 0===d?void 0:d.ownerId;c=null!=b.find((a)=>a.id===m);h=null===(f=a.organizationId)||void 0===f?void 0:f.toString();f=c&&h!==m;c=b[0];const G=this.isNotificationEnabled(a.featureSet.hasCoreLicense);this.setState({brandKits:b,brandkitBehaviorKind:E.full,
currentBrandKit:c,organizationId:h,notificationEnabled:G});this.uiRoot.setState({brandkitSectionState:"brandkitSection",possibleExternalBrandKitInDocument:f,isBrandKitDefinedForOtherProducts:g,canEditBrandKit:this.canEditBrandKit(e,a),isTeamAdmin:a.isAdmin});Object.values(this.brandKitRelatedParts).forEach((a)=>a.setBrandKit(b));this.showNotification();Promise.all(b.map((a)=>null!=a.logoImage?fetch(a.logoImage).then((a)=>a.blob()).then((a)=>this.blobToBase64(a)).then((b)=>({id:a.id,base64Url:b})):
null)).then((a)=>this.setState({logoThumbnails:a.filter((a)=>null!=a)}))}})}else{this.setState({brandkitBehaviorKind:E.paywall});const a=v.isActive("js-show-brand-kit-paywalls")?"sulInfoSection":"noBrandkitSection";this.uiRoot.setState({brandkitSectionState:a,possibleExternalBrandKitInDocument:!0})}else this.setState({brandkitBehaviorKind:E.notSpecified})});a.onDocumentChange(()=>{var a=this.getState().brandKits;if(null!=a&&0<a.length){const b=this.session.document.read((a)=>a.brandKit);a=null!=b?
a.find((a)=>a.id===b.brandId):null;null==a||null!=this.getState().currentBrandKit&&a.id===this.getState().currentBrandKit.id&&a.hash===this.getState().currentBrandKit.hash||this.setState({currentBrandKit:a})}});this.userSettings.getObject("brandkits_seen_present").then((a)=>{this.setState({brandKitsSeen:null!==a&&void 0!==a?a:[]});this.showNotification()})}canEditBrandKit(a,b){a=a.find((a)=>a.organizationId===b.organizationId);return b.isAdmin||null!=a&&a.enableBrandkitForMembers}movePrimaryToTheBeginning(a){const b=
a.findIndex((a)=>a.primary);return-1===b||0===b?a:[a[b],...a.slice(0,b),...a.slice(b+1)]}blobToBase64(a){return new Promise((b)=>{const c=new FileReader;c.onloadend=()=>b(c.result.toString());c.readAsDataURL(a)})}setBrandKitAction(a){this.brandKitAction=a}declareUI(a){this.createThemeMenuItem(a);this.createRevertDialog(a);this.createSidebar(a);this.createNotificationDialogs(a);v.isActive("js-unique-differentiation")||this.createOnboardingUi(a);this.createDevContextMenuItem(a)}isNotificationEnabled(a){return v.isActive("prezioption-pptcreate")||
a&&(!this.userSettings.getBoolean(W.UserSettingBooleanKeys.JS_EDITOR_CLASSIC_TO_NEXT_ONBOARDING_FOR_CLASSIC_SHOWN)||!this.userSettings.getBoolean(W.UserSettingBooleanKeys.JS_EDITOR_CLASSIC_TO_NEXT_ONBOARDING_FOR_NEXT_SHOWN))?!1:!0}showNotification(){const a=this.getState();if(!a.notificationShown&&a.notificationEnabled){var b=this.uiRoot.getState().brandInDocument;if(null!=a.brandKits&&null!=a.brandKitsSeen){const c=null!=b&&b.ownerId===a.organizationId;let d=this.manageBrandKitAvailableNotification(a.brandKits,
a.brandKitsSeen);d||(d=this.manageUpdateNotification(a.brandKits,b,c));d||this.manageNewBrandKitNotification(a.brandKits,a.brandKitsSeen);this.setState({notificationShown:!0})}}}manageUpdateNotification(a,b,c){if(!c)return!1;a=a.find((a)=>a.id===b.brandId);return null!=a&&a.hash!==b.hash?(this.uiRoot.dialog.show("notification-changed-brand-kit-dialog-id"),!0):!1}manageNewBrandKitNotification(a,b){const c=new Set(b.map((a)=>a.id));a=a.filter((a)=>!c.has(a.id));return 0<a.length?(this.updateNotification(b,
a),this.setState({newBrandKitToApply:a[a.length-1]}),this.uiRoot.dialog.show("new-brand-kit-dialog-id"),!0):!1}manageBrandKitAvailableNotification(a,b){return 0<a.length&&0===b.length?(this.updateNotification(b,a),this.uiRoot.dialog.show("notification-brand-kit-available-dialog-id"),!0):!1}updateNotification(a,b){const c=a.slice();b.forEach((b)=>{const d=a.findIndex((a)=>a.id===b.id);-1===d?c.push(b):c[d]=b});this.userSettings.setObject("brandkits_seen_present",c);this.setState({brandKitsSeen:c})}getState(){return this.uiRoot.getState().brandKitState}setState(a){const b=
this.getState();this.uiRoot.setState({brandKitState:Object.assign(Object.assign({},b),a)})}applyBrandKit(a,b){const c=this.brandKitRelatedParts.watermark.getApplyBrandKitAction(b.id),d=this.brandKitRelatedParts.colorStyle.getApplyBrandKitAction(b.id),g=this.brandKitRelatedParts.textStyle.getApplyBrandKitAction(b.id),e=new k.SyncBrandKitAction((a)=>{a.brandKit={brandId:b.id,hash:b.hash,ownerId:b.organizationId+""};this.setState({currentBrandKit:b});l.avro.Avro.createDefaultLogger().logAppliedBrandkit({brandkit_id:b.id,
organization_id:b.organizationId})});l.avro.Avro.createDefaultLogger().logApplyBrandkit({brandkit_id:b.id});c.doWithSync(a,this.session,[d,g,e])}setNextOnboardingStep(a){if(!this.isOnboardingShown){var b=this.getState().currentOnboardingStepId;switch(a){case "start":this.setState({currentOnboardingStepId:"StyleTabMenuButton"});this.uiRoot.spotlight.open("brand-kit-spotlight-id");break;case "styleButton":"StyleTabMenuButton"===b&&(this.setState({currentOnboardingStepId:"BrandKitButton"}),this.uiRoot.spotlight.open("brand-kit-spotlight-id"));
break;case "brandKitButton":"BrandKitButton"===b&&(this.setState({currentOnboardingStepId:null}),this.uiRoot.spotlight.close("brand-kit-spotlight-id"),this.userSettings.setBoolean(W.UserSettingBooleanKeys.BRANDKIT_ONBOARDING_SHOWN,!0))}}}createNotificationDialog(a,b){a.dialog.small((a)=>({id:b.id,align:e.DialogAlign.corner,title:b.title,hideOverlay:!0,content:[a.label(b.label)],footer:(a)=>[null!=b.button?a.button({color:e.ButtonColor.Blue,content:{text:b.button.text},id:b.id+"-ok",onClick:b.button.onClick}):
null,a.button({color:e.ButtonColor.Gray,content:{text:f.I18n.ts("Dismiss")},id:b.id+"-dismiss",onClick:()=>{this.uiRoot.dialog.hide(b.id)}})].filter((a)=>null!=a),onCloseButtonClicked:()=>{this.uiRoot.dialog.hide(b.id)}}))}createOnboardingUi(a){const b=this.getState().currentOnboardingStepId;if(null!=b){let c="";switch(b){case "StyleTabMenuButton":c="style";break;case "BrandKitButton":c="brandkit-apply";break;default:w.Utils.assertNever(b)}a.spotlight({id:"brand-kit-spotlight-id",overlay:null,highlights:[{around:{uiElementId:c},
shape:e.HoleShape.rounded,pulse:!0}]})}}createDevContextMenuItem(a){v.isActive("js-developer-features")&&a.createMenuItem({kind:e.MenuItemKind.context,title:"DEV: Reset brand kit in user settings",id:"context-menu-reset-user-settings-brand-kit",weight:9999,onClick:()=>{this.userSettings.setObject("brandkits_seen_present",[]);this.userSettings.setBoolean(W.UserSettingBooleanKeys.BRANDKIT_ONBOARDING_SHOWN,!1)}})}createNotificationDialogs(a){this.createNewBrandKitNotificationDialog(a);this.createNotificationDialog(a,
{id:"notification-brand-kit-available-dialog-id",title:f.I18n.ts("Brand kit available"),label:f.I18n.ts("Teams brand kit has been published and can be applied to project now."),button:{text:f.I18n.ts("OK"),onClick:()=>{this.uiRoot.dialog.hide("notification-brand-kit-available-dialog-id");this.setNextOnboardingStep("start")}}});this.createNotificationDialog(a,{id:"notification-changed-brand-kit-dialog-id",title:f.I18n.ts("Brand kit has been updated"),label:f.I18n.ts("There are updates in the branding kit used in this project. Do you want to update?"),
button:{text:f.I18n.ts("Update"),onClick:(a)=>{const b=this.getState().brandKits.find((a)=>a.id===this.uiRoot.getState().brandInDocument.brandId);null!=b&&this.applyBrandKit(a,b);this.uiRoot.dialog.hide("notification-changed-brand-kit-dialog-id")}}})}createNewBrandKitNotificationDialog(a){const b=this.getState().newBrandKitToApply;if(null!=b){var c=this.brandKitRelatedParts.colorStyle.getThumbnailData(b.id),d=this.brandKitRelatedParts.textStyle.getThumbnailData(b.id),g=this.brandKitRelatedParts.watermark.getThumbnailData(b.id),
h=this.createApplyDialogText(c,d,g);this.createBrandKitDialog(a,{id:"new-brand-kit-dialog-id",title:f.I18n.ts("New brand kit available"),brandKitName:b.name,okColor:e.ButtonColor.Blue,okText:f.I18n.ts("See brand kit"),cancelText:f.I18n.ts("Cancel"),onOk:()=>{this.common.openSidebar("brand-kit-sidebar-id");this.uiRoot.dialog.hide("new-brand-kit-dialog-id")},colorThumb:c,textThumb:d,watermarkThumb:g,dialogText:h})}}createApplyDialogText(a,b,c){a=!a.isPlaceholder;b=!b.isPlaceholder;c=!c.isPlaceholder;
if(a&&b&&c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s color, text styles and logo.");if(a&&b&&!c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s color and text styles.");if(a&&!b&&c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s color and logo.");if(!a&&b&&c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s text styles and logo.");if(!a||b||c){if(!a&&b&&!c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s text styles.");
if(!a&&!b&&c)return f.I18n.ts("Applying a brand kit will change your presentation\u2019s logo.")}else return f.I18n.ts("Applying a brand kit will change your presentation\u2019s color.");return""}createRevertDialog(a){const b=this.getState().currentBrandKit;null!=b&&this.createBrandKitDialog(a,{id:F.ApproveRevertDialogId,title:f.I18n.ts("Brand Kit"),brandKitName:b.name,okColor:e.ButtonColor.Red,okText:f.I18n.ts("Yes, remove brand kit"),cancelText:f.I18n.ts("No, cancel"),onOk:(a)=>{null!=this.brandKitAction&&
(this.brandKitAction.addExtraCommand((a)=>a.brandKit=null),this.brandKitAction.do(a,this.session));this.uiRoot.dialog.hide(F.ApproveRevertDialogId)},colorThumb:this.brandKitRelatedParts.colorStyle.getThumbnailData(b.id),textThumb:this.brandKitRelatedParts.textStyle.getThumbnailData(b.id),watermarkThumb:this.brandKitRelatedParts.watermark.getThumbnailData(b.id),dialogText:f.I18n.ts("Do you want to remove the current brand kit and use the default template style?")})}createBrandKitDialog(a,b){a.dialog.medium((a)=>
({id:b.id,title:b.title,onCloseButtonClicked:()=>this.uiRoot.dialog.hide(b.id),content:[a.paragraph(b.brandKitName,[""]),a.simpleList((a)=>({items:[a.image({title:f.I18n.ts("Logo"),src:{url:b.watermarkThumb.url}}),a.image({title:z.getColorStyleMenuItemAndSidebarTitle(),src:{url:b.colorThumb.url}}),a.image({title:x.getTextStyleMenuItemAndSidebarTitle(),src:{url:b.textThumb.url}})],itemLayout:e.ListItemLayout.fixed,itemType:e.ListItemType.large,showTitle:!0,progress:e.ListProgress.finished,activeId:null})),
null!=b.dialogText?a.label(b.dialogText):null].filter((a)=>null!=a),footer:(a)=>[a.button({id:"brandkit-dialog-apply",color:b.okColor,content:{text:b.okText},onClick:b.onOk}),a.button({id:"brandkit-dialog-cancel",color:e.ButtonColor.Gray,content:{text:b.cancelText},onClick:()=>{this.uiRoot.dialog.hide(b.id)}})]}))}createThemeMenuItem(a){const b=this.getState().brandkitBehaviorKind;b!==E.notSpecified&&a.createTopMenuItem(e.TopMenuId.Style,{id:"topmenu-theme-item-brandkit",kind:e.MenuItemKind.largeButton,
enabled:!0,categoryWeight:1,weight:5.1,title:f.I18n.ts("Brand kit"),icon:e.IconSmallId.BrandKit,onClick:(a)=>{l.avro.Avro.createDefaultLogger().logClickTabMenuItem({tab_menu_item:"BRAND_KIT"});this.onClickMenuItem(b,a)}})}onClickMenuItem(a){switch(a){case E.paywall:window.open("/branding/","_blank");break;case E.noBrand:this.common.openSidebar("brand-kit-sidebar-id");break;case E.full:this.setNextOnboardingStep("brandKitButton");this.common.openSidebar("brand-kit-sidebar-id");break;default:w.Utils.assertNever(a)}}createSidebar(a){const b=
this.getState();a.createSidebar("brand-kit-sidebar-id",(a)=>{var c;let g=[];if(b.brandkitBehaviorKind===E.noBrand)g=this.common.createNoBrandSection(a,this.uiRoot.getState(),"PRESENT_BRANDKIT_SIDEBAR");else if(b.brandkitBehaviorKind===E.full&&null!=b.brandKits&&0<b.brandKits.length){const d=`brandkitlistitem-${null===(c=this.uiRoot.getState().brandInDocument)||void 0===c?void 0:c.brandId}`;g=[a.simpleList((a)=>({activeId:d,id:"brand-kit-sidebar-id",items:b.brandKits.map((b)=>this.createBrandKitItem(a,
b,d)),itemType:e.ListItemType.full,itemLayout:e.ListItemLayout.dynamic,showTitle:!0,multilineTitle:!1,progress:e.ListProgress.finished}))]}return{root:{title:f.I18n.ts("Brand kit"),content:g}}})}createBrandKitItem(a,b,c){var d;const g=this.brandKitRelatedParts.colorStyle.getColorsForThumbnail(b.id),e=this.brandKitRelatedParts.textStyle.getThumbnailData(b.id),m=null===(d=this.getState().logoThumbnails.find((a)=>a.id===b.id))||void 0===d?void 0:d.base64Url;d=`brandkitlistitem-${b.id}`;return a.image({id:d,
dataLookup:d===c?d+"-selected":d,src:{url:w.Utils.svgToUrl(this.createUnifiedThumbnailUrl(g,e,m))},title:b.name,titlePostfix:b.primary?f.I18n.ts("(Primary)"):null,onClick:(a)=>this.applyBrandKit(a,b)})}createUnifiedThumbnailUrl(a,b,c){c=null!=c?`<image id="image0" x="32" y="28" width="48" height="48" xlink:href="${c}"/>`:'<text x="23" y="54" class="text">No logo added</text>';b=b.isPlaceholder?'<text x="126" y="54" class="text">Text styles not set</text>':`<image id="font0" x="124" y="9" width="90" height="90" xlink:href="${b.url}"/>`;
a=null!=a?`<rect x="0" y="102" width="32" height="23" fill="${a.backgroundColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="32" y="102" width="32" height="23" fill="${a.topicAColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="64" y="102" width="32" height="23" fill="${a.topicBColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="96" y="102" width="32" height="23" fill="${a.borderColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="128" y="102" width="32" height="23" fill="${a.extraColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="160" y="102" width="32" height="23" fill="${a.primaryTextColor.getRGBAString()}" stroke="#DFE1E4"/>
				<rect x="192" y="102" width="32" height="23" fill="${a.secondaryTextColor.getRGBAString()}" stroke="#DFE1E4"/>`:'<text x="80" y="118" class="text">Colors not set</text>';return`<svg width="224" height="126" viewBox="0 0 224 126" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
		<style>
			@font-face {
				font-family: RalewayRegular;
				src: url(//assets1.prezicdn.net/common/fonts/raleway-regular.woff);
			}
			.text {font: normal 11px RalewayRegular, Helvetica, sans-serif; fill: #374050}
		</style>
		<rect x="1" y="1" width="224" height="126" fill="#F6F7F9"/>

		<rect x="3" y="9" width="109" height="97" fill="#F6F7F9"/>
		<rect x="112" y="1" width="109" height="102" fill="#ffffff"/>
		${c}
		${b}
		${a}
		</svg>`}}F.BrandKitPart=Aa;var k={};Object.defineProperty(k,"__esModule",{value:!0});(function(a){a.ok="ok";a.error="error"})(k.ResultStatus||(k.ResultStatus={}));var ha;(function(a){a.api="api";a.token="token"})(ha=k.WarnActionKind||(k.WarnActionKind={}));class ia{constructor(){this.extraCommands=[]}addExtraCommand(a){this.extraCommands.push(a)}}k.BrandKitAction=ia;class Ba extends ia{constructor(a){super();this.commandFun=a}do(a,b){b.document.executeApiCommand(a,{name:"apply-brand-change",run:(a)=>
this.doWithApi(a)})}doWithApi(a){this.commandFun(a);this.extraCommands.forEach((b)=>b(a))}}k.SyncBrandKitAction=Ba;class ra extends ia{constructor(a,b,c){super();this.getPromise=a;this.fun=b;this.commandFun=c}do(a,b){a.doAsync(this.getPromise(),(a,d)=>{if(a.isValid()){const c=this.fun(d);b.document.executeApiCommand(a,{name:"apply-brand-change",run:(a)=>{c&&this.commandFun(a,d);this.extraCommands.forEach((b)=>b(a))}})}})}doWithSync(a,b,c){const d=new ra(()=>this.getPromise(),(a)=>this.fun(a),(a,b)=>
this.commandFun(a,b));c.forEach((a)=>d.addExtraCommand(a.commandFun));d.do(a,b)}}k.AsyncBrandKitAction=ra;class ja{constructor(a){this.uiRoot=a}openPaywallModal(){this.uiRoot.dialog.showBuiltIn(e.BuiltinDialog.upgradeLicenseScheme)}openSidebar(a){this.uiRoot.sidebar.open(a);this.uiRoot.setState({openedSidebar:a})}closeSidebar(a){this.uiRoot.sidebar.close(a);this.uiRoot.setState({openedSidebar:null})}toggleSidebar(a){this.uiRoot.getState().openedSidebar===a?this.closeSidebar(a):this.openSidebar(a)}createNoBrandSection(a,
b,c){if(b.isBrandKitDefinedForOtherProducts){var d=f.I18n.ts("Prezi Present is not set up in your brand kit");if(b.isTeamAdmin||b.canEditBrandKit)return b=f.I18n.ts("Please use the brand kit editor to set up brand colors for Prezi Present."),d={title:d,text:b,extraLabel:null,buttonData:{text:f.I18n.ts("Create brand kit"),href:"/branding/",color:e.ButtonColor.Blue,logFun:()=>l.avro.Avro.createDefaultLogger().logClickedCreateBrandkitCta({create_brandkit_cta_trigger:c})}},this.createNoBrandSidebarContent(a,
d);b=f.I18n.tsFormatKeys("Please contact your admin at {email} to set up branding for Prezi Present.",{email:b.teamAdminEmail});return this.createNoBrandSidebarContent(a,{title:d,text:b,extraLabel:null,buttonData:null})}d=f.I18n.ts("You don\u2019t have brand kits");if(b.isTeamAdmin)return b=f.I18n.ts("As the admin of your team, you can create customized brand kits with your logo, fonts, and colors."),d={title:d,text:b,extraLabel:null,buttonData:{text:f.I18n.ts("Create brand kit"),href:"/branding/",
color:e.ButtonColor.Blue,logFun:()=>l.avro.Avro.createDefaultLogger().logClickedCreateBrandkitCta({create_brandkit_cta_trigger:c})}},this.createNoBrandSidebarContent(a,d);if(b.canEditBrandKit)return b=f.I18n.ts("Build a customized brand kit not only with your company colors, but also fonts and logo."),d={title:d,text:b,extraLabel:null,buttonData:{text:f.I18n.ts("Create brand kit"),href:"/branding/",color:e.ButtonColor.Blue,logFun:()=>l.avro.Avro.createDefaultLogger().logClickedCreateBrandkitCta({create_brandkit_cta_trigger:c})}},
this.createNoBrandSidebarContent(a,d);{const c=f.I18n.ts("Brand kits with your logo, fonts, and colors will appear here.");b=f.I18n.tsFormatKeys("Contact your admin at {email} to create a brand kit.",{email:b.teamAdminEmail});return this.createNoBrandSidebarContent(a,{title:d,text:c,extraLabel:b,buttonData:null})}}createNoBrandSidebarContent(a,b){const c=[];null!=b.title&&c.push(a.sectionHeader({content:b.title}));null!=b.text&&c.push(a.label(b.text,!0));null!=b.extraLabel&&c.push(a.label(b.extraLabel,
!0));null!=b.buttonData&&c.push(a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[a.button({color:b.buttonData.color,flexibleWidth:!0,id:"sidebar-learn-more-brand-kit",content:{text:b.buttonData.text},onClick:()=>{null!=b.buttonData.logFun&&b.buttonData.logFun();window.open(b.buttonData.href,"_blank")}})]));return c}manageBrandRelatedChange(a,b){const c=(a)=>{switch(a.kind){case ha.token:a.action.do(a.uat,a.session);break;case ha.api:a.action.doWithApi(a.api);break;default:w.Utils.assertNever(a)}},
d=this.uiRoot.getState();d.possibleExternalBrandKitInDocument?(null!==d.brandInDocument&&a.action.addExtraCommand((a)=>a.brandKit=null),c(a)):a.condition()?(b().setBrandKitAction(a.action),this.uiRoot.dialog.show(F.ApproveRevertDialogId)):c(a)}static getColorFromRGB(a,b,c){return wa.Geometry.colorFromRGB(a/255,b/255,c/255)}static areColorStylesEqual(a,b){return null==a&&null==b?!0:null==a||null==b?!1:ja.serializeColorScheme(a)===ja.serializeColorScheme(b)}static createUniqTitle(a,b){let c=2,d=a;for(;b.some((a)=>
a.title===d);)d=`${a} ${c}`,++c;return d}static serializeColorScheme(a){return JSON.stringify({colorScheme:{backgroundColor:a.colorScheme.backgroundColor.getRGBString(),topicAColor:a.colorScheme.topicAColor.getRGBString(),topicBColor:a.colorScheme.topicBColor.getRGBString(),borderColor:a.colorScheme.borderColor.getRGBString(),extraColor:a.colorScheme.extraColor.getRGBString(),primaryTextColor:a.colorScheme.primaryTextColor.getRGBString(),secondaryTextColor:a.colorScheme.secondaryTextColor.getRGBString()},
fontScheme:null})}}k.Common=ja;var T={},Ca=this&&T.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,g){function f(a){try{m(d.next(a))}catch(q){g(q)}}function h(a){try{m(d["throw"](a))}catch(q){g(q)}}function m(a){a.done?c(a.value):e(a.value).then(f,h)}m((d=d.apply(a,b||[])).next())})};Object.defineProperty(T,"__esModule",{value:!0});T.ColorStyleLogic=class{constructor(a,b,c,d){this.applicationApi=a;this.uiRoot=b;this.session=
c;this.colorStyleStateHelper=d;this.styleSchemeProvider=ca.StyleSchemeProviderModule.getStyleSchemeProvider(this.applicationApi)}loadSchemes(){return Ca(this,void 0,void 0,function*(){const {customSchemeDisplayProgress:a}=this.colorStyleStateHelper.getState(),{hasPremium:b,isNetworkOffline:c}=this.uiRoot.getState(),d=this.styleSchemeProvider.getPresetStyleSchemes();if(b&&!c){this.colorStyleStateHelper.setState({customSchemeDisplayProgress:e.ListProgress.working});let a;try{a=yield this.styleSchemeProvider.getCustomStyleSchemes()}catch(h){a=
[],this.showErrorLoadSchemes()}this.colorStyleStateHelper.setState({presetSchemeList:d,customSchemeList:a,customSchemeDisplayProgress:e.ListProgress.finished,customSchemeIsSuccesfullyLoaded:!0})}else this.colorStyleStateHelper.setState({presetSchemeList:d,customSchemeDisplayProgress:c?e.ListProgress.finished:a});this.updateSelectionAndUnsavedItem()})}updateSelectionAndUnsavedItem(){const {currentPreziScheme:a}=this.colorStyleStateHelper.getState();if(this.allSchemeLoaded()&&null!=a){const b=this.findFirstMatchingScheme(a),
c=null==b?this.removeSchemeIdAndTitle(a):null;this.colorStyleStateHelper.setState({unsavedStyleScheme:c,selectedScheme:null!=b?b:c,currentThumbnailUrl:a.thumbnailUrl})}}allSchemeLoaded(){const {isNetworkOffline:a}=this.uiRoot.getState(),{customSchemeDisplayProgress:b,presetSchemeList:c,template:d}=this.colorStyleStateHelper.getState();return(a||b===e.ListProgress.finished)&&0<c.length&&(d.kind===z.TemplateKind.Loaded||d.kind===z.TemplateKind.Missing)}removeSchemeIdAndTitle(a){const {colorScheme:b,
fontScheme:c,thumbnailUrl:d}=a;return{id:"",title:"",isCustom:!0,colorScheme:b,fontScheme:c,thumbnailUrl:d}}findFirstMatchingScheme(a){const {customSchemeList:b,presetSchemeList:c,brandkitSchemeList:d,template:e}=this.colorStyleStateHelper.getState(),f=[...b,...c,...d,e.kind===z.TemplateKind.Loaded?e.colors:null];let m=f.find((b)=>null!=b&&b.id===a.id);m=k.Common.areColorStylesEqual(m,a)?m:null;null==m&&(m=f.filter((a)=>null!=a).find((b)=>k.Common.areColorStylesEqual(a,b)));return m}applyScheme(a,
b){var c=this.styleSchemeProvider.createColorPaletteFromStyleScheme(b);const d=I.EditorCommander.createColorMixCommander();c=d.createMapping(c);d.applyPalette(a,this.session.document.progressiveAssetManager,c,b.id,null)}showErrorLoadSchemes(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with loading your colors."),f.I18n.ts("We\u2019re unable to load your colors at this time. Please try again."),"scheme_plugin_load_schemes_failed")}};var H={},M=this&&H.__awaiter||function(a,
b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,g){function f(a){try{m(d.next(a))}catch(q){g(q)}}function h(a){try{m(d["throw"](a))}catch(q){g(q)}}function m(a){a.done?c(a.value):e(a.value).then(f,h)}m((d=d.apply(a,b||[])).next())})};Object.defineProperty(H,"__esModule",{value:!0});H.ColorCustomizerPageId="color-customizer-page";const sa=f.I18n.ts("Untitled colors"),Da=f.I18n.ts("Untitled colors");H.ColorStyleSchemeCustomizer=class{constructor(a,
b,c,d,e){this.applicationApi=a;this.uiRoot=b;this.session=c;this.colorStyleStateHelper=d;this.getBrandKitPart=e;this.common=new k.Common(this.uiRoot);this.colorStyleLogic=new T.ColorStyleLogic(a,b,c,d);this.styleSchemeProvider=ca.StyleSchemeProviderModule.getStyleSchemeProvider(this.applicationApi)}createPage(a,b){return null===b?{}:{[H.ColorCustomizerPageId]:this.createPageContent(a,b)}}createPageContent(a,b){const {hasPremium:c}=this.uiRoot.getState(),d=[];c||d.push(...[a.sectionHeader({content:f.I18n.ts("Ready to unlock more features?")}),
a.label(f.I18n.ts("Get access to advanced color editing and much more by upgrading your Prezi license.")),a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[a.button({color:e.ButtonColor.Blue,id:"style-scheme-customizer-upgrade-button",content:{text:f.I18n.ts("Upgrade now")},onClick:()=>{this.common.openPaywallModal()}})]),a.separator()]);d.push(...[a.sectionHeader({content:f.I18n.ts("Name")}),this.createTitleInput(a,b),a.separator(),a.sectionHeader({content:f.I18n.ts("Create palette from:")}),
this.createFromLogoButton(a),this.createFromBackgroundButton(a),a.separator(),this.createColorPicker(a,b.colorScheme.backgroundColor,0,v.isActive("js-force-colors-sidebar")?f.I18n.tsFormatKeys("Color {index}",{index:1}):f.I18n.tsFormatKeys("Color {index} (background)",{index:1})),this.createColorPicker(a,b.colorScheme.topicAColor,1,v.isActive("js-force-colors-sidebar")?f.I18n.tsFormatKeys("Color {index}",{index:2}):f.I18n.tsFormatKeys("Color {index} (topics)",{index:2})),this.createColorPicker(a,
b.colorScheme.topicBColor,2,v.isActive("js-force-colors-sidebar")?f.I18n.tsFormatKeys("Color {index}",{index:3}):f.I18n.tsFormatKeys("Color {index} (subtopics)",{index:3})),this.createColorPicker(a,b.colorScheme.borderColor,3,v.isActive("js-force-colors-sidebar")?f.I18n.tsFormatKeys("Color {index}",{index:4}):f.I18n.tsFormatKeys("Color {index} (border)",{index:4})),this.createColorPicker(a,b.colorScheme.extraColor,4,v.isActive("js-force-colors-sidebar")?f.I18n.tsFormatKeys("Color {index}",{index:5}):
f.I18n.tsFormatKeys("Color {index} (accent)",{index:5})),a.separator(),this.createColorPicker(a,b.colorScheme.primaryTextColor,5,f.I18n.ts("Primary text color")),this.createColorPicker(a,b.colorScheme.secondaryTextColor,6,f.I18n.ts("Secondary text color")),...this.createCrossLinkToTextSidebar(a)]);return{title:z.getColorStyleMenuItemAndSidebarTitle(),content:d,footer:[this.createButtonSection(a)]}}createButtonSection(a){const {hasPremium:b}=this.uiRoot.getState();return a.button(e.ButtonSize.Large,
e.ButtonAlign.Center,(a)=>[a.button({color:e.ButtonColor.Blue,id:"style-scheme-customizer-save-button",content:{text:f.I18n.ts("Save")},disabled:!this.isSaveSchemeButtonEnabled(),onClick:()=>M(this,void 0,void 0,function*(){b?(l.avro.Avro.createDefaultLogger().logSavePresentationColorScheme({presentation_color_scheme_id:this.colorStyleStateHelper.getState().editedScheme.id}),yield this.saveEditedSchemeAndReloadList()):this.common.openPaywallModal()})}),a.button({color:e.ButtonColor.Gray,id:"style-scheme-customizer-copy-button",
content:{icon:e.IconSmallId.Copy},disabled:!this.isCopyButtonEnabled(),onClick:()=>M(this,void 0,void 0,function*(){b?yield this.saveCopyAndReloadList():this.common.openPaywallModal()}),tooltipText:f.I18n.ts("Make a copy"),tooltipPosition:"top"}),a.button({color:e.ButtonColor.Gray,id:"style-scheme-customizer-delete-button",content:{icon:e.IconSmallId.Trash},disabled:!this.isDeleteSchemeButtonEnabled(),onClick:()=>M(this,void 0,void 0,function*(){b?(l.avro.Avro.createDefaultLogger().logDeletePresentationColorScheme({presentation_color_scheme_id:this.colorStyleStateHelper.getState().editedScheme.id}),
yield this.deleteEditedSchemeAndReturnToRoot()):this.common.openPaywallModal()}),tooltipText:f.I18n.ts("Delete"),tooltipPosition:"top"})])}createTitleInput(a,b){const {hasPremium:c}=this.uiRoot.getState(),d=this.checkTitleError();return a.inputField({id:"style-scheme-customizer-name-input",placeholderText:Da,value:b.title,disabled:!1,maxLength:26,autofocus:!0,onValueChange:(a,b)=>{c?this.colorStyleStateHelper.setState({editedScheme:Object.assign(Object.assign({},this.colorStyleStateHelper.getState().editedScheme),
{title:b})}):this.common.openPaywallModal()},errorText:d.status===k.ResultStatus.error?d.error.msg:null})}createColorPicker(a,b,c,d){const e=this.uiRoot.getState();b=b.getRGBData();return a.colorPicker({id:`style-scheme-customizer-color-picker-${c}`,label:d,fills:{solidFill:{fillKind:r.base.FillKind.solid,color:{r:b.r,g:b.g,b:b.b,a:1}},current:r.base.FillKind.solid,hasAlpha:!1},showThemeColors:!1,showColorWheel:!0,onShowPopup:()=>{if(e.hasPremium)return!0;this.common.openPaywallModal();return!1},
onChange:(a,b)=>{var {hasPremium:d}=this.uiRoot.getState();const e=this.colorStyleStateHelper.getState();b.isFinal&&null!==e.editedScheme&&d&&(d=new k.SyncBrandKitAction((a)=>this.updateSchemeColor(a,b.newFill.color,c)),this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:d,uat:a,session:this.session,condition:()=>this.warnApplyBrandKitCondition()},()=>this.getBrandKitPart()))}})}warnApplyBrandKitCondition(){var {brandInDocument:a}=this.uiRoot.getState();const {selectedScheme:b}=
this.colorStyleStateHelper.getState();a=null===a||void 0===a?void 0:a.brandId;return null!=a&&a===b.id}createFromLogoButton(a){const {hasPremium:b}=this.uiRoot.getState();return a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[b?a.upload({color:e.ButtonColor.Gray,id:"from-logo-file",content:{text:f.I18n.ts("Logo")},fileFilter:{allowImage:!0},onClick:()=>{l.avro.Avro.createDefaultLogger().logStartSetFromLogo()},onFileSelected:(a,{file:b})=>{l.avro.Avro.createDefaultLogger().logCreatePresentationColorSchemeFromLogo();
this.updateSchemeColorsFromImage(a,()=>this.getEditedSchemeColorsFromLogoImagePromise(b).catch((a)=>{if("error"===a.status)switch(a.error){case "color_thief_error":return this.showErrorColorThief(),a;case "image_io_error":return this.showErrorUnsupportedImage("scheme_plugin_from_logo_failed"),a}}))}}):a.button({color:e.ButtonColor.Gray,id:"from-logo-file",content:{text:f.I18n.ts("Logo")},onClick:()=>{this.common.openPaywallModal()}})])}createFromBackgroundButton(a){return a.button(e.ButtonSize.Large,
e.ButtonAlign.Start,(a)=>[a.button({id:"from-logo-background-image-button",color:e.ButtonColor.Gray,content:{text:f.I18n.ts("Background image")},disabled:!this.colorStyleStateHelper.getState().preziHasBackground,onClick:(a)=>{this.uiRoot.getState().hasPremium?(l.avro.Avro.createDefaultLogger().logCreatePresentationColorSchemeFromBackground(),this.updateSchemeColorsFromImage(a,()=>this.getEditedSchemeColorsFromBackgroundImagePromise(a).catch((a)=>{if("error"===a.status)switch(a.error){case "color_thief_error":return this.showErrorColorThief(),
a;case "image_io_error":return this.showErrorUnsupportedImage("scheme_plugin_from_background_failed"),a}}))):this.common.openPaywallModal()}})])}createCrossLinkToTextSidebar(a){return[a.separator(),a.infoMessage(f.I18n.ts("Looking to customize the font and formatting of your text?")),a.button(e.ButtonSize.Small,e.ButtonAlign.End,(a)=>[a.button({color:e.ButtonColor.Gray,id:"crosslink-to-fonts-sidebar",content:{text:f.I18n.ts("Set text styles")},onClick:()=>{this.common.openSidebar("text-style-sidebar-id")}})])]}updateSchemeColor(a,
b,c){const {r:d,g:e,b:f}=b;b=k.Common.getColorFromRGB(d,e,f);var m={presentation_color_scheme_id:this.colorStyleStateHelper.getState().editedScheme.id,colorscheme_attrib_name:"SCHEME_COLOR_ONE SCHEME_COLOR_TWO SCHEME_COLOR_THREE SCHEME_COLOR_FOUR SCHEME_COLOR_FIVE TEXT_COLOR_PRIMARY TEXT_COLOR_SECONDARY".split(" ")[c],color_hexcode:b.getRGBAString()};5===c||6===c?l.avro.Avro.createDefaultLogger().logSetPresentationTextColor(m):l.avro.Avro.createDefaultLogger().logSetPresentationColor(m);m=Array(7).fill(null);
m[c]=b;this.updateEditedSchemeColors(a,m)}isSaveSchemeButtonEnabled(){const {savedEditedScheme:a,editedScheme:b,schemeCustomizerMode:c}=this.colorStyleStateHelper.getState();if(this.uiRoot.getState().isNetworkOffline)return!1;switch(c){case n.SchemeCustomizerMode.Add:return this.checkTitleError().status===k.ResultStatus.ok;case n.SchemeCustomizerMode.Edit:return this.checkTitleError().status===k.ResultStatus.ok&&(b.title!==a.title||!k.Common.areColorStylesEqual(a,b));default:return!1}}checkTitleError(){const {savedEditedScheme:a,
editedScheme:b,schemeCustomizerMode:c}=this.colorStyleStateHelper.getState();return b.title&&0!==b.title.length?c===n.SchemeCustomizerMode.Add&&this.colorStyleStateHelper.getState().customSchemeList.some((a)=>a.title===b.title)||c===n.SchemeCustomizerMode.Edit&&b.title!==a.title&&this.colorStyleStateHelper.getState().customSchemeList.some((a)=>a.title===b.title)?{status:k.ResultStatus.error,error:{msg:f.I18n.ts("Name already used")}}:{status:k.ResultStatus.ok,value:{}}:{status:k.ResultStatus.ok,value:{}}}isSchemeTitleUnique(a){return!this.colorStyleStateHelper.getState().customSchemeList.some((b)=>
b.title===a)}updateSchemeColorsFromImage(a,b){b=new k.AsyncBrandKitAction(b,(a)=>"ok"===a.status,(a,b)=>{"ok"===b.status&&(b=b.value.map(({r:a,g:b,b:c})=>k.Common.getColorFromRGB(a,b,c)),this.updateEditedSchemeColors(a,b))});this.common.manageBrandRelatedChange({action:b,kind:k.WarnActionKind.token,uat:a,session:this.session,condition:()=>this.warnApplyBrandKitCondition()},()=>this.getBrandKitPart())}getEditedSchemeColorsFromBackgroundImagePromise(){return this.session.document.read((a)=>{var b;a=
null===(b=a.background.layers[0])||void 0===b?void 0:b.asset;return null!=a&&a.kind!==r.base.AssetKind.swf?(b=this.session.document.progressiveAssetManager.rewriteUrl(a.url),this.stealColorFromImage(b)):Promise.reject({status:k.ResultStatus.error,error:{msg:"general_error"}})})}getEditedSchemeColorsFromLogoImagePromise(a){return(new Promise((b)=>{const c=new FileReader;c.onload=()=>{b(c.result)};c.readAsDataURL(a)})).then((a)=>this.stealColorFromImage(a))}openRootPage(){this.colorStyleStateHelper.setState({schemeCustomizerMode:n.SchemeCustomizerMode.None,
editedScheme:null,savedEditedScheme:null});this.common.openSidebar("color-style-sidebar-id")}showErrorColorThief(){this.uiRoot.dialog.showError(f.I18n.ts("Unable to create palette"),f.I18n.ts("We couldn\u2019t detect enough colors to create a palette. Please try again with a different image file."),"scheme_plugin_palette_failed")}showErrorSaveScheme(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with saving your colors."),f.I18n.ts("We\u2019re unable to save your colors at this time. Please try again."),
"scheme_plugin_save_scheme_failed")}showErrorUnsupportedImage(a){this.uiRoot.dialog.showError(f.I18n.ts("Unsupported file type"),f.I18n.ts("Please try again with a supported image file"),a)}showErrorDeleteScheme(){this.uiRoot.dialog.showError(f.I18n.ts("Looks like there\u2019s an issue with deleting your colors."),f.I18n.ts("We\u2019re unable to delete your colors at this time. Please try again."),"scheme_plugin_delete_scheme_failed")}stealColorFromImage(a){return new Promise((b,c)=>{const d=new Image;
d.crossOrigin="anonymous";d.onload=(a)=>{a=va.ColorThiefTool.getPalette(a.currentTarget,5,1);a=this.processColorThiefPalette(a);null==a?c({status:k.ResultStatus.error,error:"color_thief_error"}):(a=a.map((a)=>({r:Math.min(255,a[0]),g:Math.min(255,a[1]),b:Math.min(255,a[2]),a:1})),b({status:k.ResultStatus.ok,value:a}))};d.onerror=()=>{c({status:k.ResultStatus.error,error:"image_io_error"})};d.src=a})}processColorThiefPalette(a){if(null==a)return null;const b=this.getUniqueColors(a);return 2>b.length?
null:Array(5).fill(null).map((a,d)=>b[d%b.length])}getUniqueColors(a){return a.filter((b,c)=>a.findIndex((a)=>this.areColorsSimilar(b,a))===c)}areColorsSimilar(a,b){return 30>Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])}isCopyButtonEnabled(){const a=this.uiRoot.getState();return!a.isNetworkOffline&&a.colorStyleState.schemeCustomizerMode!==n.SchemeCustomizerMode.Add}isDeleteSchemeButtonEnabled(){const a=this.uiRoot.getState();return a.isNetworkOffline?!1:a.colorStyleState.schemeCustomizerMode===
n.SchemeCustomizerMode.Edit&&a.colorStyleState.selectedScheme.isCustom}updateEditedSchemeColors(a,b){var c=this.uiRoot.getState();const d=c.colorStyleState.editedScheme.colorScheme;b={backgroundColor:null!=b[0]?b[0]:d.backgroundColor,topicAColor:null!=b[1]?b[1]:d.topicAColor,topicBColor:null!=b[2]?b[2]:d.topicBColor,borderColor:null!=b[3]?b[3]:d.borderColor,extraColor:null!=b[4]?b[4]:d.extraColor,primaryTextColor:null!=b[5]?b[5]:d.primaryTextColor,secondaryTextColor:null!=b[6]?b[6]:d.secondaryTextColor};
c=Object.assign(Object.assign({},c.colorStyleState.editedScheme),{colorScheme:b});this.colorStyleStateHelper.setState({editedScheme:c});this.colorStyleLogic.applyScheme(a,c)}saveEditedSchemeAndReloadList(){return M(this,void 0,void 0,function*(){const a=this.uiRoot.getState();null!==a.colorStyleState.editedScheme&&a.hasPremium&&null!=(yield this.saveScheme(a.colorStyleState.editedScheme))&&(this.openRootPage(),yield this.colorStyleLogic.loadSchemes())})}saveCopyAndReloadList(){return M(this,void 0,
void 0,function*(){const {editedScheme:a,selectedScheme:b,customSchemeList:c}=this.colorStyleStateHelper.getState();var d=a||b;const e=null==(null===d||void 0===d?void 0:d.title)||""===(null===d||void 0===d?void 0:d.title)?sa:f.I18n.tsFormatKeys("Copy of {title}",{title:d.title});d=Object.assign(Object.assign({},d),{id:"",title:k.Common.createUniqTitle(e,c),isCustom:!0});d=yield this.saveScheme(d);null!=d&&(l.avro.Avro.createDefaultLogger().logCopyPresentationColorScheme({copied_presentation_color_scheme_id:d.id,
original_presentation_color_scheme_id:b.id}),this.openRootPage(),yield this.colorStyleLogic.loadSchemes())})}deleteEditedSchemeAndReturnToRoot(){return M(this,void 0,void 0,function*(){const a=this.uiRoot.getState();null!==a.colorStyleState.editedScheme&&a.hasPremium&&this.styleSchemeProvider.deleteCustomStyleScheme(a.colorStyleState.editedScheme).then(()=>{this.openRootPage();return this.colorStyleLogic.loadSchemes()}).catch(()=>{this.showErrorDeleteScheme()})})}saveScheme(a){return M(this,void 0,
void 0,function*(){try{let b=a;if(null==a.title||0===a.title.length)b=Object.assign(Object.assign({},a),{title:k.Common.createUniqTitle(sa,this.colorStyleStateHelper.getState().customSchemeList)});return yield this.styleSchemeProvider.saveCustomStyleScheme(b)}catch(b){return l.avro.Avro.createDefaultLogger().logLoadedColorSchemeSaveErrorDialog({presentation_color_scheme_id:a.id}),this.showErrorSaveScheme(),null}})}};var z={},Ea=this&&z.__awaiter||function(a,b,c,d){function e(a){return a instanceof
c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{m(d.next(a))}catch(q){f(q)}}function h(a){try{m(d["throw"](a))}catch(q){f(q)}}function m(a){a.done?c(a.value):e(a.value).then(g,h)}m((d=d.apply(a,b||[])).next())})};Object.defineProperty(z,"__esModule",{value:!0});var K;(function(a){a.Loaded="Loaded";a.Missing="Missing";a.Uninitialized="Uninitialized"})(K=z.TemplateKind||(z.TemplateKind={}));z.getDefaultColorStyleState=()=>({anySelectedElement:!1,customSchemeList:[],
customSchemeDisplayProgress:e.ListProgress.finished,customSchemeIsSuccesfullyLoaded:!1,presetSchemeList:[],preziHasBackground:!1,schemeCustomizerMode:n.SchemeCustomizerMode.None,template:{kind:K.Uninitialized},currentThumbnailUrl:null,currentPreziScheme:null,editedScheme:null,savedEditedScheme:null,selectedScheme:null,unsavedStyleScheme:null,onOverview:!1,brandkitSchemeList:[]});z.getColorStyleMenuItemAndSidebarTitle=()=>f.I18n.ts("Colors");class Fa{constructor(a,b,c,d){this.applicationApi=a;this.session=
b;this.uiRoot=c;this.getBrandKitPart=d;this.common=new k.Common(this.uiRoot);this.colorStyleLogic=new T.ColorStyleLogic(a,this.uiRoot,this.session,this);this.colorStyleSchemeCustomizer=new H.ColorStyleSchemeCustomizer(a,this.uiRoot,this.session,this,this.getBrandKitPart);this.applicationApi.onLicenseChange((a)=>{a=a.featureSet.pitchCustomSchemes&&!v.isActive("js-scheme-paywall");this.uiRoot.getState().hasPremium!==a&&(this.uiRoot.setState({hasPremium:a}),this.colorStyleLogic.loadSchemes())});this.applicationApi.onStyleSheetChange(()=>
Ea(this,void 0,void 0,function*(){const {template:a}=this.uiRoot.getState().colorStyleState;if(a.kind===K.Uninitialized||v.isActive("js-developer-features")){const b=this.session.document.read((a)=>a.meta.templateInfo);if(a.kind!==K.Loaded||a.id!==b.templateId){try{const a=yield this.session.document.progressiveAssetManager.getTemplateStyleSheetReader(b),c=I.EditorCommander.createColorMixCommander(),d=Object.assign(Object.assign({},c.schemeFromPrezi(a)),{isCustom:!1,id:b.templateId});this.setState({template:{kind:K.Loaded,
id:b.templateId,colors:d}})}catch(m){this.setState({template:{kind:K.Missing}})}this.colorStyleLogic.updateSelectionAndUnsavedItem()}}}));this.applicationApi.onDocumentChange(()=>{const a=this.session.document.read((a)=>I.EditorCommander.createColorMixCommander().schemeFromPrezi(a.styleSheet)),b=this.getState().currentPreziScheme;this.session.document.read((a)=>{var b;a=null===(b=a.background.layers[0])||void 0===b?void 0:b.asset;this.setState({preziHasBackground:null!=a&&a.kind!==r.base.AssetKind.swf&&
null!=a.url})});k.Common.areColorStylesEqual(b,a)||(this.setState({currentPreziScheme:a}),this.colorStyleLogic.updateSelectionAndUnsavedItem())});this.applicationApi.onNetworkStatusChange((a)=>{const {customSchemeIsSuccesfullyLoaded:b}=this.getState();a!==e.NetworkStatus.Online||b||this.colorStyleLogic.loadSchemes()});this.applicationApi.onCurrentTopicChange((a)=>{const b=this.session.document.read((b)=>b.lookup.base(a)&&b.lookup.base(a).is(r.base.ObjectKind.overview));this.setState({onOverview:b})});
this.applicationApi.onSelectionChange((a)=>{this.setState({anySelectedElement:0<a.allObjects.length})})}declareUI(a){this.createColorStyleSidebar(a);this.createThemeMenuItem(a);this.createContextMenuButton(a);this.createColorGrid(a)}getState(){return this.uiRoot.getState().colorStyleState}setState(a){const b=this.getState();this.uiRoot.setState({colorStyleState:Object.assign(Object.assign({},b),a)})}setBrandKit(a){a=a.filter((a)=>null!=a&&null!=a.palette).map((a)=>ca.styleSchemeFromStrings(a.id,a.name,
a.palette.background,a.palette.topics,a.palette.subtopics,a.palette.border,a.palette.accent,a.palette.primaryText,a.palette.secondaryText));this.setState({brandkitSchemeList:a})}getApplyBrandKitAction(a){return new k.SyncBrandKitAction((b)=>{const c=this.lookupColorStyle(a,p.ItemType.brandKit);null!=c&&this.colorStyleLogic.applyScheme(b,c)})}getThumbnailData(a){a=this.lookupColorStyle(a,p.ItemType.brandKit);return null!=a?{url:a.thumbnailUrl,isPlaceholder:!1}:{url:t.getResourceUrl("notset.svg"),isPlaceholder:!0}}getColorsForThumbnail(a){var b;
return null===(b=this.lookupColorStyle(a,p.ItemType.brandKit))||void 0===b?void 0:b.colorScheme}editBrandScheme(){this.colorStyleLogic.loadSchemes().then(()=>{const {customSchemeList:a}=this.getState();0<a.length&&null!==a[0]&&(this.setState({schemeCustomizerMode:n.SchemeCustomizerMode.Edit,selectedScheme:a[0],editedScheme:a[0],savedEditedScheme:a[0]}),this.uiRoot.setState({openedSidebar:"color-style-sidebar-id"}),this.uiRoot.sidebar.open("color-style-sidebar-id",H.ColorCustomizerPageId))})}createContextMenuButton(a){const b=
this.getState();!b.anySelectedElement&&b.onOverview&&a.createMenuItem({kind:e.MenuItemKind.context,enabled:!0,onClick:()=>{this.common.toggleSidebar("color-style-sidebar-id")},weight:33,id:"color-mixer-context-menu-item",title:f.I18n.ts("Change colors")})}createColorGrid(a){var b=this.getState();null!=b.currentPreziScheme&&null!=b.currentPreziScheme.colorScheme&&(b=b.currentPreziScheme.colorScheme,a.createColorGrid({colors:[b.backgroundColor.getRGBData(),b.topicAColor.getRGBData(),b.topicBColor.getRGBData(),
b.borderColor.getRGBData(),b.extraColor.getRGBData()],buttonArgs:[{onClick:()=>this.common.openSidebar("color-style-sidebar-id"),id:"open-scheme-sidebar",content:{text:f.I18n.ts("Color settings")},color:e.ButtonColor.Gray}],weight:0,id:"scheme-colors",title:f.I18n.ts("Scheme Colors")}))}createThemeMenuItem(a){a.createTopMenuItem(e.TopMenuId.Style,{id:"topmenu-theme-item-color",kind:e.MenuItemKind.largeButton,enabled:!0,weight:2,title:f.I18n.ts("Colors"),icon:e.IconSmallId.FillColor,onClick:()=>{l.avro.Avro.createDefaultLogger().logClickTabMenuItem({tab_menu_item:"COLOR_THEME"});
this.common.toggleSidebar("color-style-sidebar-id")}})}createColorStyleSidebar(a){a.createSidebar("color-style-sidebar-id",(a)=>{const {editedScheme:b}=this.getState();return{root:this.createColorStyleList().createUI(a),pages:this.colorStyleSchemeCustomizer.createPage(a,b),onOpen:(a)=>{a=a.pageId===H.ColorCustomizerPageId;l.avro.Avro.createDefaultLogger().logShowPresentationColorSchemeOptions({colorscheme_sidebar_mode:a?"SCHEMECUSTOMIZER":"SCHEMELIST"});a||(this.colorStyleLogic.updateSelectionAndUnsavedItem(),
"sulInfoSection"===this.uiRoot.getState().brandkitSectionState&&l.avro.Avro.createDefaultLogger().logShownUpgradeToTeamCta({team_upgrade_trigger:"PRESENT_STYLE_COLORS"}))},onClose:()=>{const {schemeCustomizerMode:a}=this.getState();l.avro.Avro.createDefaultLogger().logClosePresentationColorSchemeSidebar({colorscheme_sidebar_mode:a!==n.SchemeCustomizerMode.None?"SCHEMECUSTOMIZER":"SCHEMELIST"});this.uiRoot.setState({openedSidebar:null})},onPageBack:()=>{l.avro.Avro.createDefaultLogger().logBackFromColorSchemeEditing({colorscheme_sidebar_mode:"SCHEMECUSTOMIZER"});
this.setState({schemeCustomizerMode:n.SchemeCustomizerMode.None,editedScheme:null,savedEditedScheme:null});this.common.openSidebar("color-style-sidebar-id");this.colorStyleLogic.updateSelectionAndUnsavedItem()}}})}createColorStyleList(){var a,b=this.getState();const c=(a,b,c)=>{l.avro.Avro.createDefaultLogger().logSelectPresentationColorScheme({presentation_color_scheme_id:b.id});const d=new k.SyncBrandKitAction((a)=>{this.setState({selectedScheme:b});this.colorStyleLogic.applyScheme(a,b)});null!=
c&&d.addExtraCommand(c);this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:d,uat:a,session:this.session,condition:()=>{var a;const c=null===(a=this.uiRoot.getState().brandInDocument)||void 0===a?void 0:a.brandId;return null!=c&&null!=this.getState().brandkitSchemeList.find((a)=>a.id===c)&&c!==b.id}},()=>this.getBrandKitPart())};b={id:"color-style-list",title:z.getColorStyleMenuItemAndSidebarTitle(),isPremium:this.uiRoot.getState().hasPremium,selectedSchemeId:null===(a=b.selectedScheme)||
void 0===a?void 0:a.id,customSecton:{id:"custom-section",title:f.I18n.ts("My Palettes"),progress:b.customSchemeDisplayProgress,items:b.customSchemeList,showItemTitles:!0},brandKitSection:this.createBrandKitSectionData(this.uiRoot.getState()),presetSection:{id:"preset-section",title:f.I18n.ts("Default Palettes"),progress:e.ListProgress.finished,items:b.presetSchemeList,showItemTitles:!1},templateSection:b.template.kind===K.Loaded?{id:"preset-section",title:f.I18n.ts("Template Palette"),progress:e.ListProgress.finished,
items:[b.template.colors],showItemTitles:!1}:null,unsavedItem:b.unsavedStyleScheme,onApply:(a,b,e)=>{b=this.lookupColorStyle(b,e);null!=b&&c(a,b)},onEdit:(a,b,e)=>{const {hasPremium:d}=this.uiRoot.getState(),f=this.lookupColorStyle(b,e);null!==f&&(d?c(a,f,()=>{this.setState({selectedScheme:f});l.avro.Avro.createDefaultLogger().logEditPresentationColorScheme({presentation_color_scheme_id:f.id});this.openSchemeCustomizer(f&&f.id?n.SchemeCustomizerMode.Edit:n.SchemeCustomizerMode.Add)}):this.common.openPaywallModal())},
onCreateNew:()=>{const {selectedScheme:a}=this.getState();this.uiRoot.getState().hasPremium?(l.avro.Avro.createDefaultLogger().logAddPresentationColorScheme({presentation_color_scheme_id:null!=a?a.id:"new"}),this.openSchemeCustomizer(n.SchemeCustomizerMode.Add)):this.common.openPaywallModal()},onOpenPaywallModal:()=>{this.common.openPaywallModal()},onDeleteAll:null};return new p.StyleList(b,this.common)}openSchemeCustomizer(a){var {selectedScheme:b}=this.getState();if(null!=b){const c=a===n.SchemeCustomizerMode.Edit?
Object.assign(Object.assign({},b),{id:b.isCustom?b.id:"",title:b.isCustom?b.title:""}):Object.assign(Object.assign({},b),{id:"",title:"",isCustom:!0});b=a===n.SchemeCustomizerMode.Edit?Object.assign({},b):null;this.setState({schemeCustomizerMode:a,editedScheme:c,savedEditedScheme:b});this.uiRoot.sidebar.open("color-style-sidebar-id",H.ColorCustomizerPageId)}}lookupColorStyle(a,b){const c=this.getState();switch(b){case p.ItemType.custom:return c.customSchemeList.find((b)=>b.id===a);case p.ItemType.brandKit:return c.brandkitSchemeList.find((b)=>
b.id===a);case p.ItemType.preset:return c.presetSchemeList.find((b)=>b.id===a);case p.ItemType.unsaved:return c.unsavedStyleScheme.id===a?c.unsavedStyleScheme:null;case p.ItemType.template:return c.template.kind===K.Loaded&&c.template.colors.id===a?c.template.colors:null}}createBrandKitSectionData(a){switch(a.brandkitSectionState){case "noBrandkitSection":return{kind:p.BrandKitSectionKind.none};case "sulInfoSection":return{kind:p.BrandKitSectionKind.sulInfo,title:f.I18n.ts("Brand palette"),text:f.I18n.ts("Brand kit with your company colors allows you to create on-brand palettes. Upgrade and try now!"),
trigger:"PRESENT_STYLE_COLORS"};case "infoSection":return{kind:p.BrandKitSectionKind.info,id:"branding-kit-section",text:f.I18n.ts("Create a brand kit with your company colors and create on-brand palettes."),title:f.I18n.ts("Brand palette"),buttonColor:a.canEditBrandKit?e.ButtonColor.Blue:e.ButtonColor.Ghost,buttonText:a.canEditBrandKit?f.I18n.ts("Create brand kit"):f.I18n.ts("Learn more"),logFun:a.canEditBrandKit?()=>l.avro.Avro.createDefaultLogger().logClickedCreateBrandkitCta({create_brandkit_cta_trigger:"PRESENT_STYLE_COLORS"}):
null,state:a};case "brandkitSection":return 0<a.colorStyleState.brandkitSchemeList.length?{kind:p.BrandKitSectionKind.full,id:"branding-kit-section",title:f.I18n.ts("Team Library"),progress:a.colorStyleState.customSchemeDisplayProgress,items:a.colorStyleState.brandkitSchemeList,showItemTitles:!0}:{kind:p.BrandKitSectionKind.noBrand,id:"branding-kit-section",title:f.I18n.ts("Team Library"),progress:e.ListProgress.finished,items:[{id:"no-brandkit-is-set",title:"",thumbnailUrl:t.getResourceUrl("colornotset.svg")}],
showItemTitles:!1};default:w.Utils.assertNever(a.brandkitSectionState)}}}z.ColorStylePart=Fa;var Q={};Object.defineProperty(Q,"__esModule",{value:!0});const Z={type:e.PreziLogoType.DocumentBased,assetUrl:null,linkUrl:null,sourceFilename:null,fill:{solidFill:{fillKind:u.FillKind.solid,color:null},current:u.FillKind.clear,hasAlpha:!0,canPickClearFill:!0}};Q.WatermarkPartStateHandler=class{constructor(a,b){this.session=a;this.userSettings=b}getDefaultWatermarkState(){const a=this.getLogoProps();return{userCanRemoveWatermark:!1,
userCanEditWatermark:!1,isInitializedWithRealLicenseInfo:!1,logoProps:a,logoLinkUrlErrorText:null,showFileUploadSpinner:!1,dropAreaUrl:this.getDropAreaAssetUrl(a),ownDocument:this.userOwnsDocument(),brandLogos:[],colorPickerCurrentFill:a.type===e.PreziLogoType.DocumentBased?a.fill:Z.fill}}getLogoProps(){const a=this.session.document.preziMetaData.logoType;switch(a){case e.PreziLogoType.None:return{type:e.PreziLogoType.None};case e.PreziLogoType.Watermark:return{type:e.PreziLogoType.Watermark};case e.PreziLogoType.DocumentBased:return this.session.document.read((a)=>
{var b,d,f,h,m;const k=null===(b=a.logo)||void 0===b?void 0:b.asset;b=null===k||void 0===k?void 0:k.url;b=null!=b?this.session.document.progressiveAssetManager.rewriteUrl(b):null;const l=(null===(d=a.logo)||void 0===d?void 0:d.logoKind)===r.base.LogoKind.next?null===(f=a.logo)||void 0===f?void 0:f.linkUrl:null;a=(null===(h=a.logo)||void 0===h?void 0:h.logoKind)===r.base.LogoKind.next?null===(m=a.logo)||void 0===m?void 0:m.color:null;return{type:e.PreziLogoType.DocumentBased,assetUrl:b,linkUrl:l,sourceFilename:null===
k||void 0===k?void 0:k.assetSourceFilename,fill:{solidFill:{fillKind:u.FillKind.solid,color:a},current:null==a?u.FillKind.clear:u.FillKind.solid,hasAlpha:!0,canPickClearFill:!0}}});default:w.Utils.assertNever(a)}}getDropAreaAssetUrl(a){switch(a.type){case e.PreziLogoType.DocumentBased:return a.assetUrl;case e.PreziLogoType.Watermark:return pa.getWatermarkAssetUrl();case e.PreziLogoType.None:return null;default:w.Utils.assertNever(a)}}userOwnsDocument(){return null==this.session.document.preziMetaData.ownerId?
!0:this.userSettings.getUserId()===this.session.document.preziMetaData.ownerId.toString()}};Q.WatermarkPart=class extends Q.WatermarkPartStateHandler{constructor(a,b,c,d,f){super(b,d);this.uiRoot=c;this.getBrandKitPart=f;this.common=new k.Common(c);this.urlUtils=w.Utils.createUrlUtils();this.colorPickerLongRunningExecutor=I.createLongRunningExecutor(this.session);a.onLicenseChange((a)=>{const b=this.getState(),c=this.getLogoProps();v.isActive("js-gm-watermark-paywall-on-click-and-present")&&b.isInitializedWithRealLicenseInfo&&
a.featureSet.noWatermark&&!b.userCanRemoveWatermark&&b.ownDocument&&c.type===e.PreziLogoType.Watermark&&this.removeLogo();this.setState({userCanRemoveWatermark:a.featureSet.noWatermark,userCanEditWatermark:a.featureSet.customLogo,isInitializedWithRealLicenseInfo:!0})});a.onDocumentChange(()=>{this.updateFromDocument()})}updateFromDocument(){const a=this.getLogoProps();this.setState({logoProps:a,logoLinkUrlErrorText:null,colorPickerCurrentFill:a.type===e.PreziLogoType.DocumentBased?a.fill:Z.fill})}setBrandKit(a){a=
a.filter((a)=>null!=a.logoImage).map((a)=>({id:a.id,assetUrl:a.logoImage,linkUrl:a.logoLink,name:a.name}));this.setState({brandLogos:a})}getThumbnailData(a){const b=this.getState().brandLogos.find((b)=>b.id===a);return null!=b?{url:b.assetUrl,isPlaceholder:!1}:{url:t.getResourceUrl("notset.svg"),isPlaceholder:!0}}getState(){return this.uiRoot.getState().watermarkState}setState(a){const b=this.getState();this.uiRoot.setState({watermarkState:Object.assign(Object.assign({},b),a)})}declareUI(a){const b=
this.getState();this.createMenuItem(a);b.userCanEditWatermark||!b.ownDocument?this.createEditSidebar(b,a):this.createRemoveOnlySidebar(b,a)}openSidebar(){l.avro.Avro.createDefaultLogger().logOpenWatermarkSidebar();const a=this.getState();this.isWatermarkRemovePaywalled()?this.openPlusPaywall():(this.uiRoot.setState({openedSidebar:"watermark-sidebar-id"}),this.setState({logoProps:this.getLogoProps(),logoLinkUrlErrorText:null,dropAreaUrl:this.getDropAreaAssetUrl(a.logoProps)}),this.common.openSidebar("watermark-sidebar-id"),
l.avro.Avro.createDefaultLogger().logLoadedWatermarkSidebar())}getLogoUrl(){const a=this.session.document.preziMetaData.logoType;switch(a){case e.PreziLogoType.None:return null;case e.PreziLogoType.Watermark:return"https://prezi.com";case e.PreziLogoType.DocumentBased:return this.session.document.read((a)=>{var b,d;return(null===(b=a.logo)||void 0===b?void 0:b.logoKind)===r.base.LogoKind.next?null===(d=a.logo)||void 0===d?void 0:d.linkUrl:null});default:throw w.Utils.assertNever(a);}}clickWatermark(){if(this.isWatermarkRemovePaywalled())this.openPlusPaywall();
else{const a=w.Utils.createUrlUtils().getRedirectLink(this.getLogoUrl());l.avro.Avro.createDefaultLogger().logOpenWatermark();window.open(a,"_blank")}}isWatermarkRemovePaywalled(){const a=this.getState();return a.ownDocument&&!a.userCanRemoveWatermark}onCloseSidebar(){l.avro.Avro.createDefaultLogger().logCloseWatermarkSidebar();this.uiRoot.setState({openedSidebar:null})}toggleSidebar(){"watermark-sidebar-id"===this.uiRoot.getState().openedSidebar?this.common.closeSidebar("watermark-sidebar-id"):this.openSidebar()}openPlusPaywall(){this.uiRoot.dialog.showBuiltIn(na.BuiltinDialog.upgradeLicenseNoWatermark)}openPremiumPaywall(){this.uiRoot.dialog.showBuiltIn(na.BuiltinDialog.upgradeLicenseCustomLogo)}setLogoCommon(a){if(null==
a)return!1;l.avro.Avro.createDefaultLogger().logConfigureWatermark({watermark_action_type:"UPLOAD_OWN_LOGO"});this.session.document.setDocumentLogoType(e.PreziLogoType.DocumentBased);const b=this.getState();a=this.session.document.progressiveAssetManager.rewriteUrl(a.url);this.setState({logoProps:Object.assign(Object.assign({},b.logoProps.type===e.PreziLogoType.DocumentBased?b.logoProps:Z),{assetUrl:a}),showFileUploadSpinner:!1,dropAreaUrl:a});return!0}setLogoCommand(a,b){const c=this.getState();
null!=b&&c.logoProps.type===e.PreziLogoType.DocumentBased&&(a.logo={logoKind:r.base.LogoKind.next,asset:b,color:c.logoProps.fill.solidFill.color,linkUrl:c.logoProps.linkUrl})}checkIsValidLogo(a){a=a.logo;if(null==a||a.logoKind!==r.base.LogoKind.next)return!1;a=this.getState();if(a.logoProps.type!==e.PreziLogoType.DocumentBased)return!1;a=a.logoProps.linkUrl;return""===a||a===this.urlUtils.ensureProtocolInUrl(a.trim())}setLogoLinkUrl(a){const b=a.logo;var c=this.getState();null!=b&&b.logoKind===r.base.LogoKind.next&&
c.logoProps.type===e.PreziLogoType.DocumentBased&&(c=c.logoProps.linkUrl,l.avro.Avro.createDefaultLogger().logConfigureWatermark({watermark_action_type:"ADD_URL"}),a.logo=Object.assign(Object.assign({logoKind:r.base.LogoKind.next},b),{linkUrl:c}))}setLogoColor(a){var b,c,d,f,h=this.getState();const m=a.logo;null!=m&&m.logoKind===r.base.LogoKind.next&&h.logoProps.type===e.PreziLogoType.DocumentBased&&(h=h.colorPickerCurrentFill,h.current!==u.FillKind.clear||null!=m.color)&&(h.current!==u.FillKind.clear&&
w.Utils.deepEquals(m.color,h.solidFill.color)||(h.current!==u.FillKind.clear&&(null===(b=m.color)||void 0===b?void 0:b.a)===h.solidFill.color.a||l.avro.Avro.createDefaultLogger().logConfigureWatermark({watermark_action_type:"CHANGE_OPACITY"}),h.current!==u.FillKind.clear&&(null===(c=m.color)||void 0===c?void 0:c.r)===h.solidFill.color.r&&(null===(d=m.color)||void 0===d?void 0:d.g)===h.solidFill.color.g&&(null===(f=m.color)||void 0===f?void 0:f.b)===h.solidFill.color.b||l.avro.Avro.createDefaultLogger().logConfigureWatermark({watermark_action_type:"CHANGE_BACKGROUND_COLOR"}),
a.logo=Object.assign(Object.assign({},m),{color:h.current===u.FillKind.clear?null:h.solidFill.color})))}removeLogo(){l.avro.Avro.createDefaultLogger().logConfigureWatermark({watermark_action_type:"REMOVE_WATERMARK"});this.session.document.setDocumentLogoType(e.PreziLogoType.None);this.setState({showFileUploadSpinner:!1,dropAreaUrl:null,logoProps:{type:e.PreziLogoType.None}})}revertLogo(){this.session.document.setDocumentLogoType(e.PreziLogoType.Watermark);this.setState({showFileUploadSpinner:!1,dropAreaUrl:pa.getWatermarkAssetUrl(),
logoProps:{type:e.PreziLogoType.Watermark}})}createMenuItem(a){a.createTopMenuItem(e.TopMenuId.Style,{id:"topmenu-theme-item-watermark",kind:e.MenuItemKind.largeButton,enabled:!0,weight:7,categoryWeight:1,title:f.I18n.ts("Watermark"),icon:e.IconSmallId.Watermark,onClick:()=>{l.avro.Avro.createDefaultLogger().logClickTabMenuItem({tab_menu_item:"WATERMARK"});this.toggleSidebar()}})}createEditSidebar(a,b){b.createSidebar("watermark-sidebar-id",(b)=>({root:{title:f.I18n.ts("Watermark"),content:[this.createNonOwnerNotification(a,
b),this.createImageArea(a,b),this.createLogoEditButtons(a,b),b.separator(),...this.createUrlSection(a,b),b.separator(),...this.createStyleSection(a,b),b.separator(),...this.createBrandkitSection(a,b),b.separator()]},onClose:()=>this.onCloseSidebar(),onOpen:()=>{this.updateFromDocument()}}))}createNonOwnerNotification(a,b){return a.ownDocument?null:b.infoMessage(f.I18n.ts("Only the owner of this presentation can edit the watermark."))}createRemoveOnlySidebar(a,b){b.createSidebar("watermark-sidebar-id",
(b)=>({root:{title:f.I18n.ts("Watermark"),content:[this.createNonOwnerNotification(a,b),this.createImageArea(a,b),this.createLogoRemoveButtons(a,b),b.separator(),...this.createBrandkitSection(a,b),b.separator(),...this.createUpgradeNowSection(a,b)]},onClose:()=>this.onCloseSidebar()}))}brandedCondition(){var a;const b=null===(a=this.uiRoot.getState().brandInDocument)||void 0===a?void 0:a.brandId;return null!=b&&null!=this.getState().brandLogos.find((a)=>a.id===b)}createImageArea(a,b){return null!=
a.dropAreaUrl||a.ownDocument?b.droparea({text:f.I18n.ts("**Drag and drop** your file"),filter:{allowImage:!0},illustration:u.IllustrationSmallId.Image,onFileSelected:(b,d)=>{if(a.userCanEditWatermark){const a=new k.AsyncBrandKitAction(()=>Promise.resolve(this.setState({showFileUploadSpinner:!0,dropAreaUrl:null})).then(()=>this.session.document.progressiveAssetManager.uploadLogo(d.file).finished),(a)=>this.setLogoCommon(a),(a,b)=>this.setLogoCommand(a,b));this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,
uat:b,action:a,session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())}else this.openPremiumPaywall()},hideUploadButton:!0,showSpinner:a.showFileUploadSpinner,url:a.dropAreaUrl,disabled:!a.ownDocument||this.uiRoot.getState().isNetworkOffline}):null}createLogoEditButtons(a,b){return b.button(e.ButtonSize.Small,e.ButtonAlign.Start,(b)=>[b.upload({color:e.ButtonColor.Gray,id:"upload-logo",content:{text:f.I18n.ts("Upload logo")},fileFilter:{allowImage:!0},onFileSelected:(a,
{file:b})=>{const c=new k.AsyncBrandKitAction(()=>Promise.resolve(this.setState({showFileUploadSpinner:!0,dropAreaUrl:null})).then(()=>this.session.document.progressiveAssetManager.uploadLogo(b).finished),(a)=>this.setLogoCommon(a),(a,b)=>this.setLogoCommand(a,b));this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,uat:a,action:c,session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())},disabled:!a.ownDocument||this.uiRoot.getState().isNetworkOffline}),
b.button({color:e.ButtonColor.Ghost,id:"remove-logo",disabled:!a.ownDocument||a.logoProps.type===e.PreziLogoType.None||this.uiRoot.getState().isNetworkOffline,content:{icon:e.IconSmallId.Trash},onClick:(a)=>{this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,uat:a,action:new k.SyncBrandKitAction(()=>this.removeLogo()),session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())}}),b.button({color:e.ButtonColor.Ghost,id:"revert-logo",disabled:!a.ownDocument||
a.logoProps.type===e.PreziLogoType.Watermark||this.uiRoot.getState().isNetworkOffline,content:{icon:e.IconSmallId.Cycle},onClick:(a)=>{this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,uat:a,action:new k.SyncBrandKitAction(()=>this.revertLogo()),session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())},tooltipText:a.logoProps.type===e.PreziLogoType.Watermark?null:f.I18n.ts("Revert to Prezi watermark"),tooltipPosition:"bottom"})])}createBrandkitSection(a,
b){const c=this.uiRoot.getState().brandkitSectionState;if("sulInfoSection"===c||"noBrandkitSection"===c)return[];let d=[];if("infoSection"===c)d=this.common.createNoBrandSection(b,this.uiRoot.getState(),"PRESENT_WATERMARK_SIDEBAR");else if("brandkitSection"===c){const c=0===a.brandLogos.length;d=[b.simpleList((b)=>{var d;return{activeId:a.logoProps.type===e.PreziLogoType.DocumentBased?null===(d=a.logoProps)||void 0===d?void 0:d.sourceFilename:null,id:"brandkit-style-list",items:this.createBrandKitButtons(b,
c),itemType:e.ListItemType.large,itemLayout:u.ListItemLayout.fixed,showTitle:!c}})]}return[b.sectionHeader({content:f.I18n.ts("Team Library")}),...d]}createBrandKitButtons(a,b){if(b)return[a.image({title:"",src:{url:t.getResourceUrl("logonotset.svg")},disabled:!0})];var {brandLogos:b}=this.getState();return b.map((b)=>{const c=this.getFileNameFromBrandLogoAssetUrl(b.assetUrl);return a.image({id:c,dataLookup:c,src:{url:b.assetUrl},title:b.name,onClick:(a)=>{this.common.manageBrandRelatedChange({action:this.getApplyBrandKitAction(b.id),
kind:k.WarnActionKind.token,uat:a,session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())},disabled:this.uiRoot.getState().isNetworkOffline})})}getApplyBrandKitAction(a){return null==this.getState().brandLogos.find((b)=>b.id===a)?new k.AsyncBrandKitAction(()=>Promise.resolve(null),()=>!0,()=>{this.removeLogo()}):new k.AsyncBrandKitAction(()=>(new Promise((b)=>{const c=this.getState().brandLogos.find((b)=>b.id===a);this.setState({logoProps:{type:e.PreziLogoType.DocumentBased,
assetUrl:c.assetUrl,fill:{solidFill:{fillKind:u.FillKind.solid,color:null},current:u.FillKind.clear,hasAlpha:!0,canPickClearFill:!0},linkUrl:null!=c.linkUrl?c.linkUrl:null,sourceFilename:this.getFileNameFromBrandLogoAssetUrl(c.assetUrl)}});b(c)})).then((a)=>fetch(a.assetUrl).then((a)=>a.blob()).then((b)=>{const c=this.getFileNameFromBrandLogoAssetUrl(a.assetUrl);b=w.Utils.createFile(b,c,w.Utils.getMimeTypeFromExtension(c));b=this.session.document.progressiveAssetManager.uploadLogo(b);this.setState({showFileUploadSpinner:!0,
dropAreaUrl:null});return b.finished}).catch(()=>null)),(a)=>this.setLogoCommon(a),(a,c)=>this.setLogoCommand(a,c))}getFileNameFromBrandLogoAssetUrl(a){return null!=a?a.split("/").pop():null}createLogoRemoveButtons(a,b){return b.button(e.ButtonSize.Small,e.ButtonAlign.Start,(b)=>[b.button({color:e.ButtonColor.Gray,id:"remove-logo",disabled:!a.ownDocument||a.logoProps.type===e.PreziLogoType.None||this.uiRoot.getState().isNetworkOffline,content:{text:f.I18n.ts("Remove logo")},onClick:(a)=>{this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,
uat:a,action:new k.SyncBrandKitAction(()=>this.removeLogo()),session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())}}),b.button({color:e.ButtonColor.Ghost,id:"revert-logo",disabled:!a.ownDocument||a.logoProps.type===e.PreziLogoType.Watermark,content:{icon:e.IconSmallId.Cycle},onClick:(a)=>{this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,uat:a,action:new k.SyncBrandKitAction(()=>this.revertLogo()),session:this.session,condition:()=>this.brandedCondition()},
()=>this.getBrandKitPart())},tooltipText:a.logoProps.type===e.PreziLogoType.Watermark?null:f.I18n.ts("Revert to Prezi watermark"),tooltipPosition:"bottom"})])}createStyleSection(a,b){return[b.sectionHeader({content:f.I18n.ts("Style")}),b.colorPicker({label:f.I18n.ts("Logo background"),id:"watermark-background-color-picker",disabled:!a.ownDocument||a.logoProps.type!==e.PreziLogoType.DocumentBased||this.uiRoot.getState().isNetworkOffline,fills:a.colorPickerCurrentFill,onChange:(a,b)=>{const c=this.getState();
if(c.logoProps.type===e.PreziLogoType.DocumentBased){var d=b.fills;null===c.colorPickerCurrentFill.solidFill.color&&null!==d.solidFill.color&&(d=Object.assign(Object.assign({},d),{solidFill:Object.assign(Object.assign({},d.solidFill),{color:Object.assign(Object.assign({},d.solidFill.color),{a:.8})})}));this.colorPickerLongRunningExecutor.update("logo color edit",a,b,(a)=>{this.setState({colorPickerCurrentFill:d});const b=new k.SyncBrandKitAction((a)=>this.setLogoColor(a));this.common.manageBrandRelatedChange({kind:k.WarnActionKind.api,
api:a,action:b,session:this.session,condition:()=>this.brandedCondition()},()=>this.getBrandKitPart())},()=>{})}},showColorWheel:!0,showThemeColors:!1})]}createUrlSection(a,b){const c=()=>{const a=this.getState();a.logoProps.type===e.PreziLogoType.DocumentBased&&this.setState({logoProps:Object.assign(Object.assign({},a.logoProps),{linkUrl:this.urlUtils.ensureProtocolInUrl(a.logoProps.linkUrl.trim())})});null!=this.linkEditLongRunningCtx&&this.linkEditLongRunningCtx.isActive()&&this.linkEditLongRunningCtx.end()};
return[b.sectionHeader({content:f.I18n.ts("Add url")}),b.inputField({id:"watermark-url-input-field",disabled:!a.ownDocument||a.logoProps.type!==e.PreziLogoType.DocumentBased||this.uiRoot.getState().isNetworkOffline,placeholderText:"https://prezi.com",maxLength:2E3,value:a.logoProps.type===e.PreziLogoType.DocumentBased?a.logoProps.linkUrl:Z.linkUrl,onValueChange:(a,b)=>{const c=this.getState();c.logoProps.type===e.PreziLogoType.DocumentBased&&(null!=this.linkEditLongRunningCtx&&this.linkEditLongRunningCtx.isActive()||
(this.linkEditLongRunningCtx=this.session.document.beginLongRunningCommand(a,{name:"logo link url edit"},(a)=>{switch(a.reason){case e.FinishEventKind.RollbackTransaction:case e.FinishEventKind.AbortTransaction:break;case e.FinishEventKind.EndTransaction:case e.FinishEventKind.BeginOtherTransaction:if(this.checkIsValidLogo(a.api)){const b=new k.SyncBrandKitAction((a)=>this.setLogoLinkUrl(a));this.common.manageBrandRelatedChange({kind:k.WarnActionKind.api,api:a.api,action:b,session:this.session,condition:()=>
this.brandedCondition()},()=>this.getBrandKitPart())}break;default:w.Utils.assertNever(a)}})),this.setState({logoProps:Object.assign(Object.assign({},c.logoProps),{linkUrl:b})}))},errorText:a.logoLinkUrlErrorText,onEnter:c,onFocusLost:c,tooltipText:a.logoProps.type!==e.PreziLogoType.DocumentBased?f.I18n.ts("Upload a logo first"):null,tooltipPosition:"bottom"})]}createUpgradeNowSection(a,b){return[b.sectionHeader({content:f.I18n.ts("Ready to unlock more features")}),b.label(f.I18n.ts("Get access to advanced color editing and much more by upgrading your Prezi license.")),
b.button(e.ButtonSize.Small,e.ButtonAlign.Start,(b)=>[b.button({color:e.ButtonColor.Blue,id:"upgrade-premium",content:{text:f.I18n.ts("Upgrade now")},onClick:()=>{this.openPremiumPaywall()},disabled:!a.ownDocument||this.uiRoot.getState().isNetworkOffline})])]}};var R={rewriteUrl:function(a,b=!1){if(null!=a){b=b?"js":null;var c=Ga;0===a.indexOf("data:")||0===a.indexOf("blob:")?b=a:(a=ua(a,c),a=0===a.indexOf("http://")?"//"+a.substr(7):a,b=b?a+(0<=a.indexOf("?")?"&":"?")+b:a)}else b=null;return b}};
Object.defineProperty(R,"__esModule",{value:!0});const Ga=!v.isActive("js-emergency-disable-cloudfront");var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.hardCodedFreeImages=[{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/7/6/21154b0ad22668ad39e35f1bbbe3004e27bb8.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/a/7/bd14d4002fff577e28fa0beb4e86691d54aea.jpg",height:1013,width:1800,origFilename:"Background5.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/7/6/21154b0ad22668ad39e35f1bbbe3004e27bb8.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/7/e/c/78429586812536d29eccbcd876f6a6633823b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/4/5/176417bf6befeeabf54cb320e8a759fe45b56.jpg",height:1013,width:1800,origFilename:"Background6.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/e/c/78429586812536d29eccbcd876f6a6633823b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/d/7/a/e4d77faf36f0e107a9cf134108df688a77f32.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/6/2/e38f3aaedf5d08acf78e3586177c64280bb19.jpg",height:1012,width:1800,origFilename:"Background7.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/7/a/e4d77faf36f0e107a9cf134108df688a77f32.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/b/4/75c1cf3b6018fa6505d8dfff6503bc7d0c282.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/8/9/e6597ba7447eed4d3c01e7cb80de5b982c0a2.jpg",height:1013,
width:1800,origFilename:"Background8.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/b/4/75c1cf3b6018fa6505d8dfff6503bc7d0c282.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/2/7/8bb2fa368f26db4ce1b0475286ead6258c24d.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/f/3/6def72fa0b0b697c7825ecc4d6f9445718ed1.jpg",height:1013,width:1800,origFilename:"Background9.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/2/7/8bb2fa368f26db4ce1b0475286ead6258c24d.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/1/e/488a07dd81f294c3e2e671be714d1e40f0d50.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/4/b/4e52118e9f1ca1bcb0b2785b96dafa5166df5.jpg",height:1013,width:1800,origFilename:"Background10.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/1/e/488a07dd81f294c3e2e671be714d1e40f0d50.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/e/2/9/14b5566255011a17e7d381d7a08275edb406e.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/3/6/91a2d0874fddef7c7f311887598778c434bff.jpg",height:1013,width:1800,origFilename:"Background11.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/2/9/14b5566255011a17e7d381d7a08275edb406e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/0/6/bbde505034a3f00d494fb96e9216af338cd47.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/9/6/d1cf8706bc9ee3478ccf271c572b42d1f8316.jpg",height:1013,
width:1800,origFilename:"Background12.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/0/6/bbde505034a3f00d494fb96e9216af338cd47.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/5/f/36662e88cc44b9fb6d51ec27add066800ec0b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/1/d/da086c2f034bad340e038d275c196df939f58.jpg",height:1012,width:1800,origFilename:"Background1.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/5/f/36662e88cc44b9fb6d51ec27add066800ec0b.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/5/8/2b36d0d21244d14cdbd46a5186b41af5d18eb.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/3/f/375e46b1046378b96d12bdcafe506513c4162.jpg",height:1012,width:1800,origFilename:"Background2.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/5/8/2b36d0d21244d14cdbd46a5186b41af5d18eb.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/5/d/9/4c23ced3ce89f9a28656335e665199c0f48a2.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/5/8/2d12cc2fd5b8662caf1baa112d8167f1c967d.jpg",height:1012,width:1800,origFilename:"Background3.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/d/9/4c23ced3ce89f9a28656335e665199c0f48a2.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/7/2/c841fbe04a9489716c9b94dd0f2f109c9ff65.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/7/5/5160c3dec96134c3b1679ec2a3c099f354f28.jpg",height:1013,
width:1800,origFilename:"Background4.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/7/2/c841fbe04a9489716c9b94dd0f2f109c9ff65.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/f/6/2727cf8c1c9d7bbbf055db1f323f0c63c151a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/4/d/a5d3ce27b1c22fccb6d60d72e3b574aa53505.jpg",height:1013,width:1800,origFilename:"Background13.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/f/6/2727cf8c1c9d7bbbf055db1f323f0c63c151a.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/8/3/d65ca137d3d9a5d1e42e40e443e2fe81ff67e.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/a/9/c6e6d0cededac6bafd753ad059e1fa4747aec.jpg",height:1013,width:1800,origFilename:"Background14.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/8/3/d65ca137d3d9a5d1e42e40e443e2fe81ff67e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/9/4/fa31fba4c4b7f9448caf3af4e2fb7548c0a3f.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/a/8/b0c5105892f0ede1ece97fa4939e3d606d48b.jpg",height:1013,width:1800,origFilename:"Background15.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/9/4/fa31fba4c4b7f9448caf3af4e2fb7548c0a3f.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/5/9/0/303c0734cd2f74e960e344ff7521358fdb16b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/a/d/fa44597de9132b8b9746ec46326c65175b318.jpg",height:1013,
width:1800,origFilename:"Background16.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/9/0/303c0734cd2f74e960e344ff7521358fdb16b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/9/a/5a44524ed32ee58b17febb4963e7ca07e9729.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/3/1/3564deed48237b6610dfd59fed4d9f1955de8.jpg",height:1012,width:1800,origFilename:"Background17.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/9/a/5a44524ed32ee58b17febb4963e7ca07e9729.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/5/e/a4d1796e430d51047110c543b9ad470b3b634.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/a/0/c83b12638db927ab45ad7d6ee0bcc4508fb19.jpg",height:1012,width:1800,origFilename:"Background18.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/5/e/a4d1796e430d51047110c543b9ad470b3b634.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/6/b/2/bbe6c7a255ea3fe424b15f375d15ffed1d2db.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/c/c/4a2d4ab9696bb92c5779b5b9f7f8bef844801.jpg",height:1013,width:1800,origFilename:"Background19.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/b/2/bbe6c7a255ea3fe424b15f375d15ffed1d2db.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/c/a/bdda1b136dbd0407efd08a9294925cbb65324.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/0/4/4e2633f3c18ac5db6364bb34fea2df80bf67a.jpg",height:1013,
width:1800,origFilename:"Background20.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/c/a/bdda1b136dbd0407efd08a9294925cbb65324.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/7/7/f/fc4a4df72cd8665a578af8e54d85dd7b81087.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/c/5/72aa1ac15298553749769ccd65d708be92ca5.jpg",height:1013,width:1800,origFilename:"Background21.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/7/f/fc4a4df72cd8665a578af8e54d85dd7b81087.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/d/5/1fd061b1eb465d1df4fd3ae3aaee6c0683134.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/1/9/3bb3d34e8e1a8ec633114e37e3f469d149dcc.jpg",height:1013,width:1800,origFilename:"Background22.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/d/5/1fd061b1eb465d1df4fd3ae3aaee6c0683134.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/a/1/fee418418dcebf0a2202c8bdc6d8ee3e1809b.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/b/9/660959b1ebb3598e1476737cd1ea1be6e6eef.jpg",height:1013,width:1800,origFilename:"Background23.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/a/1/fee418418dcebf0a2202c8bdc6d8ee3e1809b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/5/e/7/3fa8d20c9872f37408b9d96dd8c250eb5691b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/a/d/e004d65866acef76c9e49094b00a712f0ba23.jpg",height:1013,
width:1800,origFilename:"Background24.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/e/7/3fa8d20c9872f37408b9d96dd8c250eb5691b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/b/7/c319462de8b14b1165cad267cfdb719bf00ab.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/8/2/0350b0a40445fa93ecd45eebc0dad6740ed5e.jpg",height:1013,width:1800,origFilename:"Background25.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/b/7/c319462de8b14b1165cad267cfdb719bf00ab.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/2/0/5a59320033c3966a86146e4f2160c2e2b8a6a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/c/2/442a330045725b507df0a1db3e8974391c6f1.jpg",height:1013,width:1800,origFilename:"Background26.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/2/0/5a59320033c3966a86146e4f2160c2e2b8a6a.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/c/9/a3f7c973be43d1dc75986e6a22d71f0c82446.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/b/5/ebdf116213c0778c5535b73675f2912e1585d.jpg",height:1013,width:1800,origFilename:"Background27.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/c/9/a3f7c973be43d1dc75986e6a22d71f0c82446.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/e/5/f86f7cbe5e77d104584b677fba72122b15a1a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/e/2/9712936f98973a965205db4ea7eebacc279d2.jpg",height:1012,
width:1800,origFilename:"Background28.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/e/5/f86f7cbe5e77d104584b677fba72122b15a1a.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/f/d/f38c46d237602db2e0fc676b1741ad5bf6227.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/2/8/9b70a87f361ffdf2826025808492d5b84b755.jpg",height:1013,width:1800,origFilename:"Background29.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/f/d/f38c46d237602db2e0fc676b1741ad5bf6227.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/5/d/0097199b25272c73977be9c0011dbff735735.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/d/a/276799a0420f77138faa05b9c244d8a70c2db.jpg",height:1013,width:1800,origFilename:"Background30.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/5/d/0097199b25272c73977be9c0011dbff735735.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/7/f/09f0185543336a64e9ba5b12e42ead5dda46e.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/5/6/30712e349e72051980456a452d00cdb30ab16.jpg",height:1013,width:1800,origFilename:"Background31.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/7/f/09f0185543336a64e9ba5b12e42ead5dda46e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/7/0/072e6a10edcc631f86c443e5d937e5679b961.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/b/f/14ae6c574206260139555a1757f05d0998a1e.jpg",height:1012,
width:1800,origFilename:"Background32.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/7/0/072e6a10edcc631f86c443e5d937e5679b961.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/d/b/ab9bfd2da171a02e809105e7dd55c4f1a9376.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/9/f/ca605635568dcdb9958b24ae23b78b81c9bc6.jpg",height:1012,width:1800,origFilename:"Background33.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/d/b/ab9bfd2da171a02e809105e7dd55c4f1a9376.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/b/4/0be9580bd2d762a27976b962f7f9bd4d5e438.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/d/8/8c3ff007004c116c53676a9bd413e64db2837.jpg",height:1013,width:1800,origFilename:"Background34.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/b/4/0be9580bd2d762a27976b962f7f9bd4d5e438.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/6/8/3470150c8fc7bf66d756caa0bfad3a2afd733.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/0/d/1652dfb21e3912588d3f9583f37e87bbdaae8.jpg",height:1013,width:1800,origFilename:"Background35.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/6/8/3470150c8fc7bf66d756caa0bfad3a2afd733.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/c/3/7cbc98cbd776d41bd74d96548a56cf994a213.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/0/e/f8b87a6ffb536a470b3aa240798cc0b25f7b8.jpg",height:1012,
width:1800,origFilename:"Background36.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/c/3/7cbc98cbd776d41bd74d96548a56cf994a213.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/d/2/c/c74f2cbc0a1b377922101e457572c08e789e7.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/7/a/f626181d31876eb6136dbfd10efcc9527863a.jpg",height:1012,width:1800,origFilename:"Background37.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/2/c/c74f2cbc0a1b377922101e457572c08e789e7.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/4/1/c39c21135098177f760174955e2699932d54d.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/5/4/e1f6428780e4bb6c01c3c6ae7535ce9c123be.jpg",height:1013,width:1800,origFilename:"Background38.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/4/1/c39c21135098177f760174955e2699932d54d.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/0/7/56d2105eb0b98251e6bcf9e77f43b3b2e36a6.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/9/2/f457ac6a6b3ca3f87f2712e72d28fb3d2f950.jpg",height:1013,width:1800,origFilename:"Background39.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/0/7/56d2105eb0b98251e6bcf9e77f43b3b2e36a6.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/c/6/1a0c9a890d69fa23279c3e85a8918a8d828e8.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/1/9/f6a094ab049c84abb21dbfdf7b3872b82fa53.jpg",height:1013,
width:1800,origFilename:"Background40.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/c/6/1a0c9a890d69fa23279c3e85a8918a8d828e8.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/1/c/5a35ff3d9bf5c6581961b56d89d0457f49b34.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/2/c/471e983a95c4d78eacfbb09790aab9eb2ec24.jpg",height:1013,width:1800,origFilename:"Background41.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/1/c/5a35ff3d9bf5c6581961b56d89d0457f49b34.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/c/0/74720f2a030f8d9932d1ad74ae549b8100e96.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/b/e/cc5b6c844c3a290b1436034c51034bb357749.jpg",height:1013,width:1800,origFilename:"Background42.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/c/0/74720f2a030f8d9932d1ad74ae549b8100e96.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/9/5/8/28a1a391a61e3d1f84da3c4093d22204cd403.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/4/a/4f476395f78f74aae73c7522a99808a2befb0.jpg",height:1012,width:1800,origFilename:"Background43.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/5/8/28a1a391a61e3d1f84da3c4093d22204cd403.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/6/d/2ff16c3fa33019af7fe17044e9d0f3483c0f6.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/1/1/4af9889203456030f658072d31d3d6d63630d.jpg",height:1013,
width:1800,origFilename:"Background44.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/6/d/2ff16c3fa33019af7fe17044e9d0f3483c0f6.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/7/b/8/35486bae542032828279508f15734d3f1bd3f.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/0/3/8cbed44fb3acbb9bbe2cbaf2a49b5ee6ee9d8.jpg",height:1013,width:1800,origFilename:"Background45.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/b/8/35486bae542032828279508f15734d3f1bd3f.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/7/5/d39f6a7ad7169681b076a017ea7fed25ec703.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/b/0/90820b92738d353e8ddd8b78c173cebdcafea.jpg",height:1013,width:1800,origFilename:"Background46.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/7/5/d39f6a7ad7169681b076a017ea7fed25ec703.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/8/e/9fbcedd95aa66e77dd96e1f16a9c3b1762de4.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/c/4/79fc892469040d26fcccf5ee97145f01b384b.jpg",height:1012,width:1800,origFilename:"Background47.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/8/e/9fbcedd95aa66e77dd96e1f16a9c3b1762de4.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/3/9/c03c14c5c50d1fa2c0d8950c8ce88455ef95c.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/3/6/42a06622125df6b6834d27e0426aa0b436f8c.jpg",height:1013,
width:1800,origFilename:"Background48.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/3/9/c03c14c5c50d1fa2c0d8950c8ce88455ef95c.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/6/a/9b67917a8216abc7a795bcc9a946766f91f1f.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/d/d/7478267454930de049a7959aa0e12d2363640.jpg",height:1013,width:1800,origFilename:"Background49.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/6/a/9b67917a8216abc7a795bcc9a946766f91f1f.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/3/5/10e180a2ffe3f7478b2ceccc1fededee5215d.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/2/6/688db28d2a069d3180fb37d0c7b8b665d7434.jpg",height:1013,width:1800,origFilename:"Background50.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/3/5/10e180a2ffe3f7478b2ceccc1fededee5215d.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/7/f/8d7fe084f7d49c7cff255eeab9bd3fe599f01.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/e/f/2111f45dd37311fc9cd9fc50da09ccf123fc6.jpg",height:1013,width:1800,origFilename:"Background51.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/7/f/8d7fe084f7d49c7cff255eeab9bd3fe599f01.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/f/b/2a50ee9d4c1dcfbaa808c1e1eaba65cf29bc9.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/6/d/a4a6fbfd5f2d69194e2b66a52e7af363a7b88.jpg",height:1013,
width:1800,origFilename:"Background52.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/f/b/2a50ee9d4c1dcfbaa808c1e1eaba65cf29bc9.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/9/f/5/8e12a09c75ab518c2725c36621df536555f9a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/c/b/af833b8271aa9c588619fdd5009998efa4c48.jpg",height:1013,width:1800,origFilename:"Background53.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/f/5/8e12a09c75ab518c2725c36621df536555f9a.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/1/b/448b14dbc747b74f5e20a351f03f9410f0c42.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/5/2/1ecf1d0bc4ebed031b619455bd596715d3eec.jpg",height:1013,width:1800,origFilename:"arrow.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/1/b/448b14dbc747b74f5e20a351f03f9410f0c42.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/8/e/276fb3cd12fca2d733a5220a03dca8c4fcff4.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/9/b/810a6903761e16f19b436c245637ad65bf7a5.jpg",
height:1013,width:1800,origFilename:"Background54.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/8/e/276fb3cd12fca2d733a5220a03dca8c4fcff4.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/d/e/5d4b12c53b96ce10f68fd34c388711622f67f.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/b/4/7aec75baec02ee7e82ed6446b6ad89bd6d06c.jpg",height:1012,width:1800,origFilename:"Background55.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/d/e/5d4b12c53b96ce10f68fd34c388711622f67f.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/8/f/635fbc5a77ccc10a7299e828e9e8ccfad4b03.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/7/3/a928b5c4668b657cf8e482472ee0c553ee895.jpg",height:1012,width:1800,origFilename:"Background56.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/8/f/635fbc5a77ccc10a7299e828e9e8ccfad4b03.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/9/9/0/566e84436c2c1fb8a517004589f01ffd49da0.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/0/f/40fefdfbf902a044ff87e5a15792936074abb.jpg",height:1012,width:1800,origFilename:"Background57.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/9/0/566e84436c2c1fb8a517004589f01ffd49da0.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/d/9/3/0b7618cfd2b41a4aca27dfdaf19d7aa731499.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/5/4/da5f52f6e941ef9a82b48e3b94ae61aeb41a5.jpg",height:1013,
width:1800,origFilename:"Background58.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/9/3/0b7618cfd2b41a4aca27dfdaf19d7aa731499.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/3/8/34807f4cf4e84a2c2d92e99b0c75bc0b929b1.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/7/8/32840c23dbc7f1e53a46940ae77aadcfa2788.jpg",height:1013,width:1800,origFilename:"Background59.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/3/8/34807f4cf4e84a2c2d92e99b0c75bc0b929b1.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/5/b/73e072a9feee2b90f7c624a63f97e42cfbf3a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/a/4/4536006ca4c0eeee1983a5da41f90b4061e31.jpg",height:1013,width:1800,origFilename:"Background60.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/5/b/73e072a9feee2b90f7c624a63f97e42cfbf3a.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/d/b/cf44eefa3f6b0ef3fa287a9762cde8c519704.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/4/9/b114e9d216d9f78e207af08d249cd5e319839.jpg",height:1012,width:1800,origFilename:"rocket.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/d/b/cf44eefa3f6b0ef3fa287a9762cde8c519704.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/6/b/088b52a913db02af4e7446d56afe9490790d7.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/a/b/f96fc9e7dea81b4ec3487356c7be064e9b547.jpg",height:1012,width:1800,
origFilename:"worldmap.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/6/b/088b52a913db02af4e7446d56afe9490790d7.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/4/1/2/d1f538d19b1a3fc6a256ad8ec627b2cef3e20.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/0/4/1554d1ef921fb5051431dee4094d101087559.jpg",height:1012,width:1800,origFilename:"cityiso.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/1/2/d1f538d19b1a3fc6a256ad8ec627b2cef3e20.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/5/3/b/9ffaff95ddad3f51aa93b09bcca0525dc067c.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/6/2/16dac1ddf522c12e6ac83ab3200ed8f2471ec.jpg",height:1012,width:1800,origFilename:"linecity.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/3/b/9ffaff95ddad3f51aa93b09bcca0525dc067c.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/3/e/207c92a6d906a1bcc934b78e3d9efbc47e252.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/f/8/2465ff7e1176863cd13b46245af7877a12945.jpg",
height:1012,width:1800,origFilename:"gridcorner.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/3/e/207c92a6d906a1bcc934b78e3d9efbc47e252.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/7/0/e957f573fe2ab19ae6f34c81adee3d3216e60.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/7/d/c6baf0e19bbbf3a8bedf42fadd08b2655504a.jpg",height:1012,width:1800,origFilename:"mesh.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/7/0/e957f573fe2ab19ae6f34c81adee3d3216e60.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/2/b/2de9d3f23aaa66921a24fbbbb94cfeee92ee0.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/c/b/18e2b3e158858c39b7f1dd860eff8ad6b9213.jpg",height:1012,width:1800,origFilename:"meshmap.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/2/b/2de9d3f23aaa66921a24fbbbb94cfeee92ee0.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/8/c/7924c3b519caae2ec9cd6d7158141dc82913e.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/8/4/f2bc6dd1e8c860e85d2e01af1012b1f3bc2ae.jpg",
height:1012,width:1800,origFilename:"cubegrid.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/8/c/7924c3b519caae2ec9cd6d7158141dc82913e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/4/2/2e7f5af51a1e5af5abeee27bed945ccc01d45.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/5/a/160c15dd169c46c20cfd6f170dacc339b0c1d.jpg",height:1012,width:1800,origFilename:"pcb.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/4/2/2e7f5af51a1e5af5abeee27bed945ccc01d45.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/1/b/b/424a3e3e08d45720d6b5c06a52818d0bbf742.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/f/0/4d9b4a8c5c8dc340c17cafd2eaa31b227730f.jpg",height:1012,width:1800,origFilename:"citycutout.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/b/b/424a3e3e08d45720d6b5c06a52818d0bbf742.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/6/4/d/c7d7bd295753e60ff864f3c4227a75c45f73c.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/7/7/947c37ff3b260101d41ee13f55686c565e9b7.jpg",height:1012,width:1800,origFilename:"linesup.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/4/d/c7d7bd295753e60ff864f3c4227a75c45f73c.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/9/e/f00bf118c9710d30a57f5a1bba25cbbb2fdf8.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/9/d/7d81a69588c57a4efbc3e7d212e645fa6130d.jpg",height:1012,width:1800,
origFilename:"isocityimini.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/9/e/f00bf118c9710d30a57f5a1bba25cbbb2fdf8.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/e/a/c/0940f7300e5a193a2263034025a8a425aa372.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/9/c/e6e81dafd5297eb957149bd15e1b4fbed22f3.jpg",height:1012,width:1800,origFilename:"networkjelly.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/a/c/0940f7300e5a193a2263034025a8a425aa372.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/0/d/5c242e77f990db13c9f5ea86f2c33c7584be3.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/f/c/404cd1dfc45d2aee3ea3b437b39bb0a8036b3.jpg",height:1012,width:1800,origFilename:"arowman.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/0/d/5c242e77f990db13c9f5ea86f2c33c7584be3.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/0/7/2/2e55eeff8f46ca70c6722d85d1abc5e4aca3b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/9/4/cca36cfda1da9a53ece0a84798cd41c700f15.jpg",
height:1012,width:1800,origFilename:"money.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/7/2/2e55eeff8f46ca70c6722d85d1abc5e4aca3b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/d/4/dbc75784513b693373bf137539fa5297b2607.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/d/3/061cb199dfa08c8300c1defdb580d65dc190c.jpg",height:1012,width:1800,origFilename:"lineskyline.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/d/4/dbc75784513b693373bf137539fa5297b2607.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/b/4/a3794fc92097a0782857f3e53046909dcb641.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/f/f/4d23aba6876abbb60257164f8d5450eeaa2d7.jpg",height:1012,width:1800,origFilename:"arrowinhand.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/b/4/a3794fc92097a0782857f3e53046909dcb641.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/7/2/6/044e97b77e5a9e79f25695be570950b20e41f.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/6/f/5/d282a8f3bc4a280f0daafc29a3ec8b6f291fb.jpg",height:1012,width:1800,origFilename:"pinetrees.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/7/2/6/044e97b77e5a9e79f25695be570950b20e41f.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/7/6/2f4685f99a41db18236fba8158183dc924dae.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/b/a/79695e20d666462a18ef4869ad1edada1a7e4.jpg",height:1012,width:1800,
origFilename:"softarrows.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/7/6/2f4685f99a41db18236fba8158183dc924dae.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/8/e/8f9766e1d548e796726dd2601f35655b98f22.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/e/0/66690167f86f111dfea1f1db758a053a2c68d.jpg",height:1012,width:1800,origFilename:"cityskyline.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/8/e/8f9766e1d548e796726dd2601f35655b98f22.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/6/f/5cb217db1133b3ddba13d5a4b021125801063.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/6/d/48c81fd7475e8865a4d8ad82eefa5d2137851.jpg",height:1012,width:1800,origFilename:"arrowlamp.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/6/f/5cb217db1133b3ddba13d5a4b021125801063.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/4/5/f/db5a93e424280ea82280f57bf96940d084cee.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/b/e/0094f05687f2ea98f205a6ca812256cf8f04b.jpg",
height:1012,width:1800,origFilename:"blackcitymap.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/5/f/db5a93e424280ea82280f57bf96940d084cee.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/5/c/8c0633040b193e53e407da1e44fbf77ecf66c.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/3/c/5d49e0c89f62fc4f610bc2917982b512670c8.jpg",height:1012,width:1800,origFilename:"citytop.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/5/c/8c0633040b193e53e407da1e44fbf77ecf66c.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/b/0/f74f89290f5bf8ee3f375af5d19d1b781b628.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/c/9/1095fe62ab5a64bcf9a5ad6beefad4c8d87d8.jpg",height:1012,width:1800,origFilename:"worldmapgreen.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/b/0/f74f89290f5bf8ee3f375af5d19d1b781b628.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/a/8/a7d52bd6ac0015a1530271c567cdc9511b44e.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/e/e/420211f952b7365ef6ec88a44d51df7582cdd.jpg",height:1012,width:1800,origFilename:"numbers.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/a/8/a7d52bd6ac0015a1530271c567cdc9511b44e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/8/e/5/b527bb97cebef26e0ca73a02b2c22d21e8ec2.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/f/e/c1e957385181407e0462df8e0e2ed405827df.jpg",height:1012,width:1800,
origFilename:"waves.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/e/5/b527bb97cebef26e0ca73a02b2c22d21e8ec2.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/f/4/f3f6837043557d8824298e2f93e9ef59b5d05.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/7/3/e73e541574742783c9f200052f06540acc854.jpg",height:1012,width:1800,origFilename:"hexa.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/f/4/f3f6837043557d8824298e2f93e9ef59b5d05.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/c/9/2b70e6028e1b62d191412a8845885b215493b.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/3/1/28f0f2cd62974021a1023e9cd9a0209950dd8.jpg",height:1012,width:1800,origFilename:"light.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/c/9/2b70e6028e1b62d191412a8845885b215493b.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/3/8/2/eb4d253b640eaf0680a8e0f87aadb7303854f.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/f/f/3ddeec60e13a0c399380c784324e29b80cfa7.jpg",
height:1012,width:1800,origFilename:"perspectiverect.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/8/2/eb4d253b640eaf0680a8e0f87aadb7303854f.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/f/e/1/1e2b5f662adfe44509fdba0b6af2ed348d66e.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/3/b/d/3d721b703d47a0fe0e988aa442a990368e661.jpg",height:1012,width:1800,origFilename:"perspectoveBlob.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/e/1/1e2b5f662adfe44509fdba0b6af2ed348d66e.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/3/1/02d3e126ab7f9ded1891e75ebd8ded0c63225.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/e/e/e6c9e6cbc64d9caf2405d50d4bdc69efbd9a5.jpg",height:1012,width:1800,origFilename:"black.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/3/1/02d3e126ab7f9ded1891e75ebd8ded0c63225.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/a/9/6/7a7b9e3b37eaf153ad6a68829de8703cbb430.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/d/d/d/0fdf8335bfd1c0ae8d27937e9d85c7fd70c0e.jpg",
height:1012,width:1800,origFilename:"gradient-black01.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/a/9/6/7a7b9e3b37eaf153ad6a68829de8703cbb430.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/5/9/0bb69b718cf1fcbbc88454e2e8954faf5a04a.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/6/8/94dfd5316084eeb5f6b5f924c97a74f9f3ea6.jpg",height:1012,width:1800,origFilename:"gradient-black02.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/5/9/0bb69b718cf1fcbbc88454e2e8954faf5a04a.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/b/c/f/4b2d125cc3907c2d54d622313ad4e0a8b7ce0.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/4/a/4/5581df135c64b38126541387ffa744f4d6ce8.jpg",height:1012,width:1800,origFilename:"gradient-black03.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/b/c/f/4b2d125cc3907c2d54d622313ad4e0a8b7ce0.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/2/c/d6c7e2737db121aa045dd91cd4f88fa2d637d.jpg",
url:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/6/0/33e89cdf705ed156b05c76baa682990782558.jpg",height:1012,width:1800,origFilename:"gradient-white01.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/2/c/d6c7e2737db121aa045dd91cd4f88fa2d637d.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/e/d/5/d8413b85fd4c4da4bc7dd945277a739d2e954.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/b/5/a0e0859cbbdcae59e6b8c363f545a3a2a75f1.jpg",height:1012,
width:1800,origFilename:"gradient-white02.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/d/5/d8413b85fd4c4da4bc7dd945277a739d2e954.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/2/8/e/53ba1e0f20a1e8acaba8f68420d0f2413cee7.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/1/f/e/b3b697577db3da4a2c77f94bb7d2d671fec5b.jpg",height:1012,width:1800,origFilename:"gradient-white03.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/2/8/e/53ba1e0f20a1e8acaba8f68420d0f2413cee7.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/c/3/7/ee28338cdad86e6524207fbf2496b1d9ce33e.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/0/1/c/7b64f6b6086b507f9993c70b606df23e1d096.jpg",height:1012,width:1800,origFilename:"grey01.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/3/7/ee28338cdad86e6524207fbf2496b1d9ce33e.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/e/e/7/8886f4846bc91e95f8b5d84622788a18dd7ab.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/f/c/e/edbd964bcf8dc9b62bee2ab633826ead15b2d.jpg",
height:1012,width:1800,origFilename:"grey02.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/e/e/7/8886f4846bc91e95f8b5d84622788a18dd7ab.jpg"},{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/9/c/8/1f4f2f41291b7691093f70905f76990cd7767.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/c/d/5/21f2b008125e5880326716f8dc0f2a7e4772f.jpg",height:1012,width:1800,origFilename:"grey03.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/9/c/8/1f4f2f41291b7691093f70905f76990cd7767.jpg"},
{thumbnail_url:"https://s3.amazonaws.com/0103.static.prezi.com/media/5/5/8/dae8fa47de79ed8587ce63986579e4742a7df.jpg",url:"http://0103.static.prezi.com.s3.amazonaws.com/media/8/a/0/75c982a39cf6424eb9bdac633cd2d5093504d.jpg",height:1012,width:1800,origFilename:"white.jpg",id:"http://0103.static.prezi.com.s3.amazonaws.com/media/5/5/8/dae8fa47de79ed8587ce63986579e4742a7df.jpg"}].map((a)=>{a.thumbnail_url=R.rewriteUrl(a.thumbnail_url,!1);a.url=R.rewriteUrl(a.url,!1);a.id=R.rewriteUrl(a.id,!1);return a});
var C={};Object.defineProperty(C,"__esModule",{value:!0});var Ha=r.base.BackgroundLayerType,D;(function(a){a.fit="fit";a.fill="fill";a.notAlign="notAlign"})(D=C.BackgroundAlignKind||(C.BackgroundAlignKind={}));class Ia{constructor(a,b){this.session=a;this.externalAssetProvider=b}getThumbnailUrl(a,b){const c=this.getAvailableBackgrounds().find((b)=>b.url===a);return null!=c?c.thumbnail_url:R.rewriteUrl(b)}changeBackground(a,b,c,d){var e=this.getAvailableBackgrounds();const f=e.findIndex((b)=>b.url===
a);e=-1===f?e[0]:e[(f+1)%e.length];this.applyBackground(R.rewriteUrl(e.url),b,c,d);l.avro.Avro.createDefaultLogger().logRemixBackground({background_id:this.getId(e.origFilename)})}applyBackground(a,b,c,d,e){const f=this.session.document.progressiveAssetManager.uploadImage(a);b.doAsync(f.tokenWithSize,(a,b)=>{a.isValid()&&this.session.document.executeApiCommand(a,{name:"Set and Fit Background",run:(a)=>{const g=d.hasBackgroundImage&&d.alignToOverviewStatus!==D.notAlign?d.alignToOverviewStatus:D.fill,
h=a.background;h.layerType=Ha.opaque;this.removeLayers(h);h.add.layer(b);this.align(a,g,c);e&&f.finished.then((a)=>{this.externalAssetProvider.registerAsset({provider:e.provider,assetId:e.assetId,mediaUrl:a.url,preziOid:this.session.document.preziMetaData.preziOid}).catch(()=>!0)});l.avro.Avro.createDefaultLogger().logSelectBackgroundImage({background_id:this.getId(f.token.assetSourceFilename)})}})}).catch(()=>{})}getAlignToOverviewStatus(a){if(0===a.background.layers.length)return D.notAlign;const b=
(b)=>a.background.layers.every((c)=>this.getTargetLayoutBox(a,b,c).sameAs(c.layoutBox,1E-5));return b(D.fill)?D.fill:b(D.fit)?D.fit:D.notAlign}isParallax(a){a=a.layers;return 0===a.length?null:0!==a[0].depth}align(a,b,c){this.setParallax(a,c);this.alignToOverview(a,b)}setParallax(a,b){const c=this.getOverviewScale(a);a.background.layers.forEach((a,e)=>{const d=2.2/c*Math.pow(5,e);a.depth=b?(e+1)*c:0;a.fadeScale=d})}getOverviewScale(a){const b=this.session.positionFinder.getWorldReferenceFrame();return a.overview.zoomLayoutBox.withReferenceFrame(b).size.height/
768}getTargetLayoutBox(a,b,c){const d=c.depth,e=a.overview.zoomLayoutBox;a=0===d?e:e.scale(1.3*(1+d/this.getOverviewScale(a)));switch(b){case D.fit:return c.layoutBox.fitIntoOther(a);case D.fill:return c.layoutBox.fillOther(a);case D.notAlign:return null;default:w.Utils.assertNever(b,`Unknown align: ${b}`)}}alignToOverview(a,b){if(b!==D.notAlign)for(const c of a.background.layers)c.fitInto(this.getTargetLayoutBox(a,b,c))}removeLayers(a){a.layers.forEach((a)=>a.delete())}getId(a){a=null!=a?a.split("."):
[];return 0<a.length?a[0]:null}getAvailableBackgrounds(){return ka.hardCodedFreeImages}}C.BackgroundController=Ia;var U={getDefaultBackgroundState:function(){return{sidebarOpen:!1,isOverview:!1,anySelected:!1,search:{term:null,page:0},images:[],recommendedImages:null,progress:e.ListProgress.idle,hasError:!1,fills:null,userCanSearch:!1,backgroundId:null,backgroundUrl:null,shuffledFreeBackgrounds:null,searchText:"",aspectRatio:r.base.AspectRatioSpecification.SmallScreen,backgroundParallax:!0,backgroundLayout:{hasBackgroundImage:!1},
backgroundThumbnailBase64Url:"",multiLayerBackground:!1}}},ta=this&&U.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,f){function g(a){try{m(d.next(a))}catch(q){f(q)}}function h(a){try{m(d["throw"](a))}catch(q){f(q)}}function m(a){a.done?c(a.value):e(a.value).then(g,h)}m((d=d.apply(a,b||[])).next())})};Object.defineProperty(U,"__esModule",{value:!0});const V=[{ar:r.base.AspectRatioSpecification.SmallScreen,text:f.I18n.ts("4:3")},
{ar:r.base.AspectRatioSpecification.WideScreen,text:f.I18n.ts("16:9")},{ar:r.base.AspectRatioSpecification.WideScreenWithoutLetterBox,text:f.I18n.ts("Off")}];U.BackgroundPart=class{constructor(a,b,c,d){this.session=b;this.uiRoot=c;this.getBrandKitPart=d;this.externalAssetProvider=ba.ExternalAssetProviderModule.getExternalAssetProvider(a);this.backgroundController=new C.BackgroundController(this.session,this.externalAssetProvider);this.common=new k.Common(this.uiRoot);a.onCurrentTopicChange((a)=>{const b=
this.session.document.read((a)=>a.overview.id);(a=a===b)?this.setState({isOverview:a}):(this.uiRoot.sidebar.close("background-image-sidebar"),this.setState({sidebarOpen:!1,isOverview:a}))});a.onSelectionChange((a)=>{this.setState({anySelected:0<a.allObjects.length})});a.onDocumentChange(()=>{this.session.document.read((a)=>{var b,c=a.aspectRatio;const d=1<a.background.layers.length;let e,f=null;var g=null;0<a.background.layers.length?(g=a.background.layers[0].asset,e={hasBackgroundImage:!0,alignToOverviewStatus:this.backgroundController.getAlignToOverviewStatus(a)},
f=g.assetSourceFilename,g=g.url):e={hasBackgroundImage:!1};let k;c.width/c.height===16/9?(k={width:232,height:130},c=a.letterBoxing?r.base.AspectRatioSpecification.WideScreen:r.base.AspectRatioSpecification.WideScreenWithoutLetterBox):(c=r.base.AspectRatioSpecification.SmallScreen,k={width:174,height:130});this.setState({fills:a.background.fills,aspectRatio:c,backgroundParallax:null!==(b=this.backgroundController.isParallax(a.background))&&void 0!==b?b:!0,backgroundLayout:e,multiLayerBackground:d,
backgroundId:f,backgroundUrl:g});this.session.snapshot(a.overview.zoomLayoutBox,k,!0,[]).then((a)=>this.setState({backgroundThumbnailBase64Url:a.toDataURL()}))})});a.onLicenseChange((a)=>{a=v.isActive("js-background-image-plugin-force-no-paywall")||!v.isActive("js-background-image-plugin-force-paywall")&&null!=a&&a.featureSet.pitchBackgroundImageIntegration;this.setState({userCanSearch:a});this.initSidebar()})}declareUI(a){const b=this.uiRoot.getState(),c=!b.runOnDesktop&&b.isNetworkOffline,d=this.getState();
this.createThemeMenuItem(a);a.createSidebar("background-image-sidebar",(a)=>this.createSidebarArgs(a,d,c));d.isOverview&&!d.anySelected&&a.createMenuItem(this.createContextMenuItemArgs());this.createWarningDialog(a)}getState(){return this.uiRoot.getState().backgroundState}setState(a){const b=this.getState();this.uiRoot.setState({backgroundState:Object.assign(Object.assign({},b),a)})}createWarningDialog(a){const b=f.I18n.ts("This presentation was converted from Prezi Classic and uses an effect called \u201c3D backgrounds\u201d that will be lost if you change it using Prezi Present.");
a.dialog.medium((a)=>({id:"warning-background-change-dialog",title:f.I18n.ts("WAIT! Read this before you change your background."),content:[a.label(b)],footer:(a)=>[a.button({color:e.ButtonColor.Red,id:"apply-background-change",content:{text:f.I18n.ts("Yes, upgrade background")},onClick:(a)=>{this.action(a);this.uiRoot.dialog.hide("warning-background-change-dialog")}}),a.button({color:e.ButtonColor.Ghost,id:"cancel-background-change",content:{text:f.I18n.ts("No, keep 3D background")},onClick:()=>
{this.uiRoot.dialog.hide("warning-background-change-dialog")}})],onCloseButtonClicked:()=>{this.uiRoot.dialog.hide("warning-background-change-dialog")}}))}createContextMenuItemArgs(){return{kind:e.MenuItemKind.context,id:"background-image",title:f.I18n.ts("Change background"),weight:31,onClick:(a)=>this.toggleSidebar(a),enabled:!0}}createThemeMenuItem(a){a.createTopMenuItem(e.TopMenuId.Style,{id:"topmenu-theme-item-background",kind:e.MenuItemKind.largeButton,enabled:!0,weight:1,title:f.I18n.ts("Background"),
icon:u.IconSmallId.Screen,onClick:(a)=>{l.avro.Avro.createDefaultLogger().logClickTabMenuItem({tab_menu_item:"BACKGROUND"});this.toggleSidebar(a)}})}openSidebar(a){this.initSidebar();l.avro.Avro.createDefaultLogger().logShowBackgroundAndThemeOptions();this.session.document.read((b)=>{this.session.navigation.flyTo(a,b.overview)});this.uiRoot.sidebar.open("background-image-sidebar");this.setState({sidebarOpen:!0})}toggleSidebar(a){const {sidebarOpen:b}=this.getState();this.initSidebar();b?l.avro.Avro.createDefaultLogger().logCloseBackgroundAndThemeSidebar():
(l.avro.Avro.createDefaultLogger().logShowBackgroundAndThemeOptions(),this.session.document.read((b)=>{this.session.navigation.flyTo(a,b.overview)}));this.uiRoot.sidebar.toggle("background-image-sidebar");this.setState({sidebarOpen:!b})}initSidebar(){const {recommendedImages:a,userCanSearch:b,shuffledFreeBackgrounds:c}=this.getState();b&&!a&&this.initSearchForImages();if(null==c){const a=this.getShuffledFreeBackgrounds();this.setState({shuffledFreeBackgrounds:a})}}createSidebarArgs(a,b,c){const {userCanSearch:d,
search:{term:e}}=this.getState(),h=[];h.push(...this.createTopSection(a,b,c));h.push(...this.createSearchBarWithUpload(a,d,c));d?h.push(...this.createImageResult(a,e?"background-image-sidebar/result-image-list":"background-image-sidebar/recommended-image-list",c)):(h.push(a.sectionHeader({content:f.I18n.ts("Free images")})),h.push(this.createBackgroundList(a,this.getShuffledFreeBackgrounds(),c)),h.push(a.separator()),h.push(a.sectionHeader({content:f.I18n.ts("Premium images")})),h.push(this.createPremiumImages(a,
c)));return{onClose:()=>{this.setState({sidebarOpen:!1})},onCloseButtonClicked:()=>{l.avro.Avro.createDefaultLogger().logCloseBackgroundAndThemeSidebar()},root:{title:f.I18n.ts("Background"),content:h,footer:[]}}}logCTAOpened(){v.isActive("js-present-editor-brandkit-enabled")&&v.isActive("js-show-brand-kit-paywalls")&&l.avro.Avro.createDefaultLogger().logShownUpgradeToTeamCta({team_upgrade_trigger:"PRESENT_COLOR_PICKER_BACKGROUND"})}createSearchBarWithUpload(a,b,c){const {searchText:d}=this.getState(),
g=f.I18n.ts("Search..."),h=(a,c)=>{b?this.initSearchForImages(c):this.openPaywallModal()};return[a.sectionHeader({content:f.I18n.ts("Upload your file")}),a.button(e.ButtonSize.Large,e.ButtonAlign.Start,(a)=>[a.upload({id:"background-upload",color:e.ButtonColor.Gray,content:{text:f.I18n.ts("Upload image")},fileFilter:{allowImage:!0},onClick:()=>{l.avro.Avro.createDefaultLogger().logOpenUploadBackgroundImageDialog()},onFileSelected:(a,{file:b})=>{l.avro.Avro.createDefaultLogger().logInsertBackgroundImage({image_source:"OWN_FILE"});
this.uploadBackgroundImage(a,b)},disabled:c}),a.button({id:"upload-info",color:e.ButtonColor.Ghost,content:{icon:u.IconSmallId.Info},onClick:()=>{const a=f.I18n.ts("https://prez.is/r1sauij/");l.avro.Avro.createDefaultLogger().logOpenFeatureSupportArticle({target_url:a});window.open(a,"_blank_info")},tooltipText:f.I18n.ts("Supported image formats")})]),a.sectionHeader({content:f.I18n.ts("Images by Unsplash")}),a.searchField({id:"search-input-field",onSearchButtonClick:(a)=>h(a,this.getState().searchText),
onEnter:(a)=>h(a,this.getState().searchText),onValueChange:(a,c)=>{this.setState({searchText:c});b&&this.isEmptyString(c)&&h(a,null)},placeholderText:g,value:d,autofocus:!0})].filter((a)=>null!=a)}createImageResult(a,b,c){const {search:{term:d},images:g,progress:h,hasError:m,backgroundId:k}=this.getState();return m?this.createErrorResult(a,()=>{this.initSearchForImages(d)}):this.shouldNoResultBeShown()?[a.illustration(f.I18n.ts("No results"),u.IllustrationLargeLightId.NoResults)]:[a.simpleList((a)=>
({id:b,items:g?g.map((b)=>this.createListItem(a,b,c)):[],itemType:e.ListItemType.large,itemLayout:u.ListItemLayout.dynamic,requestAdditionalItems:()=>this.requestAdditionalItems(),progress:h,flexGrow:0,activeId:k}))]}shuffle(a){a=Array(...a);let b=a.length,c,d;for(;0!==b;)d=Math.floor(Math.random()*b),--b,c=a[b],a[b]=a[d],a[d]=c;return a}getShuffledFreeBackgrounds(){const {shuffledFreeBackgrounds:a}=this.getState();let b=[];return b=null!=a&&0<a.length?a:this.shuffle(this.backgroundController.getAvailableBackgrounds()).slice(0,
16).map((a)=>({thumbnail_url:a.thumbnail_url,url:a.url,id:a.origFilename,height:a.height,width:a.width,origFilename:a.origFilename}))}createBackgroundList(a,b,c){return a.simpleList((a)=>({items:b.map((b)=>a.image({src:{url:b.thumbnail_url},onClick:(a)=>{this.warnIfMultilayerBackground(a,(a)=>{const c=this.getState();this.backgroundController.applyBackground(b.url,a,c.backgroundParallax,c.backgroundLayout);l.avro.Avro.createDefaultLogger().logInsertBackgroundImage({image_source:"SIDEBAR_SEARCH"})})},
disabled:c})),itemType:e.ListItemType.large,itemLayout:u.ListItemLayout.dynamic}))}createPremiumImages(a,b){return a.simpleList((a)=>({items:this.getPremiumBackgrounds().map((c)=>a.lock({src:{url:c.thumbnail_url},tooltipText:f.I18n.ts("Unlock"),onClick:()=>this.openPaywallModal(),disabled:b})),itemType:e.ListItemType.large,itemLayout:u.ListItemLayout.dynamic}))}createListItem(a,b,c){const {backgroundId:d}=this.getState(),e=this.externalAssetProvider.generateImageInfo(b);return a.image({id:b.url,src:{url:b.thumbnail_url},
onClick:(a)=>{d!==b.url&&(l.avro.Avro.createDefaultLogger().logInsertBackgroundImage({image_source:"SIDEBAR_SEARCH"}),this.uploadBackgroundImage(a,b.url,{provider:b.provider,assetId:b.id}))},disabled:c,info:e})}requestAdditionalItems(){return ta(this,void 0,void 0,function*(){const {term:a,page:b}=this.getState().search;this.initSearchForImages(a,b+1)})}initSearchForImages(a=null,b=0){return ta(this,void 0,void 0,function*(){a=a?a.trim():null;var {images:c}=this.getState();c=0===b?[]:c;this.setState({search:{term:a,
page:b},images:c,progress:e.ListProgress.working,hasError:!1});let d,f=!1;try{this.isEmptyString(a)?(d=(yield this.externalAssetProvider.getRelevantImages(ba.Usecase.NEXT_BACKGROUND,b)).assets,0===b&&this.setState({recommendedImages:d})):(l.avro.Avro.createDefaultLogger().logSearchBackgroundImage({search_term:a}),d=(yield this.externalAssetProvider.search(a,b,ba.Orientation.LANDSCAPE)).assets)}catch(h){f=!0,d=[]}this.setState({images:c.concat(d),progress:0===d.length?e.ListProgress.finished:e.ListProgress.idle,
hasError:f})})}openPaywallModal(){this.uiRoot.dialog.showBuiltIn(e.BuiltinDialog.upgradeLicenseImageSearch)}uploadBackgroundImage(a,b,c){this.warnIfMultilayerBackground(a,(a)=>{const d=this.getState();this.backgroundController.applyBackground(b,a,d.backgroundParallax,d.backgroundLayout,c)})}createErrorResult(a,b){return[a.illustration(f.I18n.ts("Something went wrong"),u.IllustrationLargeLightId.Error),a.button(e.ButtonSize.Small,e.ButtonAlign.Center,(a)=>[a.button({id:"image-search-try-again",color:e.ButtonColor.Ghost,
content:{text:f.I18n.ts("Try again")},onClick:b})])]}shouldNoResultBeShown(){const {progress:a,images:b}=this.getState();return a===e.ListProgress.working?!1:b&&0===b.length}isEmptyString(a){return!a||0===a.trim().length}backgroundLayoutLabel(){const a=this.getState();if(null!=a.backgroundLayout&&a.backgroundLayout.hasBackgroundImage)switch(a.backgroundLayout.alignToOverviewStatus){case C.BackgroundAlignKind.notAlign:return f.I18n.ts("Custom");case C.BackgroundAlignKind.fill:return f.I18n.ts("Fill");
case C.BackgroundAlignKind.fit:return f.I18n.ts("Fit");default:w.Utils.assertNever(a.backgroundLayout.alignToOverviewStatus)}else return f.I18n.ts("Fill")}warnIfMultilayerBackground(a,b){this.getState().multiLayerBackground?(this.uiRoot.dialog.show("warning-background-change-dialog"),this.action=b):b(a)}createTopSection(a,b,c){var d=this.uiRoot.getState();const g=v.isActive("js-present-editor-brandkit-enabled")&&v.isActive("js-show-brand-kit-paywalls")?S.BrandKitCTA.sul:"infoSection"===d.brandkitSectionState&&
d.canEditBrandKit?S.BrandKitCTA.canEditTeam:"infoSection"!==d.brandkitSectionState||d.canEditBrandKit?S.BrandKitCTA.none:S.BrandKitCTA.canNotEditTeam;d=[{id:"revert-background-button",onClick:(a)=>this.warnIfMultilayerBackground(a,(a)=>this.handleRevertToOriginal(a)),title:f.I18n.ts("Revert to original"),icon:u.IconSmallId.Replay,enabled:!c}];b.backgroundLayout.hasBackgroundImage&&d.push({id:"remove-background-button",onClick:(a)=>this.warnIfMultilayerBackground(a,(a)=>this.handleRemoveBackground(a)),
title:f.I18n.ts("Remove image"),icon:u.IconSmallId.Trash,enabled:!c});return[a.image({id:"background-thumbnail",src:b.backgroundThumbnailBase64Url,actions:d,hasBorder:!0}),a.separator(),a.button(e.ButtonSize.Small,e.ButtonAlign.Justified,(a)=>[a.label(f.I18n.ts("Background color")),a.popupButton((a)=>({id:"color-picker",color:e.ButtonColor.Ghost,text:f.I18n.ts("Background color"),content:{fills:Object.assign(Object.assign({},b.fills),{canPickClearFill:!0})},hideArrow:!0,disabled:c,onOpen:()=>this.logCTAOpened(),
popupContent:[...S.createBrandKitColorCTA(a,g,"PRESENT_COLOR_PICKER_BACKGROUND"),a.colorPicker({id:"color-picker-picker",fills:b.fills,showColorWheel:!0,expanded:!0,onChange:(a,b)=>{if(b.isFinal){const c=new k.SyncBrandKitAction((a)=>{a.background.fill=b.newFill});this.common.manageBrandRelatedChange({kind:k.WarnActionKind.token,action:c,uat:a,session:this.session,condition:()=>{var a;const b=this.uiRoot.getState(),c=null===(a=b.brandInDocument)||void 0===a?void 0:a.brandId;return null!=c&&null!=
b.colorStyleState.brandkitSchemeList.find((a)=>a.id===c)}},()=>this.getBrandKitPart())}else this.setState({fills:b.fills})}})]}))]),a.button(e.ButtonSize.Small,e.ButtonAlign.Justified,(a)=>[a.label(f.I18n.ts("Background parallax")),a.checkbox({id:"toggle-parallax",checked:b.backgroundParallax,isToggleSwitch:!0,disabled:c||!b.backgroundLayout.hasBackgroundImage,tooltipText:f.I18n.ts("Turn on or off background motion when panning or navigating between topics"),onCheck:(a,b)=>{this.warnIfMultilayerBackground(a,
(a)=>this.setParallax(a,b))}})]),a.button(e.ButtonSize.Small,e.ButtonAlign.Justified,(a)=>[a.label(f.I18n.ts("Image fit")),a.comboMenuButton((a)=>({id:"fit-fill-background-menubutton",color:e.ButtonColor.Ghost,content:{text:this.backgroundLayoutLabel()},disabled:c||!b.backgroundLayout.hasBackgroundImage,actions:[a.menuItem({id:"fit-background-action",onClick:(a)=>this.fitBackgroundToOverview(a),enabled:!0,title:f.I18n.ts("Fit")}),a.menuItem({id:"fill-background-action",onClick:(a)=>this.fillBackgroundToOverview(a),
enabled:!0,title:f.I18n.ts("Fill")})],onClick:(a)=>{if(b.backgroundLayout.hasBackgroundImage)switch(b.backgroundLayout.alignToOverviewStatus){case C.BackgroundAlignKind.fit:case C.BackgroundAlignKind.notAlign:this.fillBackgroundToOverview(a);break;case C.BackgroundAlignKind.fill:this.fitBackgroundToOverview(a);break;default:w.Utils.assertNever(b.backgroundLayout.alignToOverviewStatus)}}}))]),a.button(e.ButtonSize.Small,e.ButtonAlign.Justified,(a)=>[a.label(f.I18n.ts("Screen ratio")),a.comboMenuButton((a)=>
({id:"screen-ratio-menubutton",color:e.ButtonColor.Ghost,disabled:c,content:{text:V.find((a)=>a.ar===b.aspectRatio).text},actions:V.map((b)=>a.menuItem({id:b.ar,onClick:(a)=>this.setAspectRatio(a,b.ar),title:b.text})),onClick:(a)=>this.setAspectRatio(a,V[(V.findIndex((a)=>a.ar===b.aspectRatio)+1)%V.length].ar)}))]),a.separator()]}animateBackground(a,b,c){a.animated(a.background.layers,()=>{this.backgroundController.align(a,b,c)})}fillBackgroundToOverview(a){this.session.document.executeApiCommand(a,
{name:"fit-background-to-overview",run:(a)=>{l.avro.Avro.createDefaultLogger().logFitBackgroundImageToOverview();const b=this.getState().backgroundParallax;this.animateBackground(a,C.BackgroundAlignKind.fill,b);l.avro.Avro.createDefaultLogger().logSelectBackgroundFitOption({image_fit_option:"FILL"})}})}fitBackgroundToOverview(a){this.session.document.executeApiCommand(a,{name:"fit-background-to-overview",run:(a)=>{const b=this.getState().backgroundParallax;this.animateBackground(a,C.BackgroundAlignKind.fit,
b);l.avro.Avro.createDefaultLogger().logSelectBackgroundFitOption({image_fit_option:"FIT"})}})}setParallax(a,b){this.session.document.executeApiCommand(a,{name:"set-parallax",run:(a)=>{const c=this.getState();c.backgroundLayout.hasBackgroundImage&&(this.animateBackground(a,c.backgroundLayout.alignToOverviewStatus,b),l.avro.Avro.createDefaultLogger().logToggleBackgroundParallax({background_parallax_is_active:b}));this.setState({backgroundParallax:b})}})}setAspectRatio(a,b){this.session.document.executeApiCommand(a,
{name:"set aspect ratio",run:(a)=>{l.avro.Avro.createDefaultLogger().logSelectScreenRatioOption({selected_screen_ratio:b===r.base.AspectRatioSpecification.SmallScreen?"FOUR_BY_THREE":b===r.base.AspectRatioSpecification.WideScreenWithoutLetterBox?"OFF":b===r.base.AspectRatioSpecification.WideScreen?"SIXTEEN_BY_NINE":w.Utils.assertNever(b)});a.setAspectRatio(b);const c=this.getState();c.backgroundLayout.hasBackgroundImage&&this.animateBackground(a,c.backgroundLayout.alignToOverviewStatus,c.backgroundParallax);
this.setState({aspectRatio:b})}})}handleRevertToOriginal(a){l.avro.Avro.createDefaultLogger().logRevertBackgroundImage();const b=this.session.document.read((a)=>a.meta.templateInfo);null!==b&&a.doAsync(this.session.document.progressiveAssetManager.getTemplateBackground(b),(a,b)=>{a.isValid()&&this.session.document.executeApiCommand(a,{name:"revert-background",run:(a)=>{this.backgroundController.removeLayers(a.background);a.background.layerType=b.layerType;for(const c of b.layers){const b=a.background.add.layer(c.asset);
b.depth=c.depth;b.fadeScale=c.fadeScale;b.filterStyle=c.filterStyle;b.fitInto(c.layoutBox)}}})}).catch(()=>{})}handleRemoveBackground(a){this.session.document.executeApiCommand(a,{name:"remove-background",run:(a)=>{l.avro.Avro.createDefaultLogger().logRemoveBackgroundImage();this.backgroundController.removeLayers(a.background)}})}getPremiumBackgrounds(){const a=[];for(let b=1;16>=b;b++)a.push({id:`premium-background-${b}`,thumbnail_url:t.getResourceUrl(`premium-backgrounds/Background${b}.jpg`),url:t.getResourceUrl(`premium-backgrounds/Background${b}.jpg`)});
return a}};var n={};Object.defineProperty(n,"__esModule",{value:!0});(function(a){a.Add="Add";a.Edit="Edit";a.None="None"})(n.SchemeCustomizerMode||(n.SchemeCustomizerMode={}));class Ja{init(a){this.uiRoot=a.declareUI({hasPremium:!1,brandkitSectionState:"noBrandkitSection",openedSidebar:null,isNetworkOffline:!1,colorStyleState:z.getDefaultColorStyleState(),textStyleState:x.getDefaultTextStyleState(),watermarkState:(new Q.WatermarkPartStateHandler(this.session,this.userSettings)).getDefaultWatermarkState(),
brandKitState:F.getDefaultBrandKitState(this.session),brandInDocument:this.session.document.read((a)=>a.brandKit),backgroundState:U.getDefaultBackgroundState(),possibleExternalBrandKitInDocument:!0,isBrandKitDefinedForOtherProducts:!1,canEditBrandKit:!1,isTeamAdmin:!1,teamAdminEmail:"",runOnDesktop:a.runOnDesktop()},(a,c)=>{this.colorStylePart.declareUI(c);this.textStylePart.declareUI(c);this.watermarkPart.declareUI(c);this.brandKitPart.declareUI(c);this.backgroundKitPart.declareUI(c)});v.isActive("js-force-brandkit-onboarding")&&
setTimeout(()=>{this.brandKitPart.setNextOnboardingStep("start")},0);this.common=new k.Common(this.uiRoot);this.watermarkPart=new Q.WatermarkPart(a,this.session,this.uiRoot,this.userSettings,()=>this.brandKitPart);this.textStylePart=new x.TextStylePart(a,this.session,this.uiRoot,this.pluginAccess,()=>this.brandKitPart);this.colorStylePart=new z.ColorStylePart(a,this.session,this.uiRoot,()=>this.brandKitPart);this.backgroundKitPart=new U.BackgroundPart(a,this.session,this.uiRoot,()=>this.brandKitPart);
this.brandKitPart=new F.BrandKitPart(a,this.pluginAccess,this.session,this.uiRoot,this.userSettings,{watermark:this.watermarkPart,colorStyle:this.colorStylePart,textStyle:this.textStylePart});a.onDocumentChange(()=>{const a=this.session.document.read((a)=>a.brandKit);this.uiRoot.setState({brandInDocument:a});const c=this.uiRoot.getState().brandKitState.organizationId;null!=c&&this.uiRoot.setState({possibleExternalBrandKitInDocument:c!==(null===a||void 0===a?void 0:a.ownerId)})});a.onNetworkStatusChange((a)=>
{this.uiRoot.setState({isNetworkOffline:a===e.NetworkStatus.Offline})})}processMessage(a){switch(a.kind){case A.StyleMessageKind.simple:switch(a.value){case A.StyleMessageValue.editBrandScheme:this.colorStylePart.editBrandScheme();break;case A.StyleMessageValue.openColorStyleSidebar:this.common.openSidebar("color-style-sidebar-id");break;case A.StyleMessageValue.openTextStyleSidebar:this.common.openSidebar("text-style-sidebar-id");break;case A.StyleMessageValue.openWatermarkSidebar:this.watermarkPart.toggleSidebar();
break;case A.StyleMessageValue.clickLogo:this.watermarkPart.clickWatermark();break;default:w.Utils.assertNever(a.value)}break;case A.StyleMessageKind.action:"openBackgroundSidebar"===a.body&&a.mat.isValid()?this.backgroundKitPart.openSidebar(a.mat):"openColorStyleSidebar"===a.body&&this.common.openSidebar("color-style-sidebar-id");break;default:w.Utils.assertNever(a)}}}n.StylePlugin=Ja;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.lazyModule={createPlugin(){return new n.StylePlugin}};
return la});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_style",["require","prezi.geometry","prezi_brand_kit_cta","prezi_brandkitprovider","prezi_cet_model_editor","prezi_editor_commander","prezi_editor_store_ui","prezi_externalassetprovider","prezi_featureswitcher","prezi_font_provider","prezi_i18n","prezi_image_color_thief","prezi_logger","prezi_playback","prezi_plugin_api","prezi_plugin_meta","prezi_service_data","prezi_service_fontcatalogue","prezi_styleschemeprovider","prezi_textstyleprovider","prezi_utils","prezi_widgets"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_style.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi.geometry"),require("prezi_brand_kit_cta"),require("prezi_brandkitprovider"),require("prezi_cet_model_editor"),require("prezi_editor_commander"),require("prezi_editor_store_ui"),require("prezi_externalassetprovider"),require("prezi_featureswitcher"),require("prezi_font_provider"),require("prezi_i18n"),require("prezi_image_color_thief"),require("prezi_logger"),require("prezi_playback"),require("prezi_plugin_api"),require("prezi_plugin_meta"),require("prezi_service_data"),require("prezi_service_fontcatalogue"),require("prezi_styleschemeprovider"),require("prezi_textstyleprovider"),require("prezi_utils"),require("prezi_widgets"));}else{this["prezi_style"]=__factory(this["prezi.geometry"],this["prezi_brand_kit_cta"],this["prezi_brandkitprovider"],this["prezi_cet_model_editor"],this["prezi_editor_commander"],this["prezi_editor_store_ui"],this["prezi_externalassetprovider"],this["prezi_featureswitcher"],this["prezi_font_provider"],this["prezi_i18n"],this["prezi_image_color_thief"],this["prezi_logger"],this["prezi_playback"],this["prezi_plugin_api"],this["prezi_plugin_meta"],this["prezi_service_data"],this["prezi_service_fontcatalogue"],this["prezi_styleschemeprovider"],this["prezi_textstyleprovider"],this["prezi_utils"],this["prezi_widgets"]);}}).call(this);