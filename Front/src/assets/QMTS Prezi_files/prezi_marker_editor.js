;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_marker_editor";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi_cet_model_editor":dependencies[0],"prezi_i18n":dependencies[1],"prezi_logger":dependencies[2],"prezi_plugin_api":dependencies[3],"prezi_widgets":dependencies[4]}};})());};})(arguments);var moduleImpl=(function(){return module(function(c){var h=c.dependencies.prezi_plugin_api,e=c.dependencies.prezi_widgets,f=c.dependencies.prezi_cet_model_editor,g=c.dependencies.prezi_i18n,k=c.dependencies.prezi_logger,d={};Object.defineProperty(d,"__esModule",{value:!0});var l=f.base.editorIs,m=f.base.readerIs;d.MarkerEditorPlugin=class{init(a){const b=a.declareUI({displayPropertyBar:!1,fill:null},(a,c)=>{this.createPropertyBar(c,a,b)});a.onSelectionChange((a)=>{0<a.allObjects.length?this.updateState(b):b.setState({displayPropertyBar:!1})})}createPropertyBar(a,
b,c){b.displayPropertyBar&&a.createPropertyBarItem((a)=>a.colorPicker({id:"marker-editor-color",groupWeight:1,weight:1,tooltip:g.I18n.ts("Fill color"),title:g.I18n.ts("Fill color"),showThemeColors:!0,icon:h.IconSmallId.FillColor,fills:b.fill,onChange:(a,b)=>{const d=b.source;b.isFinal&&(this.session.document.executeApiCommand(a,{name:"Change marker fill",run:(a)=>{this.session.selection.getSelectionInfo(a).allObjects.filter(l(f.base.ObjectKind.marker)).forEach((a)=>{a.fill=b.newFill.color;d!==e.ColorPickerChangeSource.opacitySlider&&
d!==e.ColorPickerChangeSource.opacityNumericField||this.logMarkerOpacityChanges(a,d)})}}),this.updateState(c))}}))}logMarkerOpacityChanges(a,b){b=b===e.ColorPickerChangeSource.opacitySlider?"CHANGE_OPACITY_SLIDER":"CHANGE_OPACITY_INPUT_VALUE";k.avro.Avro.createDefaultLogger().logModifiedObject({object_type:a,modify_action:b,topic_relationship:a,object_id:a.id})}updateState(a){this.session.document.read((b)=>{b=this.session.selection.getReadonlySelectionInfo(b);const c=b.allObjects.filter(m(f.base.ObjectKind.marker));
0<c.length&&c.length===b.allObjects.length?a.setState({displayPropertyBar:!0,fill:{hasAlpha:!0,current:e.FillKind.solid,solidFill:{fillKind:e.FillKind.solid,color:c[0].fill}}}):a.setState({displayPropertyBar:!1})})}};c={};Object.defineProperty(c,"__esModule",{value:!0});c.lazyModule={createPlugin(){return new d.MarkerEditorPlugin}};return c});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_marker_editor",["require","prezi_cet_model_editor","prezi_i18n","prezi_logger","prezi_plugin_api","prezi_widgets"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_marker_editor.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi_cet_model_editor"),require("prezi_i18n"),require("prezi_logger"),require("prezi_plugin_api"),require("prezi_widgets"));}else{this["prezi_marker_editor"]=__factory(this["prezi_cet_model_editor"],this["prezi_i18n"],this["prezi_logger"],this["prezi_plugin_api"],this["prezi_widgets"]);}}).call(this);