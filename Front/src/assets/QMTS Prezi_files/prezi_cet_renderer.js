;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_cet_renderer";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.engine.dom":dependencies[0],"prezi.geometry":dependencies[1],"prezi_bacon":dependencies[2],"prezi_cet_model":dependencies[3],"prezi_editor_error":dependencies[4],"prezi_featureswitcher":dependencies[5],"prezi_logger":dependencies[6],"prezi_pdf_render":dependencies[7],"prezi_service_assetloader":dependencies[8],"prezi_service_http":dependencies[9],"prezi_textmodel":dependencies[10],"prezi_utils":dependencies[11]}};})());};})(arguments);var moduleImpl=(function(){return module(function(B){function Ba(a,b,c,d,e){const f=b.width/c.getScale();b=b.height/c.getScale();const h=.5*f,m=.5*b;a=a.createCamera();a.setPosition({x:d?h:c.getTranslation().x,y:d?-m:c.getTranslation().y,z:0});a.setRotation(d?0:-c.getRotationDeg());a.setOrtho(-h,h,m,-m,-5E4,5E4);try{return e(a,{x:f,y:b})}finally{a.delete()}}var Db=null,ub=B.dependencies["prezi.engine.dom"],vb=B.dependencies.prezi_bacon,Eb=B.dependencies.prezi_editor_error,S=B.dependencies.prezi_featureswitcher,wb=B.dependencies.prezi_pdf_render,
xb=B.dependencies.prezi_service_http,Y=B.dependencies.prezi_textmodel,g=B.dependencies.prezi_cet_model,k=B.dependencies["prezi.geometry"],J=B.dependencies.prezi_logger,v=B.dependencies.prezi_utils,r={};Object.defineProperty(r,"__esModule",{value:!0});r.BoundCalculation=class{static getTopicParentId(a){if(null==a)return null;var b=a.get(g.CetModel.ID.TOPIC_CHILD.CHILD_PARENT);if(null==b||0>b.length)return null;a=a.getEntityList();b=a.getEntityById(b[0]).get(g.CetModel.ENTITY_OWNER_ID());return null==
b?null:a.getEntityById(b).get(g.CetModel.ENTITY_OWNER_ID())}static getDefaultLocalBounds(a){const b=a.getEntityList().getNumberOfEntities();for(let c=0;c<b;++c){const b=a.getEntityList().getAt(c);if(b.isDef(g.CetModel.ID.PREZI))return a=g.CetModel.parseAspectRatio(b.getWrapper(g.CetModel.ID.PREZI.W).getAspectRatio()),k.Geometry.rectangleFromData({x:-a.width/2,y:-a.height/2,width:a.width,height:a.height})}throw Error("cannot find prezi entity");}static getWorldBounds_internal(a){return a.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)?
(a=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().getEntity(),r.BoundCalculation.getWorldBoundsFromHasPosition(a)):r.BoundCalculation.getWorldBoundsLegacy(a)}static getWorldBoundsLegacy(a){a=a.getUntypedComponent(n.CetRendererInternal.getWorldGeometryComponentKey(),!1);return null!=a?a.getWorldBounds():null}static getWorldBoundsFromHasPosition(a){const b=a.getWrapper(g.CetModel.ID.HAS_POSITION.W).getPosition();if(null!=b&&b.is(g.CetModel.ID.ABSOLUTE))return a=r.BoundCalculation.getDefaultLocalBounds(a),
k.Geometry.obbFromRect(a.getData()).transform(b.getLocalToWorld());throw Error("Bounds is not set in entity: "+a.getId());}static isImplicitPosition(a){return a.getWrapper(g.CetModel.ID.HAS_POSITION.W).getPosition().is(g.CetModel.ID.WRAP_CHILDREN_NO_BASELINE)}static calculateWorldZoomObb_killme(a){const b=a.getEntityList();if(a.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)){const c=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().getEntity();return c.isDef(g.CetModel.ID.HAS_TOPIC_CHILDREN)?r.BoundCalculation.isImplicitPosition(c)?
r.BoundCalculation.calculateWorldZoomObb_wrapChildrenNoBaseline(a):r.BoundCalculation.getWorldBoundsFromHasPosition(c):r.BoundCalculation.calculateWorldZoomObb_killme(b.getEntityById(r.BoundCalculation.getTopicParentId(a)))}return r.BoundCalculation.getWorldBoundsLegacy(a)}static getBaselineId(a){a=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().getEntity();return a.isDef(g.CetModel.ID.PLANET_CHAPTER)&&(a=a.getWrapper(g.CetModel.ID.PLANET_CHAPTER.W).getSmartStructure().getEntity(),a.isDef(g.CetModel.ID.LINEAR_SMART_STRUCTURE))?
a.getWrapper(g.CetModel.ID.LINEAR_SMART_STRUCTURE.W).getBaseline():null}static calculateWorldZoomObb_wrapChildrenNoBaseline(a){var b=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().getEntity(),c=b.getWrapper(g.CetModel.ID.HAS_TOPIC_CHILDREN.W);const d=[this.getBaselineId(a)];c.getTopicChildren().forEach((a)=>{a.getBehaviour().is(g.CetModel.ID.COVER)&&d.push(a.getChild())});c=r.BoundCalculation.getDescendantEntities_killme([a.getId()],a.getEntityList()).filter((b)=>{const c=a.getEntityList().getEntityById(b);
let e=!0;c.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)&&(c.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().getEntity().isDef(g.CetModel.ID.STACK_CHAPTER)||(e=!1));return 0>d.indexOf(b)&&e});var e=null;if(0<c.length){e=a.getEntityList().getEntityById(c[0]);e=r.BoundCalculation.getWorldBounds_internal(e);var {x:f,y:h}=e.getCenter();b=b.getWrapper(g.CetModel.ID.HAS_POSITION.W).getPosition().getEntity().getWrapper(g.CetModel.ID.WRAP_CHILDREN_NO_BASELINE.W).getRotationRad();e=k.Geometry.obbFromData(f,
h,1,1,180*b/Math.PI)}return null!=e?c.map((b)=>a.getEntityList().getEntityById(b)).reduce((a,b)=>{b=r.BoundCalculation.getWorldBounds_internal(b);return null!=b?a.union(b):a},e):k.Geometry.obbFromPoints({x:-1,y:-1},{x:1,y:1})}static getDescendantEntities_killme(a,b){let c=[];for(let d of a)if(a=b.getEntityById(d),null!=a&&a.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)){const d=this.getBaselineId(a);a=r.BoundCalculation.getChildrenIds_killme(a).filter((a)=>a!==d);0!==a.length&&(c=c.concat(a),c=c.concat(r.BoundCalculation.getDescendantEntities_killme(a,
b)))}return c}static getChildrenIds_killme(a){const b=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic();if(b.is(g.CetModel.ID.PLANET_CHAPTER)||b.is(g.CetModel.ID.STACK_CHAPTER)){let a=[];b.getTopicChildren().forEach((b)=>{b.getBehaviour().is(g.CetModel.ID.COVER)||a.push(b.getChild())});return a}if(b.is(g.CetModel.ID.PAGE))return b.getChildren().items();throw Error("Invalid topic entity "+a.getId());}static addBorderToBounds(a,b){b=0<b.getBorderThickness()?b.getBorderThickness():0;return a.inflate(.5*
b,.5*b)}static addPaddingToBounds(a,b){b=null==b||0===b?1:b;if(1===b)return a;a=a.getData();let c=a.width*b;b*=a.height;return k.Geometry.rectangleFromData({x:a.x-(c-a.width)/2,y:a.y-(b-a.height)/2,width:c,height:b})}static getRectangle(a){let b=a.getWidth();a=a.getHeight();return k.Geometry.rectangleFromData({x:.5*-b,y:.5*-a,width:b,height:a})}static getImageBounds(a){let b;null!=a.getMask()?(a=a.getMask().getData(),b=a.width,a=a.height):(b=a.getWidth(),a=a.getHeight());return k.Geometry.rectangleFromData({x:.5*
-b,y:.5*-a,width:b,height:a})}static tranformMaskRectangle(a,b,c){if(Math.abs(c.width*b.height-b.width*c.height)>3*Math.max(c.width,c.height,b.width,b.height)){var d=Math.min(c.height/a.getHeight(),c.width/a.getWidth());if(isFinite(d)&&0<=d)return b=Math.round(a.getWidth()*d),a=Math.round(a.getHeight()*d),k.Geometry.rectangleFromData({x:(c.width-b)/2,y:(c.height-a)/2,width:b,height:a})}else if(d=Math.min(c.width/b.width,c.height/b.height),isFinite(d)&&0<=d)return k.Geometry.rectangleFromData({x:a.getLeft()*
d+(c.width-b.width*d)/2,y:a.getTop()*d+(c.height-b.height*d)/2,width:Math.round(a.getWidth()*d),height:Math.round(a.getHeight()*d)});return a}static clampMediaAssetDimensions(a){const b=1/Math.max(a.width,a.height);return{width:a.width>=a.height?1:a.width*b,height:a.height>=a.width?1:a.height*b}}};var U={};Object.defineProperty(U,"__esModule",{value:!0});U.BaseComponentKludge=class{constructor(){this.version=0}getVersion(){return this.version}setVersion(a){this.version=a;null!=this.entityOwner&&this.entityOwner.componentChanged(this,
this.isTracked)}incrementVersion(){this.setVersion(g.CetModel.getNextComponentVersion())}ignoreOnCommit(){return!1}dispose(){}setOnEntity(a,b){this.entityOwner=a;this.isTracked=b}createChildComponent(){throw Error("not implemented createChildComponent");}};var z={};Object.defineProperty(z,"__esModule",{value:!0});z.LocalBoundsComponent=class extends U.BaseComponentKludge{constructor(){super()}static KEY(){null==z.LocalBoundsComponent.LOCAL_BOUNDS_KEY&&(z.LocalBoundsComponent.LOCAL_BOUNDS_KEY=g.CetModel.createComponentKey("local_bounds",
!1,!1));return z.LocalBoundsComponent.LOCAL_BOUNDS_KEY}createChildComponent(){let a=new z.LocalBoundsComponent;a.boundsRectangle=this.boundsRectangle;a.zoomBoundsRectangle=this.zoomBoundsRectangle;a.boundingShape=this.boundingShape;a.version=this.version;return a}getGraphicsBounds(){return this.boundsRectangle}getBoundingShape(){return this.boundingShape}getZoomBounds(){return this.zoomBoundsRectangle}setGraphicsBounds(a){this.boundsRectangle=a;this.incrementVersion()}setBoundingShape(a){this.boundingShape=
a;this.incrementVersion()}setZoomBounds(a){this.zoomBoundsRectangle=a;this.incrementVersion()}};var p={};Object.defineProperty(p,"__esModule",{value:!0});const yb=Math.pow(2,-14);p.CurvedLineDataImpl=class{constructor(a,b,c=!1){this.arcHeight=a;this.startEndDistance=b;this.isHidden=c}getArcHeight(){return this.arcHeight}getStartEndDistance(){return this.startEndDistance}getIsHidden(){return this.isHidden}setArcHeight(a){this.arcHeight=a;return this}setStartEndDistance(a){this.startEndDistance=a;return this}setIsHidden(a){this.isHidden=
a;return this}getMaybePDOMId(){return""}getDomType(){return ub.DomType.CURVED_LINE}};p.CurvedLineCalculationImpl=class{constructor(){}inverseSign(a){return this.signum(a.getStartEndDistance())}isInverse(a){return-1===this.inverseSign(a)}getStartAngle(a){let b=-1;!this.isNegativeArcHeight(a)&&Math.abs(this.getArcAngle(a))<Math.PI&&(b=1);this.isNegativeArcHeight(a)&&0>this.getArcAngle(a)&&(b=1);return-b*this.largeArcHeightSign(a)*this.arcHeightSign(a)*(-Math.PI/2+this.arcAngleSign(a)*this.getArcAngle(a))}largeArcHeightSign(a){return this.getRadius(a)<
Math.abs(a.getArcHeight())?-1:1}getArcAngle(a){var b=this.getRadius(a)-Math.abs(a.getArcHeight());if(0===b)return Math.PI/2;b=Math.atan(Math.abs(a.getStartEndDistance())/2/b);return this.isNegativeArcHeight(a)?0<b?Math.PI-b:b:b}getEndAngle(a){let b=1;this.isNegativeArcHeight(a)&&0>this.getArcAngle(a)&&(b=-1);return-b*this.largeArcHeightSign(a)*(-Math.PI/2-this.arcAngleSign(a)*this.getArcAngle(a))}getStartPoint(a){return this.isInverse(a)?{x:this.getEndPointX(a),y:this.getEndPointY(a)}:{x:this.getStartPointX(a),
y:this.getStartPointY(a)}}getClosestAxisAngle(a){let b=Number.POSITIVE_INFINITY,c=null,d=[0,Math.PI/4,Math.PI/2,3*Math.PI/4,Math.PI,-Math.PI,-Math.PI/4,-Math.PI/2,-3*Math.PI/4];for(let e=0;e<d.length;++e){let f=Math.abs(a-d[e]);f<b&&(b=f,c=d[e])}return c}alignLineAngle(a,b,c,d){d=this.getClosestAxisAngle(b.getRotationRad()-d)+d;var e=d-b.getRotationRad();a=c?this.getStartPoint(a):this.getEndPoint(a);a=b.transformPoint(a);a=k.Geometry.fromPoint(a);e=k.Geometry.fromPoint(b.getTranslation()).sub(a).rotate(e).add(a).toPoint();
return k.Geometry.transform2dFromRad(e,b.getScale(),d)}getChordMidPoint(a){let b=k.Geometry.fromPoint(this.getStartPoint(a));a=k.Geometry.fromPoint(this.getEndPoint(a));return b.add(a).mul(.5).toPoint()}getCurveCircleCenter(a){var b=k.Geometry.fromPoint(this.getStartPoint(a));let c=k.Geometry.fromPoint(this.getEndPoint(a)),d=this.getRadius(a),e=b.clone().add(c).mul(.5);b=c.clone().sub(b).normalize().perpendicular();return(0<a.getArcHeight()?e.add(b.mul(d-a.getArcHeight())):e.add(b.mul(Math.abs(a.getArcHeight())-
d))).toPoint()}isPointOnStraightLine(a,b,c){return Math.abs((b.x-a.x)*(c.y-a.y)-(c.x-a.x)*(b.y-a.y))<yb}isPointOnCircle(a,b){return Math.abs(a.getRadius()-k.Geometry.distance(b,a.getCenter()))<yb}getCurveCircleLocal(a){const b=this.getCurveCircleCenter(a);a=this.getRadius(a);return k.Geometry.circleFromData(b.x,b.y,a)}getCurveCircleWorld(a,b){const c=b.transformPoint(this.getCurveCircleCenter(a));a=b.getScale()*this.getRadius(a);return k.Geometry.circleFromData(c.x,c.y,a,b.getRotationRad())}getCurve(a,
b,c,d,e){const f=k.Geometry.distance(a,b);var h=k.Geometry.fromPoint(a).add(k.Geometry.fromPoint(b)).mul(.5);a=Math.atan2(b.y-a.y,b.x-a.x);var m=k.Geometry.transform2dFromRad(d.getTranslation(),d.getScale(),a);b=k.Geometry.fromPoint(m.transformPoint({x:0,y:c/2}));m=k.Geometry.fromPoint(m.transformPoint({x:0,y:0}));h=b.sub(m).add(h).toPoint();h=k.Geometry.transform2dFromRad(h,d.getScale(),a);return{curvedLine:new p.CurvedLineDataImpl(e?-1*c:c,f/d.getScale()),localToWorld:h}}getCurveFromChord(a,b,c,
d,e){var f=a.getRadius();const h=k.Geometry.distance(c,d);var m=k.Geometry.fromPoint(d).sub(k.Geometry.fromPoint(c));d=k.Geometry.fromPoint(c).add(k.Geometry.fromPoint(d)).mul(.5);c=Math.atan(m.getY()/m.getX());isNaN(c)&&(c=0);0>m.getX()&&(c+=Math.PI);if(0===f)return e=k.Geometry.transform2dFromRad(d.toPoint(),b,c),{curvedLine:new p.CurvedLineDataImpl(0,h/b),localToWorld:e};{m=m.clone().normalize().perpendicular();e||m.mul(-1);a=k.Geometry.fromPoint(a.getCenter()).sub(d).normalize();a=0<m.clone().dot(a);
let g=2*Math.asin(h/(2*f));a&&(g=2*Math.PI-g);f*=1-Math.cos(g/2);e&&(f*=-1);e=d.add(m.mul(Math.abs(f)/2)).toPoint();e=k.Geometry.transform2dFromRad(e,b,c);return{curvedLine:new p.CurvedLineDataImpl(f/b,h/b),localToWorld:e}}}getCurveFromChordAndArcHeight(a,b,c,d,e,f){a=new p.CurvedLineDataImpl(b,a);c=this.getCurveCircleWorld(a,c);return this.getCurveFromChord(c,d,e,f,0>b)}getCurveFromChordAndCurveInWorld(a,b,c,d){return this.getCurveFromChordAndArcHeight(a.curvedLine.getStartEndDistance(),a.curvedLine.getArcHeight(),
a.localToWorld,b,c,d)}getStartPointX(a){return this.getOriginX()-Math.abs(a.getStartEndDistance())/2}getStartPointY(a){return this.isStraight(a)?this.getOrigin(a).y:this.getOriginY(a)-this.arcAngleSign(a)*this.arcHeightSign(a)*this.largeArcHeightSign(a)*(this.getRadius(a)+this.arcAngleSign(a)*this.largeArcHeightSign(a)*Math.abs(a.getArcHeight()))}arcAngleSign(a){return 0<this.getArcAngle(a)?-1:1}isPositiveAngle(a){return this.arcAngleSign(a)===1*this.inverseSign(a)}isStraight(a){return 0===a.getArcHeight()}getEndPoint(a){return this.isInverse(a)?
{x:this.getStartPointX(a),y:this.getStartPointY(a)}:{x:this.getEndPointX(a),y:this.getEndPointY(a)}}getEndPointX(a){return this.getOriginX()+Math.abs(a.getStartEndDistance())/2}getEndPointY(a){return this.getStartPointY(a)}calculateBoundWidth(a){return this.isStraight(a)?Math.abs(a.getStartEndDistance()):this.getRadius(a)<Math.abs(a.getArcHeight())?2*this.getRadius(a):Math.abs(a.getStartEndDistance())}calculateBoundHeight(a,b){return this.isStraight(a)?b.getThickness():this.isNegativeArcHeight(a)&&
this.getRadius(a)<Math.abs(a.getArcHeight())||!this.isNegativeArcHeight(a)&&Math.abs(a.getArcHeight())<this.getRadius(a)?Math.abs(this.getOppositeArcPointY(a)-this.getStartPointY(a)):Math.abs(this.getArcPointY(a)-this.getStartPointY(a))}getArcPoint(a){return{x:this.getOriginX(),y:this.getArcPointY(a)}}getArcPointY(a){return this.isStraight(a)?this.getOriginY(a):this.isNegativeArcHeight(a)?this.getOriginY(a)-this.getRadius(a):this.getOriginY(a)+this.getRadius(a)}getOppositeArcPointY(a){return this.isStraight(a)?
this.getOriginY(a):this.getOriginY(a)+this.largeArcHeightSign(a)*this.getRadius(a)}getOrigin(a){return{x:this.getOriginX(),y:this.getOriginY(a)}}getOriginX(){return 0}getOriginY(a){return this.isStraight(a)?0:-this.arcHeightSign(a)*(this.getRadius(a)-.5*Math.abs(a.getArcHeight()))}arcHeightSign(a){return this.signum(a.getArcHeight())}isNegativeArcHeight(a){return-1===this.arcHeightSign(a)}getRadius(a){if(this.isStraight(a))return 0;const b=Math.abs(a.getStartEndDistance());a=Math.abs(a.getArcHeight());
return b*b/(8*a)+a/2}signum(a){return 0<a?1:0>a?-1:0}getOuterStartCorner(a,b){if(this.isStraight(a))return{x:this.getStartPoint(a).x,y:this.getStartPoint(a).y-.5*b.getThickness()};{let c=Math.abs(this.getOriginY(a)-this.getStartPoint(a).y)*(this.getRadius(a)+.5*b.getThickness())/this.getRadius(a);b=Math.sqrt((this.getRadius(a)+.5*b.getThickness())*(this.getRadius(a)+.5*b.getThickness())-c*c);return{x:this.getOriginX()-b,y:this.getOriginY(a)-this.largeArcHeightSign(a)*c}}}getOuterEndCorner(a,b){if(this.isStraight(a))return{x:this.getEndPoint(a).x,
y:this.getEndPointY(a)-.5*b.getThickness()};{let c=Math.abs(this.getOriginY(a)-this.getEndPointY(a))*(this.getRadius(a)+.5*b.getThickness())/this.getRadius(a);b=Math.sqrt((this.getRadius(a)+.5*b.getThickness())*(this.getRadius(a)+.5*b.getThickness())-c*c);return{x:this.getOriginX()+b,y:this.getOriginY(a)-this.largeArcHeightSign(a)*c}}}getInnerStartCorner(a,b){if(this.isStraight(a))return{x:this.getStartPoint(a).x,y:this.getStartPoint(a).y+.5*b.getThickness()};{let c=Math.abs(this.getOriginY(a)-this.getEndPointY(a))*
(this.getRadius(a)-.5*b.getThickness())/this.getRadius(a);b=Math.sqrt((this.getRadius(a)-.5*b.getThickness())*(this.getRadius(a)-.5*b.getThickness())-c*c);return{x:this.getOriginX()-b,y:this.getOriginY(a)-this.largeArcHeightSign(a)*c}}}getInnerEndCorner(a,b){if(this.isStraight(a))return{x:this.getEndPointX(a),y:this.getEndPointY(a)+.5*b.getThickness()};{let c=Math.abs(this.getOriginY(a)-this.getStartPoint(a).y)*(this.getRadius(a)-.5*b.getThickness())/this.getRadius(a);b=Math.sqrt((this.getRadius(a)-
.5*b.getThickness())*(this.getRadius(a)-.5*b.getThickness())-c*c);return{x:this.getOriginX()+b,y:this.getOriginY(a)-this.largeArcHeightSign(a)*c}}}getConnectorEndPoint(a,b,c,d){var e=c.getCenter(),f=null,h=a.localToWorld;let m=h.getTranslation();var g=a.curvedLine.getArcHeight();b=c.inflate(b);if(null!=b.getRadius)b=b.getRadius(),0===g?(f=k.Geometry.fromPoint(e).sub(k.Geometry.fromPoint(m)),f=k.Geometry.fromPoint(m).add(f.normalize().mul(k.Geometry.distance(e,m)-b)).toPoint()):(b=k.Geometry.circleFromData(e.x,
e.y,b),e=this.getRadius(a.curvedLine)*h.getScale(),h=h.transformPoint(this.getCurveCircleCenter(a.curvedLine)),h=k.Geometry.circleFromData(h.x,h.y,e),h=k.Geometry.intersection().circleIntersection(b,h),null!=h&&(f=0>g&&d||0<g&&!d?h[1]:h[0]));else if(0===g)h=this.getStartPoint(a.curvedLine),f=this.getEndPoint(a.curvedLine),h=a.localToWorld.transformPoint(h),f=a.localToWorld.transformPoint(f),f=b.containsPoint(h)?f:h,f=k.Geometry.intersection().boundingBoxIntersection(b,f);else{a=a.curvedLine;g=this.getRadius(a)*
h.getScale();let c=h.transformPoint(this.getCurveCircleCenter(a));g=k.Geometry.circleFromData(c.x,c.y,g);g=k.Geometry.intersection().rectCircleIntersection(b,g);let e=null;d?(h=h.transformPoint(this.getEndPoint(a)),e=k.Geometry.fromPoint(h).sub(k.Geometry.fromPoint(c)).normalize()):(h=h.transformPoint(this.getStartPoint(a)),e=k.Geometry.fromPoint(h).sub(k.Geometry.fromPoint(c)).normalize());let m=0>a.getArcHeight();g.sort((a,b)=>{var f=k.Geometry.fromPoint(a).sub(k.Geometry.fromPoint(c)).normalize(),
h=k.Geometry.fromPoint(b).sub(k.Geometry.fromPoint(c)).normalize();b=Math.acos(e.clone().dot(f));a=Math.acos(e.clone().dot(h));f=e.clone().cross(f);h=e.clone().cross(h);0>f&&(b=2*Math.PI-b);0>h&&(a=2*Math.PI-a);return m&&d||!m&&!d?b<a?1:-1:b<a?-1:1});0<g.length&&(f=g[0])}return f}getChordAngle(a,b){return 2*Math.asin(b/(2*a))}getPointOnCurve(a,b){a=this.getCurveCircleLocal(a);const c=a.getCenterY()+Math.sin(b)*a.getRadius();return{x:a.getCenterX()+Math.cos(b)*a.getRadius(),y:c}}interpolateOnCurve(a,
b){const c=this.getStartAngle(a),d=this.getArcAngleAbsolute(a);b=0<a.getArcHeight()?c-b*d:c+b*d;return this.getPointOnCurve(a,b)}getArcAngleAbsolute(a){let b=this.getStartAngle(a);const c=this.getEndAngle(a);if(0<a.getArcHeight())return b<c&&(b+=2*Math.PI),b-c;b>c&&(b-=2*Math.PI);return c-b}getAttachPaddingInWorld(a,b,c,d,e,f){const h=S.isActive("js-connector-flexible-padding");e=Math.max(e.getWidth(),e.getHeight())/1E3;f=h?Math.max(f.getBounds().getWidth(),f.getBounds().getHeight())/3500:1;a=a?0:
d.getThickness()/2;return b.getScale()*a+e*f*c.getAttachPadding()}validateCurvedLineData(a,b,c){if(!isFinite(a))throw Error("Invalid curved line scale: "+a);if(!isFinite(b))throw Error("Invalid curved line arc height: "+b);if(!isFinite(c))throw Error("Invalid curved line start-end distance: "+c);}};p.CurvedLineCalculationImpl.I=new p.CurvedLineCalculationImpl;var N={};Object.defineProperty(N,"__esModule",{value:!0});N.ArrowCalculationImpl=class{constructor(){this.curvedLineCalculation=p.CurvedLineCalculationImpl.I}getStartArcAngle(a,
b){var c=1;1===this.curvedLineCalculation.arcHeightSign(a)&&(c=this.curvedLineCalculation.inverseSign(a));this.curvedLineCalculation.isPositiveAngle(a)?(b=c*this.curvedLineCalculation.arcHeightSign(a)*this.angleCorrectionForTail(a,b),c=-this.tailDirCorrection(a)):(b=c*this.angleCorrectionForHead(a,b),c=-this.headDirCorrection(a));return c*this.curvedLineCalculation.largeArcHeightSign(a)*(-Math.PI/2+this.curvedLineCalculation.getArcAngle(a)+this.curvedLineCalculation.arcHeightSign(a)*this.curvedLineCalculation.largeArcHeightSign(a)*
b)}pointLength(a){return Math.sqrt(a.x*a.x+a.y*a.y)}subtractPoints(a,b){return{x:a.x-b.x,y:a.y-b.y}}tailDirCorrection(a){let b=1;!this.curvedLineCalculation.isNegativeArcHeight(a)&&Math.abs(this.curvedLineCalculation.getArcAngle(a))<Math.PI&&(b=1);this.curvedLineCalculation.isNegativeArcHeight(a)&&0>this.curvedLineCalculation.getArcAngle(a)&&(b=-1);return b}calcThinknessLenghtRatio(a,b){return 3.6*b.getThickness()/2/this.pointLength(this.subtractPoints(this.curvedLineCalculation.getEndPoint(a),this.curvedLineCalculation.getOrigin(a)))}angleCorrectionForHead(a,
b){return-2*Math.asin(this.calcThinknessLenghtRatio(a,b))}isValidThicknessLenghtRatio(a,b){return 1>=Math.abs(this.calcThinknessLenghtRatio(a,b))}getEndArcAngle(a,b){let c;this.curvedLineCalculation.isPositiveAngle(a)?(b=-this.curvedLineCalculation.inverseSign(a)*this.angleCorrectionForHead(a,b),c=-this.headDirCorrection(a)):(b=-this.curvedLineCalculation.inverseSign(a)*this.angleCorrectionForTail(a,b),c=-this.tailDirCorrection(a));return c*this.curvedLineCalculation.largeArcHeightSign(a)*(-Math.PI/
2-this.curvedLineCalculation.getArcAngle(a))+this.curvedLineCalculation.arcHeightSign(a)*b}headDirCorrection(a){let b=1;!this.curvedLineCalculation.isNegativeArcHeight(a)&&Math.abs(this.curvedLineCalculation.getArcAngle(a))<Math.PI&&(b=1);this.curvedLineCalculation.isNegativeArcHeight(a)&&0>this.curvedLineCalculation.getArcAngle(a)&&(b=-1);return b}angleCorrectionForTail(a,b){return 2*Math.asin(.4*b.getThickness()/2/this.pointLength(this.subtractPoints(this.curvedLineCalculation.getStartPoint(a),
this.curvedLineCalculation.getOrigin(a))))}getHeadLength(){return 7.2}};N.ArrowCalculationImpl.I=new N.ArrowCalculationImpl;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.TransformCalculation=class{static getLocalToWorld(a){if(a.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)){var b=a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic();if(null==b)throw Error("Topic container "+a.getId()+" has no topic");b=b.getEntity();if(b.isDef(g.CetModel.ID.HAS_TOPIC_CHILDREN)){if(!b.isDef(g.CetModel.ID.HAS_POSITION))throw Error("Topic container "+
a.getId()+" is not of HAS_POSITION type");b=b.getWrapper(g.CetModel.ID.HAS_POSITION.W).getPosition();if(null==b)throw Error("Topic container "+a.getId()+" has no position");b=b.getEntity();if(b.isDef(g.CetModel.ID.WRAP_CHILDREN_NO_BASELINE))return b=r.BoundCalculation.calculateWorldZoomObb_killme(a),a=r.BoundCalculation.getDefaultLocalBounds(a),a=Math.max(b.getHeight()/a.getHeight(),b.getWidth()/a.getWidth()),k.Geometry.transform2dFromRad(b.getCenter(),a,b.getRotationRadians());if(b.isDef(g.CetModel.ID.ABSOLUTE))return b.getWrapper(g.CetModel.ID.ABSOLUTE.W).getLocalToWorld();
throw Error("Invalid bounds kind");}b=a.getEntityList().getEntityById(r.BoundCalculation.getTopicParentId(a));return null!=b?Z.TransformCalculation.getLocalToWorld(b):a.get(g.CetModel.ID.TRANSFORMED.LOCAL_TO_WORLD)}return a.get(g.CetModel.ID.TRANSFORMED.LOCAL_TO_WORLD)}};var ka={};Object.defineProperty(ka,"__esModule",{value:!0});ka.WorldGeometryComponent=class extends U.BaseComponentKludge{constructor(){super()}getChildrenWorldGeometry(){const a=this.entityOwner.getChild(g.CetModel.ID.Z_TOPIC_CONTAINER.TOPIC);
if(!a.isDef(g.CetModel.ID.HAS_TOPIC_CHILDREN))return[];const b=a.getEntityList();let c=[];a.forEachChild(g.CetModel.ID.HAS_TOPIC_CHILDREN.TOPIC_CHILDREN,(a)=>{null!=a&&(a=b.getEntityById(a.get(g.CetModel.ID.TOPIC_CHILD.CHILD)),c.push(a))});return c.filter((a)=>a.isDef(g.CetModel.ID.Z_TOPIC_CONTAINER)&&a.getWrapper(g.CetModel.ID.Z_TOPIC_CONTAINER.W).getTopic().is(g.CetModel.ID.PAGE)).map((a)=>a.getMutableComponent(n.CetRendererInternal.getWorldGeometryComponentKey())).filter((a)=>null!=a)}createChildComponent(){let a=
new ka.WorldGeometryComponent;a.localToWorld=this.localToWorld;a.worldBounds=this.worldBounds;a.worldAABB=this.worldAABB;a.worldBoundingShape=this.worldBoundingShape;a.version=this.version;return a}getWorldBounds(){return this.worldBounds}setWorldBounds(a){this.worldBounds=a;this.incrementVersion();this.isStack&&this.getChildrenWorldGeometry().forEach((b)=>b.setWorldBounds(a))}getWorldAxisAlignedBounds(){return this.worldAABB}setWorldAxisAlignedBounds(a){this.worldAABB=a;this.incrementVersion();this.isStack&&
this.getChildrenWorldGeometry().forEach((b)=>b.setWorldAxisAlignedBounds(a))}getWorldBoundingShape(){return this.worldBoundingShape}setWorldBoundingShape(a){this.worldBoundingShape=a;this.incrementVersion();this.isStack&&this.getChildrenWorldGeometry().forEach((b)=>b.setWorldBoundingShape(a))}setOnEntity(a,b){this.isStack=a?a.get(l.CetRendererModule.getIsStackComponentKey()):!1;super.setOnEntity(a,b)}};var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.WorldGeometryCalculator=class{static updateWorldProperties(a){if(null!=
n.CetRendererInternal.getLocalBoundsComponent(a)){var b=a.getMutableComponent(n.CetRendererInternal.getWorldGeometryComponentKey());null==b&&(b=new ka.WorldGeometryComponent,a.setComponent(n.CetRendererInternal.getWorldGeometryComponentKey(),b));var c=Z.TransformCalculation.getLocalToWorld(a),d=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();b.setWorldBounds(k.Geometry.obbFromRect(d).transform(c));b.setWorldAxisAlignedBounds(n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().transformAABB(k.Geometry.createFromTransform(c)));
a=n.CetRendererInternal.getLocalBoundsComponent(a).getBoundingShape().transform(c);b.setWorldBoundingShape(a)}}};var sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.CanvasFactory=class{static createWithoutSize(){return window.document.createElement("canvas")}static create(a,b){if(1>a||1>b)return null;let c=sa.CanvasFactory.createWithoutSize();c.width=a;c.height=b;return c}};var t={};Object.defineProperty(t,"__esModule",{value:!0});(function(a){a[a.butt=0]="butt";a[a.round=1]="round";a[a.square=
2]="square"})(t.LineCap||(t.LineCap={}));(function(a){a[a.bevel=0]="bevel";a[a.round=1]="round";a[a.miter=2]="miter"})(t.LineJoin||(t.LineJoin={}));(function(a){a[a.Solid=0]="Solid";a[a.Linear=1]="Linear";a[a.Radial=2]="Radial"})(t.RenderingGradientType||(t.RenderingGradientType={}));var w={};Object.defineProperty(w,"__esModule",{value:!0});w.AbstractDrawComponent=class extends U.BaseComponentKludge{constructor(){super();this._hasError=!1}isReadyToRender(){return!0}isDisposed(){return!1}isFullyRenderable(){return this.isReadyToRender()}setError(){this._hasError=
!0;this.incrementVersion()}hasError(){return this._hasError}calculateGraphicsBounds(){throw Error("Not implemented calculateGraphicsBounds");}calculateBoundingShape(a){return k.Geometry.obbFromRect(a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds().getData())}calculateZoomBounds(a){let b=a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds();return null!=a.get(g.CetModel.ID.HAS_PADDING.PADDING)?r.BoundCalculation.addPaddingToBounds(b,a.get(g.CetModel.ID.HAS_PADDING.PADDING)):
b}hitTest(a,b){return this.areaHittest(a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds(),b)}enclosePoint(a,b){return this.areaHittest(a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds(),b)}isTransparent(a){return a.getFillType()!==g.FillType.Solid?0===a.getGradStartAlpha()&&0===a.getGradEndAlpha():0===a.getAlpha()}createSolidOrLinear(a,b,c,d,e,f,h=!1){if(a.getFillType()!==g.FillType.Solid){const m=h?a.getGradEndAlpha():a.getGradStartAlpha();h=h?a.getGradStartAlpha():a.getGradEndAlpha();
return b.createLinearGradient(c,d,e,f,[{offset:0,color:this.getColorWithAlpha(a.getGradStartColor(),m)},{offset:1,color:this.getColorWithAlpha(a.getGradEndColor(),h)}])}return b.createSolidGradient(this.getFillColor(a))}getColorFromRGBIntA(a,b){return k.Geometry.colorFromRGBIntA(a,b)}getColorFromRGBString(a){return k.Geometry.colorFromRGBString(a)}getColorWithAlpha(a,b){return k.Geometry.colorFromRGBIntA(a.getRGBInt(),b)}getBorderColor(a){return this.getColorWithAlpha(a.getBorderColor(),a.getBorderAlpha())}getFillColor(a){return this.getColorWithAlpha(a.getColor(),
a.getAlpha())}createBorderLineStyle(a,b){return 0>a.getBorderThickness()?null:b.createLineStyle(b.createSolidGradient(this.getBorderColor(a)),a.getBorderThickness(),t.LineJoin.round,t.LineCap.round)}getLineThickness(a,b){return b.getThickness()*Math.min(a.getWidth(),a.getHeight())/200}areaHittest(a,b){return a.pointIsInside(b)}isErrorDraw(){return!1}onEvent(){}};var Da={};Object.defineProperty(Da,"__esModule",{value:!0});Da.ArcDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);
this.kind=l.DrawComponentKind.arc}createRenderingShapes(a,b){const c=a.get(n.CetRendererInternal.getArcComponentKey()),d=b.createLineStyle(b.createSolidGradient(this.getColorWithAlpha(c.color,c.alpha)),c.thickness);null!=d&&(d.dashSegments=a.get(n.CetRendererInternal.getDashedDecoratorComponentKey()));null==this.renderingShape&&(this.renderingShape=b.createHairlineArc(d,!1));this.renderingShape.update(c);return[this.renderingShape]}calculateGraphicsBounds(a){var b=a.getWrapper(g.CetModel.ID.RECTANGULAR.W);
a=b.getWidth();b=b.getHeight();return k.Geometry.rectangleFromData({x:-a/2,y:-b/2,width:a,height:b})}dispose(){null!=this.renderingShape&&(this.renderingShape.dispose(),this.renderingShape=null)}};var Ea={};Object.defineProperty(Ea,"__esModule",{value:!0});Ea.AxDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.ax}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.HAS_BORDER.W);a=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();
c=0<c.getBorderThickness()?this.createBorderLineStyle(c,b):null;b=b.createPath(null,c);b.moveTo(-a.width/2,-a.height/2);b.lineTo(a.width/2,a.height/2);b.moveTo(a.width/2,-a.height/2);b.lineTo(-a.width/2,a.height/2);return[b]}calculateGraphicsBounds(a){var b=a.getWrapper(g.CetModel.ID.RECTANGULAR.W);a=b.getWidth();b=b.getHeight();return k.Geometry.rectangleFromData({x:-a/2,y:-b/2,width:a,height:b})}};var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.CircleDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);
this.kind=l.DrawComponentKind.circle}createRenderingShapes(a,b){const c=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();var d=a.getWrapper(g.CetModel.ID.HAS_FILL.W);a=a.getWrapper(g.CetModel.ID.HAS_BORDER.W);d=b.createFillStyle(this.createSolidOrLinear(d,b,0,-c.height/2,0,c.height/2));a=0<a.getBorderThickness()?this.createBorderLineStyle(a,b):null;b=b.createPath(d,a);b.arc(c.x+c.width/2,c.y+c.width/2,c.width/2,0,2*Math.PI,!1);return[b]}calculateGraphicsBounds(a){var b=
a.getWrapper(g.CetModel.ID.RECTANGULAR.W);a=b.getWidth();b=b.getHeight();return k.Geometry.rectangleFromData({x:-a/2,y:-b/2,width:a,height:b})}};var fa={};Object.defineProperty(fa,"__esModule",{value:!0});fa.TrackedAbstractDrawComponent=class extends w.AbstractDrawComponent{trackedCompMarker(){}};var Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});Ga.EmptyDrawComponent=class extends fa.TrackedAbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.empty}calculateGraphicsBounds(a){return r.BoundCalculation.getImageBounds(a.getWrapper(g.CetModel.ID.TRANSFORMED_IMAGE.W))}createRenderingShapes(){return[]}};
var Ha={};Object.defineProperty(Ha,"__esModule",{value:!0});Ha.ErrorDrawComponent=class extends fa.TrackedAbstractDrawComponent{constructor(a){super();this.localBounds=a;this.kind=l.DrawComponentKind.error}createRenderingShapes(a,b){var c=this.getColorFromRGBString("#979797");const d=this.getColorFromRGBString("#d8d8d8");var e=a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds();const f=Math.min(e.getWidth(),e.getHeight())/3,h=.3*f;var m=.3*f;const g=.12*f;a=this.createPath(b,0,d,c);a.rect(-e.getWidth()/
2,-e.getHeight()/2,e.getWidth(),e.getHeight());e=this.createPath(b,h,d,c);e.rect(-f/2,-f/2,f,f);b=this.createPath(b,g,c,d);c=(f+h+g)/2;m/=Math.sqrt(2);b.moveTo(-c,c);b.lineTo(-c,c-m);b.lineTo(c-m,-c);b.lineTo(c,-c);b.lineTo(c,-c+m);b.lineTo(-c+m,c);b.lineTo(-c,c);return[a,e,b]}calculateGraphicsBounds(){return this.localBounds}createPath(a,b,c,d){c=a.createFillStyle(a.createSolidGradient(c));b=0<b?a.createLineStyle(a.createSolidGradient(d),b):null;return a.createPath(c,b)}isErrorDraw(){return!0}};
var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});Ia.HollowRectangleDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.hollowRectangle}createRenderingShapes(a,b){var c=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds();c=k.Geometry.rectangleFromData({x:Math.ceil(c.getData().x),y:Math.ceil(c.getData().y),width:Math.ceil(c.getData().width),height:Math.ceil(c.getData().height)});var d=a.getWrapper(g.CetModel.ID.HAS_FILL.W);
a=a.get(n.CetRendererInternal.getDrawingDimensionsKey());a=k.Geometry.rectangleFromData({x:Math.ceil(a.getData().x),y:Math.ceil(a.getData().y),width:Math.ceil(a.getData().width),height:Math.ceil(a.getData().height)});d=b.createFillStyle(this.createSolidOrLinear(d,b,0,-c.getHeight()/2,0,c.getHeight()/2));var e=b.createLineStyle(b.createSolidGradient(k.Geometry.colorFromRGBA(0,0,0,0)),0);b=b.createPath(d,e);d=c.getTopLeft();e=c.getBottomLeft();const f=c.getBottomRight();c=c.getTopRight();const h=a.getTopLeft(),
m=a.getBottomLeft(),u=a.getBottomRight();a=a.getTopRight();b.moveTo(d.x,d.y);b.lineTo(e.x,e.y);b.lineTo(f.x,f.y);b.lineTo(c.x,c.y);b.lineTo(a.x,a.y);b.lineTo(u.x,u.y);b.lineTo(m.x,m.y);b.lineTo(h.x,h.y);b.lineTo(a.x,a.y);b.lineTo(c.x,c.y);b.lineTo(d.x,d.y);return[b]}calculateGraphicsBounds(a){return r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.RECTANGULAR.W))}};var aa={};Object.defineProperty(aa,"__esModule",{value:!0});aa.ZRectangleDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);
this.kind=l.DrawComponentKind.zRectangle}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_SQUARE.W);const b=r.BoundCalculation.getRectangle(a);return r.BoundCalculation.addBorderToBounds(b,a)}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.Z_SQUARE.W);const d=r.BoundCalculation.getRectangle(c);var e=this.createSolidOrLinear(c,b,0,-d.getHeight()/2,0,d.getHeight()/2);e=b.createFillStyle(e);c=0<=c.getBorderThickness()?this.createBorderLineStyle(c,b):null;b=b.createPath(e,c);a=a.get(g.CetModel.ID.HAS_CORNER_RADIUS.CORNER_RADIUS);
null!=a&&0!==a?aa.ZRectangleDrawComponent.drawRoundedRectangle(b,d.getData(),a,!0):this.drawSimpleRectangle(b,d);return[b]}drawSimpleRectangle(a,b){a.rect(b.getLeft(),b.getTop(),b.getWidth(),b.getHeight())}static drawRoundedRectangle(a,b,c,d){var e=d?.5*c*Math.min(b.width,b.height)/200:c,f=4/3*(Math.sqrt(2)-1);c=b.x;d=b.y;var h=c+e,m=d+e,g=h*(1-f)+c*f,k=m*(1-f)+d*f,l=b.x+b.width;b=b.y+b.height;var n=l-e;e=b-e;var p=l*f+n*(1-f);f=b*f+e*(1-f);a.moveTo(h,d);a.lineTo(n,d);a.bezierCurveTo(p,d,l,k,l,m);
a.lineTo(l,e);a.bezierCurveTo(l,f,p,b,n,b);a.lineTo(h,b);a.bezierCurveTo(g,b,c,f,c,e);a.lineTo(c,m);a.bezierCurveTo(c,k,g,d,h,d)}};var D={};Object.defineProperty(D,"__esModule",{value:!0});D.ImageDrawComponentBase=class extends fa.TrackedAbstractDrawComponent{constructor(){super(...arguments);this.disposed=!1}dispose(){this.isDisposed()||(this.free(this.imageAsset),this.imageAsset=null,this.disposed=!0,this.incrementVersion());super.dispose()}isDisposed(){return this.disposed}free(a){null!=a&&a.free()}setAsset(a){this.incrementVersion();
this.free(this.imageAsset);this.imageAsset=a}isReadyToRender(){return null!=this.imageAsset}getAsset(){return this.imageAsset}calculateBoundingShape(a){return k.Geometry.obbFromRect(this.calculateGraphicsBounds(a).getData())}};D.LogoDrawComponentImpl=class extends D.ImageDrawComponentBase{constructor(){super(...arguments);this.kind=l.DrawComponentKind.logo}createRenderingShapes(a,b){a=this.getAsset();if(null!=a){const c=this.calculateLocalBoundsRect(a.width,a.height);return[b.createImage(a,c,null,
!1)]}return[]}calculateGraphicsBounds(){var a,b,c,d;const e=null!==(b=null===(a=this.imageAsset)||void 0===a?void 0:a.width)&&void 0!==b?b:0;a=null!==(d=null===(c=this.imageAsset)||void 0===c?void 0:c.height)&&void 0!==d?d:0;return this.calculateLocalBoundsRect(e,a)}calculateLocalBoundsRect(a,b){if(400<a||160<b){const c=Math.min(Math.min(b,100)/b,Math.min(a,250)/a);a*=c;b*=c}return k.Geometry.rectangleFromData({x:-a/2-10,y:b/2+13,width:a,height:b})}};D.NextLogoDrawComponentImpl=class extends D.ImageDrawComponentBase{constructor(){super(...arguments);
this.logoSizeCategory=l.LogoSizeCategory.preziLogoLarge;this.kind=l.DrawComponentKind.nextLogo}createRenderingShapes(a,b){const c=[],d=this.getAsset(),e=this.calculateLocalBoundsRect(d.width,d.height);a=a.getWrapper(g.CetModel.ID.NEXT_LOGO_V1.W);null!=a&&null!=a.getBackgroundColor()&&c.push(this.createLogoBackgroundRenderingShape(e.localBounds,b,a));null!=d&&c.push(this.createLogoRenderingShape(e.assetBounds,b,d));return c}updateSizeCategory(a){this.logoSizeCategory=a;this.incrementVersion()}createLogoBackgroundRenderingShape(a,
b,c){c=b.createFillStyle(b.createSolidGradient(this.getColorWithAlpha(c.getBackgroundColor(),c.getBackgroundAlpha())));const d=b.createLineStyle(b.createSolidGradient(this.getColorWithAlpha(k.Geometry.colorFromRGB(0,0,0),.08)),1);b=b.createPath(c,d);aa.ZRectangleDrawComponent.drawRoundedRectangle(b,{x:-a.getCenter().x,y:-a.getCenter().y,width:a.getWidth(),height:a.getHeight()},4,!1);return b}createLogoRenderingShape(a,b,c){return b.createImage(c,a,null,!1)}calculateGraphicsBounds(){var a,b,c,d;const e=
null!==(b=null===(a=this.imageAsset)||void 0===a?void 0:a.width)&&void 0!==b?b:0;a=null!==(d=null===(c=this.imageAsset)||void 0===c?void 0:c.height)&&void 0!==d?d:0;return this.calculateLocalBoundsRect(e,a).localBounds}calculateLogoDimensionAndPadding(a,b){var c,d;let e;const f=a>1.2*b,h=b>1.2*a;switch(this.logoSizeCategory){case l.LogoSizeCategory.documentBasedSmall:e=4;f?(c=86,d=32):h?(c=32,d=86):(c=42,d=42);!0;break;case l.LogoSizeCategory.documentBasedLarge:e=6;f?(c=128,d=48):h?(c=48,d=128):(c=
64,d=64);!0;break;case l.LogoSizeCategory.preziLogoLarge:e=6;c=104;d=44;!0;break;case l.LogoSizeCategory.preziLogoSmall:e=4;c=76;d=32;!0;break;default:v.Utils.assertNever(this.logoSizeCategory)}c-=2*e;d-=2*e;d=a>c||b>d?Math.min(c/a,d/b):1;return{dimensions:{height:b*d,width:a*d},padding:e}}calculateLocalBoundsRect(a,b){b=this.calculateLogoDimensionAndPadding(a,b);a=b.dimensions;const c=b.padding;b=a.width+2*c;var d=a.height+2*c,e=d+32;a=k.Geometry.rectangleFromData({x:.5*-a.width-c-32,y:.5*-a.height-
c+e,width:a.width,height:a.height});b=k.Geometry.rectangleFromData({x:.5*-b-32,y:.5*-d+e,width:b,height:d});return{assetBounds:a,localBounds:b}}};D.ImageDrawComponentImpl=class extends D.ImageDrawComponentBase{constructor(){super(...arguments);this.kind=l.DrawComponentKind.image}dispose(){this.isDisposed()||(this.free(this.thumbnailImageAsset),this.thumbnailImageAsset=null);super.dispose()}isReadyToRender(){return super.isReadyToRender()||null!=this.thumbnailImageAsset}setAsset(a){null!=this.imageAsset&&
(this.imageAsset.retain(),this.setThumbnailImageAsset(this.imageAsset));super.setAsset(a)}isFullyRenderable(){return super.isReadyToRender()}setThumbnailImageAsset(a){this.incrementVersion();this.free(this.thumbnailImageAsset);this.thumbnailImageAsset=a}setPlaceholderImageAsset(a){null==this.placeholderAsset&&(this.incrementVersion(),this.placeholderAsset=a)}calculateGraphicsBounds(a){return r.BoundCalculation.getImageBounds(a.getWrapper(g.CetModel.ID.TRANSFORMED_IMAGE.W))}getPlaceholderShape(a,b,
c){var d;if(null!==(d=a.get(n.CetRendererInternal.getHidePlaceholderAssetKey()))&&void 0!==d&&d||!a.getWrapper(g.CetModel.ID.Z_IMAGE.W).getIsPlaceholder()||null==this.placeholderAsset)return[];a=.2*b.getWidth();a=k.Geometry.rectangleFromData({x:0,y:0,width:a,height:a});return[c.createImage(this.placeholderAsset,a,null,!1)]}createRenderingShapes(a,b){var c;const d=null!==(c=this.getAsset())&&void 0!==c?c:this.thumbnailImageAsset;if(null!=d){var e=d===this.thumbnailImageAsset,f=a.getWrapper(g.CetModel.ID.TRANSFORMED_IMAGE.W);
c=f.getIsFlipped();if(null==f.getMask())return e=r.BoundCalculation.getImageBounds(f),e=k.Geometry.rectangleFromData({x:0,y:0,width:e.getWidth(),height:e.getHeight()}),[b.createImage(d,e,null,c),...this.getPlaceholderShape(a,e,b)];{var h=e?r.BoundCalculation.tranformMaskRectangle(f.getMask(),{width:f.getWidth(),height:f.getHeight()},{width:d.width,height:d.height}):f.getMask();e=k.Geometry.rectangleFromData({x:.5*-h.getWidth(),y:.5*-h.getHeight(),width:h.getWidth(),height:h.getHeight()});var m=-h.getLeft()-
h.getWidth()/2;const g=-h.getTop()-h.getHeight()/2;m=f.getIsFlipped()?-m-f.getWidth():m;f=k.Geometry.rectangleFromData({x:m,y:g,width:f.getWidth(),height:f.getHeight()});h=k.Geometry.rectangleFromData({x:0,y:0,width:h.getWidth(),height:h.getHeight()});return[b.createImage(d,f,e,c),...this.getPlaceholderShape(a,h,b)]}}return[]}};var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.InvisibleFrameDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=
l.DrawComponentKind.invisibleFrame}createRenderingShapes(a,b){a=this.calculateGraphicsBounds(a);const c=b.createLineStyle(b.createSolidGradient(this.getColorFromRGBString("#dcdcdc")),0,t.LineJoin.round,t.LineCap.round);b=b.createPath(null,c);b.rect(a.getLeft(),a.getTop(),a.getWidth(),a.getHeight());return[b]}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.RECTANGULAR.W);return k.Geometry.rectangleFromData({x:-a.getWidth()/2,y:-a.getHeight()/2,width:a.getWidth(),height:a.getHeight()})}};var Ka=
{};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.LShapeDrawComponent=class extends w.AbstractDrawComponent{constructor(a,b){super();this.orientation=a;this.drawingDimensions=b;this.kind=l.DrawComponentKind.lshape}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.HAS_FILL.W),d=a.getWrapper(g.CetModel.ID.HAS_BORDER.W),e=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();c=b.createFillStyle(this.createSolidOrLinear(c,b,0,-e.height/2,0,e.height/2));const f=
0<d.getBorderThickness()?this.createBorderLineStyle(d,b):null;null==this.drawingDimensions&&(this.drawingDimensions={height:e.height,width:e.width});const h=e.height-this.drawingDimensions.height;var m=e.width-this.drawingDimensions.width;d=this.orientation===l.LShapeOrientation.TOP_LEFT||this.orientation===l.LShapeOrientation.BOTTOM_LEFT?1:-1;const u=this.orientation===l.LShapeOrientation.TOP_LEFT||this.orientation===l.LShapeOrientation.TOP_RIGHT?1:-1;a=a.getWrapper(g.CetModel.ID.HAS_BORDER.W).getBorderThickness();
m=e.x+(this.orientation===l.LShapeOrientation.TOP_RIGHT||this.orientation===l.LShapeOrientation.BOTTOM_RIGHT?e.width:0)+d*(a+m/2);e=e.y+(this.orientation===l.LShapeOrientation.BOTTOM_LEFT||this.orientation===l.LShapeOrientation.BOTTOM_RIGHT?e.height:0)+u*(a+h/2);b=b.createPath(c,f);b.moveTo(m-d*a,e-u*a);b.lineTo(m-d*a,e-u*(a-this.drawingDimensions.height));b.lineTo(m+d*a,e-u*(a-this.drawingDimensions.height));b.lineTo(m+d*a,e+u*a);b.lineTo(m-d*(a-this.drawingDimensions.width),e+u*a);b.lineTo(m-d*
(a-this.drawingDimensions.width),e-u*a);b.lineTo(m-d*a,e-u*a);return[b]}calculateGraphicsBounds(a){var b=a.getWrapper(g.CetModel.ID.RECTANGULAR.W);a=b.getWidth();b=b.getHeight();return k.Geometry.rectangleFromData({x:-a/2,y:-b/2,width:a,height:b})}};var G={};Object.defineProperty(G,"__esModule",{value:!0});G.AbstractRectangularDrawComponent=class extends w.AbstractDrawComponent{calculateGraphicsBounds(a){return r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.RECTANGULAR.W))}getSurroundingSquareSize(a,
b){b=1/b.getTransform().getScale();a=a.getWrapper(g.CetModel.ID.TRANSFORMED.W).getWorldToLocal().getScale();return Math.ceil(b*a*G.AbstractRectangularDrawComponent.HIT_PIXEL_AREA_ON_SCREEN/2)}hitRectangleBody(a,b,c,d,e){a=this.getSurroundingSquareSize(a,b);return!this.isTransparent(c)&&d.inflate(a,a).pointIsInside(e)}hitRectangleBorder(a,b,c,d,e,f){a=e/2+this.getSurroundingSquareSize(a,b);return 0!==f&&c.inflate(a,a).pointIsInside(d)&&!c.inflate(-Math.min(a,c.getWidth()),-Math.min(a,c.getHeight())).pointIsInside(d)}hitRectangle(a,
b,c,d,e,f,h){return this.hitRectangleBody(a,b,e,c,d)||this.hitRectangleBorder(a,b,c,d,f,h)}};G.AbstractRectangularDrawComponent.HIT_PIXEL_AREA_ON_SCREEN=10;G.AbstractRectangleDrawComponent=class extends G.AbstractRectangularDrawComponent{createRenderingShapes(a,b){var c=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds();const d=this.getDrawingDimsOrFallbackToBounds(a,c);var e=a.getWrapper(g.CetModel.ID.HAS_FILL.W);const f=a.getWrapper(g.CetModel.ID.HAS_BORDER.W);c=b.createFillStyle(this.createSolidOrLinear(e,
b,0,-c.getHeight()/2,0,c.getHeight()/2));e=0<=f.getBorderThickness()?this.createBorderLineStyle(f,b):null;null!=e&&(e.dashSegments=a.get(n.CetRendererInternal.getDashedDecoratorComponentKey()));const h=[];var m=a.get(n.CetRendererInternal.getBorderBackgroundDecoratorKey());null!=m&&(m=b.createLineStyle(b.createSolidGradient(k.Geometry.colorFromRGBString(m)),f.getBorderThickness(),t.LineJoin.round,t.LineCap.round),null==this.renderingShapeBorderBackground&&(this.renderingShapeBorderBackground=b.createHairlineRectangle(null,
m)),this.renderingShapeBorderBackground.update(d),h.push(this.renderingShapeBorderBackground));m=a.get(n.CetRendererInternal.getInnerBorderColorKey());null!=m&&(m=0<=f.getBorderThickness()?b.createLineStyle(b.createSolidGradient(m),f.getBorderThickness(),t.LineJoin.round,t.LineCap.round):null,null!=m&&(m.dashSegments=a.get(n.CetRendererInternal.getDashedDecoratorComponentKey())),null==this.secondBorderShape&&(this.secondBorderShape=b.createHairlineRectangle(null,m)),this.secondBorderShape.update(d.inflate(-f.getBorderThickness(),
-f.getBorderThickness())),h.push(this.secondBorderShape));if(null==this.renderingShape||this.fillStyle!==c||this.lineStyle!==e)null!=this.renderingShape&&this.renderingShape.dispose(),this.renderingShape=b.createHairlineRectangle(c,e),this.fillStyle=c,this.lineStyle=e;this.renderingShape.update(d);h.push(this.renderingShape);return h}innerHitTest(a,b,c){var d=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds();d=this.getDrawingDimsOrFallbackToBounds(a,d);const e=a.getWrapper(g.CetModel.ID.HAS_FILL.W),
f=a.getWrapper(g.CetModel.ID.HAS_BORDER.W);return this.hitRectangle(a,c,d,b,e,f.getBorderThickness(),f.getBorderAlpha())}hitTest(a,b,c){var d=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds(),e=this.getDrawingDimsOrFallbackToBounds(a,d);e={x:e.getLeft(),y:e.getTop(),height:e.getHeight(),width:e.getWidth()};d=k.Geometry.obbFromRect(d.getData());e=k.Geometry.obbFromRect(e);return this.innerHitTest(a,b,c)||d.containsPoint(b)&&!e.containsPoint(b)}getDrawingDimsOrFallbackToBounds(a,
b){return(a=a.get(n.CetRendererInternal.getDrawingDimensionsKey()))?a:b}dispose(){null!=this.renderingShape&&(this.renderingShape.dispose(),this.renderingShape=null);null!=this.renderingShapeBorderBackground&&(this.renderingShapeBorderBackground.dispose(),this.renderingShapeBorderBackground=null);null!=this.secondBorderShape&&(this.secondBorderShape.dispose(),this.secondBorderShape=null)}};G.RectangleDrawComponent=class extends G.AbstractRectangleDrawComponent{constructor(){super(...arguments);this.kind=
l.DrawComponentKind.rectangle}};var O={};Object.defineProperty(O,"__esModule",{value:!0});O.PixelHittestedDrawComponent=class extends w.AbstractDrawComponent{hitTest(a,b,c,d){if(this.shouldForceAreaHittest(a))return this.areaHittest(a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds(),b);var e=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();const f=this.calculateHitPoint(e,b);b=Math.floor(f.x)-e.width/2;e=Math.floor(f.y)-e.height/2;c=1/c.getTransform().getScale();
a=a.getWrapper(g.CetModel.ID.TRANSFORMED.W).getWorldToLocal().getScale();return d.hitTest(Math.ceil(c*a*G.RectangleDrawComponent.HIT_PIXEL_AREA_ON_SCREEN),b,e)}shouldForceAreaHittest(a){var b=a.getWrapper(g.CetModel.ID.HAS_FILL.W);const c=b.getAlpha(),d=b.getGradStartAlpha(),e=b.getGradEndAlpha();b=b.getFillType()===g.FillType.Solid?.02>c:.02>d&&.02>e;a=a.getWrapper(g.CetModel.ID.HAS_BORDER.W).getBorderAlpha();return b&&.02>a}calculateHitPoint(a,b){const c=k.Geometry.createIdentity();c.translate(a.width/
2,a.height/2);return c.transformPoint(b)}};var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.DecorationBorder=class{constructor(a,b,c){this.borderColor=a;this.borderAlpha=b;this.borderThickness=c}getBorderAlpha(){return this.borderAlpha}getBorderColor(){return this.borderColor}getBorderThickness(){return this.borderThickness}getVersion(){return 0}getEntity(){return null}getId(){return null}getMaybePDOMId(){return null}toIPdom(){return null}};ta.OverviewFrameDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);
this.kind=l.DrawComponentKind.overviewFrame;this.width=16;this.height=9;this.letterBox=!0}setAspectRatio(a,b,c){let d=a!==this.width||b!==this.height||c!==this.letterBox;this.width=a;this.height=b;this.letterBox=c;d&&this.incrementVersion();return d}calculateGraphicsBounds(){return k.Geometry.rectangleFromData({x:-this.width/2,y:-this.height/2,width:this.width,height:this.height})}createRenderingShapes(){return[]}};var La={};Object.defineProperty(La,"__esModule",{value:!0});La.XvgDrawComponentImpl=
class extends fa.TrackedAbstractDrawComponent{constructor(){super(...arguments);this.disposed=this.initialized=!1;this.kind=l.DrawComponentKind.xvg}setAsset(a){this.initialized=!0;this.free(this.xvgAsset);this.xvgAsset=a;this.incrementVersion()}getAsset(){return this.xvgAsset}dispose(){this.isDisposed()||(this.free(this.xvgAsset),this.xvgAsset=null,this.free(this.thumbnailImageAsset),this.thumbnailImageAsset=null,this.disposed=!0,this.incrementVersion());super.dispose()}free(a){null!=a&&a.free()}isDisposed(){return this.disposed}createRenderingShapes(a,
b){if(null!=this.xvgAsset){if(a.isDef(g.CetModel.ID.PDF)){var c=a.getWrapper(g.CetModel.ID.PDF.W);return[b.createXvg(this.xvgAsset,n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds(),c.getImageScaleX(),c.getImageScaleY(),c.getPdfBoundsLeft(),c.getPdfBoundsTop(),this.xvgAsset.width,this.xvgAsset.height,null)]}if(a.isDef(g.CetModel.ID.SWF_GRAPHICS))return c=a.getWrapper(g.CetModel.ID.SWF_GRAPHICS.W),[b.createXvg(this.xvgAsset,n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds(),
c.getImageScaleX(),c.getImageScaleY(),c.getSwfBoundsLeft(),c.getSwfBoundsTop(),c.getWidth(),c.getHeight(),c.getMask())];throw Error("invalid object kind");}return null!=this.thumbnailImageAsset?(a=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds(),a=k.Geometry.rectangleFromData({x:0,y:0,width:a.getWidth(),height:a.getHeight()}),[b.createImage(this.thumbnailImageAsset,a,null,!1)]):[]}setThumbnailImageAsset(a){this.incrementVersion();this.free(this.thumbnailImageAsset);this.thumbnailImageAsset=
a}calculateGraphicsBounds(a){return r.BoundCalculation.getImageBounds(a.getWrapper(g.CetModel.ID.TRANSFORMED_IMAGE.W))}isReadyToRender(){return this.initialized||null!=this.thumbnailImageAsset}isFullyRenderable(){return this.initialized}};var Ma={};Object.defineProperty(Ma,"__esModule",{value:!0});Ma.TextHittestRectangleDrawComponent=class extends G.AbstractRectangleDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.textHittestRectangle}innerHitTest(a,b){const c=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds();
a=this.getDrawingDimsOrFallbackToBounds(a,c);return k.Geometry.rectangleFromData({x:a.getLeft(),y:c.getTop(),width:a.getWidth(),height:a.getTop()-c.getTop()+1}).pointIsInside(b)||k.Geometry.rectangleFromData({x:a.getLeft(),y:a.getBottom()-1,width:a.getWidth(),height:1+c.getBottom()-a.getBottom()}).pointIsInside(b)}};var Na={};Object.defineProperty(Na,"__esModule",{value:!0});Na.VideoThumbnailDrawComponentImpl=class extends D.ImageDrawComponentBase{constructor(a,b){super();this.width=a;this.height=
b;this.kind=l.DrawComponentKind.videoThumbnail;this.defaultSize={width:this.width,height:this.height}}isReadyToRender(){return!0}isFullyRenderable(){return null!=this.imageAsset}createRectangle(a){a=a||null==this.imageAsset?this.defaultSize:this.getLocalImageSize();return k.Geometry.rectangleFromData({x:.5*-a.width,y:.5*-a.height,width:a.width,height:a.height})}getLocalImageSize(){return this.getLocalSize(this.imageAsset)}getLocalSize(a){return v.Utils.fit({width:a.width,height:a.height},this.defaultSize)}calculateGraphicsBounds(a){a=
a.getWrapper(g.CetModel.ID.Z_VIDEO.W).getLetterboxYoutubeThumbnail();return this.createRectangle(a)}calculateZoomBounds(){return this.createRectangle(!1)}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.Z_VIDEO.W);a=[];var d=b.createPath(b.createFillStyle(b.createSolidGradient(this.getColorFromRGBString("#000000"))),null);c=c.getLetterboxYoutubeThumbnail()?this.height:3*this.height/4;d.rect(-this.width/2,-c/2,this.width,c);a.push(d);null!=this.imageAsset&&(d=this.getLocalImageSize(),a.push(b.createImage(this.imageAsset,
k.Geometry.rectangleFromData({x:0,y:0,width:d.width,height:d.height}),null,!1)));null!=this.playButtonImageAsset&&(d=this.width/1200,b=b.createImage(this.playButtonImageAsset,k.Geometry.rectangleFromData({x:0,y:0,width:this.playButtonImageAsset.width*d,height:this.playButtonImageAsset.height*d}),null,!1),b.alpha=.8,a.push(b));return a}setupPlayButton(a){this.playButtonImageAsset=a;this.incrementVersion()}getPlayButton(){return this.playButtonImageAsset}};var ua={};Object.defineProperty(ua,"__esModule",
{value:!0});ua.BaseRenderingSurface=class{createFillStyle(a){return{gradient:a}}createLineStyle(a,b,c=t.LineJoin.miter,d=t.LineCap.butt){return{gradient:a,width:b,lineJoin:c,lineCap:d}}createLinearGradient(a,b,c,d,e){return{type:t.RenderingGradientType.Linear,x0:a,y0:b,x1:c,y1:d,colorStops:e}}createRadialGradient(a,b,c,d){return{type:t.RenderingGradientType.Radial,x0:a,y0:b,r:c,colorStops:d}}createSolidGradient(a){return{type:t.RenderingGradientType.Solid,color:a}}};var P={};Object.defineProperty(P,
"__esModule",{value:!0});P.BBoxPathRenderingShape=class{constructor(a,b){this.fill=a;this.lineWidth=b;this.subPaths=[[]];this.isDecoration=!1}currentSubPath(){return this.subPaths[this.subPaths.length-1]}moveTo(a,b){this.subPaths.push([{x:a,y:b}])}lineTo(a,b){this.currentSubPath().push({x:a,y:b})}quadraticCurveTo(a,b,c,d){this.currentSubPath().push({x:a,y:b},{x:c,y:d})}bezierCurveTo(a,b,c,d,e,f){this.currentSubPath().push({x:a,y:b},{x:c,y:d},{x:e,y:f})}arc(a,b,c,d,e,f){a=this.calculateArcBBox(a,b,
c,d,e,f).getData();this.currentSubPath().push({x:a.x,y:a.y},{x:a.x+a.width,y:a.y},{x:a.x+a.width,y:a.y+a.height},{x:a.x,y:a.y+a.height})}rect(a,b,c,d){this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.lineTo(a,b)}calculateArcBBox(a,b,c,d,e,f){let h;if(Math.abs(e-d)>=2*Math.PI)return k.Geometry.rectangleFromData({x:a-c,y:b-c,width:2*c,height:2*c});if(f){var m=this.wrap(e);h=this.wrap(d)}else m=this.wrap(d),h=this.wrap(e);d=c*Math.cos(m);e=c*Math.sin(m);f=c*Math.cos(h);
let g=c*Math.sin(h),Fb=m>h,l=this.wrap(m-Math.PI/2)>this.wrap(h-Math.PI/2);var n=this.wrap(m-Math.PI)>this.wrap(h-Math.PI);m=this.wrap(m-3*Math.PI/2)>this.wrap(h-3*Math.PI/2);n=n?-c:Math.min(d,f);m=m?-c:Math.min(e,g);return k.Geometry.rectangleFromData({x:n+a,y:m+b,width:Math.abs((Fb?c:Math.max(d,f))-n),height:Math.abs((l?c:Math.max(e,g))-m)})}wrap(a){a%=2*Math.PI;return 0>a?2*Math.PI+a:a}getBBox(){let a=null;if(this.fill)for(var b of this.subPaths)if(2<b.length)for(const {x:c,y:d}of b)a=P.BBoxPathRenderingShape.inflateBBoxWithPoint(a,
c,d);if(null!=this.lineWidth){b=this.lineWidth/2;for(let c of this.subPaths)for(let d of c)a=P.BBoxPathRenderingShape.inflateBBoxWithPoint(a,d.x-b,d.y-b),a=P.BBoxPathRenderingShape.inflateBBoxWithPoint(a,d.x+b,d.y-b),a=P.BBoxPathRenderingShape.inflateBBoxWithPoint(a,d.x+b,d.y+b),a=P.BBoxPathRenderingShape.inflateBBoxWithPoint(a,d.x-b,d.y+b)}return a}static inflateBBoxWithPoint(a,b,c){return null==a?k.Geometry.rectangleFromData({x:b,y:c,width:0,height:0}):a.pointIsInside({x:b,y:c})?a:a.union(k.Geometry.rectangleFromData({x:b,
y:c,width:0,height:0}))}dispose(){}removeFromShapeCache(){this.dispose()}};var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});Oa.BBoxHairlineArcRenderingShape=class{constructor(a){this.lineStyle=a;this.isDecoration=!1}update(a){this.bboxPathRenderingShape=this.bboxPathRenderingShape=new P.BBoxPathRenderingShape(!1,this.lineStyle.width);a.isStraight?(this.bboxPathRenderingShape.moveTo(a.headPos.x,a.headPos.y),this.bboxPathRenderingShape.lineTo(a.tailPos.x,a.tailPos.y)):this.bboxPathRenderingShape.arc(a.origin.x,
a.origin.y,a.radius,a.startAngle,a.endAngle,a.isInverse)}getBBox(){return this.bboxPathRenderingShape.getBBox()}dispose(){}removeFromShapeCache(){this.dispose()}};var la={};Object.defineProperty(la,"__esModule",{value:!0});la.BBoxRectangularShape=class{constructor(a){this.dstRect=a;this.isDecoration=!1}getBBox(){return this.dstRect}dispose(){}removeFromShapeCache(){this.dispose()}};var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.BBoxTextRenderingShape=class{constructor(a,b,c,d){this.renderingText=
a;this.textBounds=b;this.x=c;this.y=d;this.__TextRenderingShape__=0;this.isDecoration=!1}getBBox(){const a=new P.BBoxPathRenderingShape(!0,null);this.renderingText.renderText({setColor:()=>{},arc:(b,c,f,h,m,g)=>{a.arc(b,c,f,h,m,g)},bezierCurveTo:(b,c,f,h,m,g)=>{a.bezierCurveTo(b,c,f,h,m,g)},lineTo:(b,c)=>{a.lineTo(b,c)},moveTo:(b,c)=>{a.moveTo(b,c)},quadraticCurveTo:(b,c,f,h)=>{a.quadraticCurveTo(b,c,f,h)},rect:(b,c,f,h)=>{a.rect(b,c,f,h)},fillAndResetPath:()=>{}});let b=this.textBounds;const c=a.getBBox();
return null==c?null:k.Geometry.rectangleFromData({x:c.getLeft()-b.getData().width/2+this.x,y:c.getTop()-b.getData().height/2+this.y,width:c.getWidth(),height:c.getHeight()})}dispose(){}removeFromShapeCache(){this.dispose()}};var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.BboxRenderingSurface=class extends ua.BaseRenderingSurface{createText(a,b,c,d){return new Pa.BBoxTextRenderingShape(a,b,c,d)}createPath(a,b){return new P.BBoxPathRenderingShape(null!=a,null==b?null:b.width)}createImage(a,
b){return new la.BBoxRectangularShape(b)}createAnimatedImage(a,b){return new la.BBoxRectangularShape(b)}createXvg(a,b){return new la.BBoxRectangularShape(b)}getBBox(a){let b=null;for(const c of a)b=ma.BboxRenderingSurface.inflateBBoxWithRect(b,c.getBBox());return b}static inflateBBoxWithRect(a,b){return null==a?b:null==b?a:a.union(b)}getKind(){return"bbox"}createHairlineRectangle(){throw Error("not implemented");}createHairlineArc(a){return new Oa.BBoxHairlineArcRenderingShape(a)}createVideoPlayerShape(){throw Error("not implemented");
}};var T={};Object.defineProperty(T,"__esModule",{value:!0});T.ArrowHeadPoints=class{constructor(a,b){this.curvedLine=a;this.thicknessComponent=b;this.headTransformation=this.createHeadTransformation();this.halfThickness=.5*b.getThickness();this.wingWidth=4*this.halfThickness;this.controlPointDistance=6*this.halfThickness;this.wingTailDistance=8*this.halfThickness;this.wingBottomDistance=3.2*this.halfThickness}static subtractPoints(a,b){return{x:a.x-b.x,y:a.y-b.y}}createHeadTransformation(){var a=
this.calculateHeadBottom();let b=k.Geometry.createIdentity();if(p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine))p.CurvedLineCalculationImpl.I.isInverse(this.curvedLine)&&b.rotate(Math.PI);else{a=T.ArrowHeadPoints.subtractPoints(a,T.ArrowHeadPoints.subtractPoints(p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine),p.CurvedLineCalculationImpl.I.getOrigin(this.curvedLine)));let c=0;p.CurvedLineCalculationImpl.I.isInverse(this.curvedLine)||(c=Math.atan2(p.CurvedLineCalculationImpl.I.getStartPoint(this.curvedLine).y-
p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine).y,p.CurvedLineCalculationImpl.I.getStartPoint(this.curvedLine).x-p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine).x));b.rotate(Math.atan2(p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine)*a.y,p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine)*a.x)+c)}b.translate(p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine).x,p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine).y);return b}calculateHeadBottom(){let a=
N.ArrowCalculationImpl.I.angleCorrectionForHead(this.curvedLine,this.thicknessComponent),b=k.Geometry.createIdentity();b.rotate(-p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine)*p.CurvedLineCalculationImpl.I.arcHeightSign(this.curvedLine)*a);return b.transformPoint(T.ArrowHeadPoints.subtractPoints(p.CurvedLineCalculationImpl.I.getEndPoint(this.curvedLine),p.CurvedLineCalculationImpl.I.getOrigin(this.curvedLine)))}startToEndVector(a,b){return p.CurvedLineCalculationImpl.I.isNegativeArcHeight(this.curvedLine)?
T.ArrowHeadPoints.subtractPoints(a,b):T.ArrowHeadPoints.subtractPoints(b,a)}getStartPoint(){return this.headTransformation.transformPoint({x:-(this.wingBottomDistance+this.wingWidth),y:-this.halfThickness})}getStartWing(){return this.headTransformation.transformPoint({x:-this.wingTailDistance,y:-this.wingWidth})}getStartControlPoint(){return this.headTransformation.transformPoint({x:-this.controlPointDistance,y:-this.wingWidth})}getArrowPoint(){return this.headTransformation.transformPoint({x:0,y:0})}getEndControlPoint(){return this.headTransformation.transformPoint({x:-this.controlPointDistance,
y:this.wingWidth})}getEndWing(){return this.headTransformation.transformPoint({x:-this.wingTailDistance,y:this.wingWidth})}getEndPoint(){return this.headTransformation.transformPoint({x:-(this.wingBottomDistance+this.wingWidth),y:this.halfThickness})}};var na={};Object.defineProperty(na,"__esModule",{value:!0});na.ArrowTailPoints=class{constructor(a,b){this.curvedLine=a;this.thicknessComponent=b;this.tailTransformation=this.createTailTransformation();this.halfThickness=.5*b.getThickness()}static subtractPoints(a,
b){return{x:a.x-b.x,y:a.y-b.y}}createTailTransformation(){let a=k.Geometry.createIdentity(),b=p.CurvedLineCalculationImpl.I.getStartPoint(this.curvedLine);var c=p.CurvedLineCalculationImpl.I.getOrigin(this.curvedLine);c=this.startToEndVector(b,c);p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)||a.rotate(Math.atan2(c.y,c.x)+.5*Math.PI);a.translate(b.x,b.y);return a}startToEndVector(a,b){return p.CurvedLineCalculationImpl.I.isNegativeArcHeight(this.curvedLine)?na.ArrowTailPoints.subtractPoints(b,
a):na.ArrowTailPoints.subtractPoints(a,b)}getFirstControlPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:-1;return this.tailTransformation.transformPoint({x:0,y:a*this.halfThickness})}getFirstEndingPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:-1;return this.tailTransformation.transformPoint({x:0,y:.4*a*this.halfThickness})}getBottomPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:-1;return this.tailTransformation.transformPoint({x:0,
y:-.4*a*this.halfThickness})}getSecondControlPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:-1;return this.tailTransformation.transformPoint({x:0,y:a*-this.halfThickness})}getSecondEndingPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:-1,b=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1*p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine):-1*p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine);return this.tailTransformation.transformPoint({x:b*
this.halfThickness*.6,y:a*-this.halfThickness})}getStraightArrowFirstPoint(){let a=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1:p.CurvedLineCalculationImpl.I.arcHeightSign(this.curvedLine),b=p.CurvedLineCalculationImpl.I.isStraight(this.curvedLine)?1*p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine):-1*p.CurvedLineCalculationImpl.I.inverseSign(this.curvedLine);return this.tailTransformation.transformPoint({x:b*this.halfThickness*.6,y:a*this.halfThickness})}};var Qa={};Object.defineProperty(Qa,
"__esModule",{value:!0});Qa.ZArrowDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zArrow}isValidThicknessLenghtRatio(a){a=a.getWrapper(g.CetModel.ID.Z_ARROW.W);return N.ArrowCalculationImpl.I.isValidThicknessLenghtRatio(a,a)}calculateGraphicsBounds(a){const b=new ma.BboxRenderingSurface;a=a.getWrapper(g.CetModel.ID.Z_ARROW.W);a=this.createRenderingShapesImpl(a,b);return b.getBBox(a)}shouldForceAreaHittest(){return!1}createRenderingShapes(a,
b){a=a.getWrapper(g.CetModel.ID.Z_ARROW.W);return a.getDegenerateInvisible()?[]:this.createRenderingShapesImpl(a,b)}createRenderingShapesImpl(a,b){const c=this.createFillStyle(a,b),d=this.createBorderLineStyle(a,b);b=b.createPath(c,d);p.CurvedLineCalculationImpl.I.isStraight(a)?this.drawStraightArrow(a,b):this.drawCurvedArrow(a,b);return[b]}drawArrowHead(a,b,c){var d=new T.ArrowHeadPoints(a,a);const e=d.getStartPoint(),f=d.getStartWing(),h=d.getStartControlPoint(),m=d.getArrowPoint(),g=d.getEndControlPoint(),
k=d.getEndWing();d=d.getEndPoint();let l=!1;p.CurvedLineCalculationImpl.I.isInverse(a)&&(l=!l);l?(b.lineTo(k.x,k.y),b.quadraticCurveTo(g.x,g.y,m.x,m.y),b.quadraticCurveTo(h.x,h.y,f.x,f.y),c&&b.lineTo(e.x,e.y)):(b.lineTo(f.x,f.y),b.quadraticCurveTo(h.x,h.y,m.x,m.y),b.quadraticCurveTo(g.x,g.y,k.x,k.y),c&&b.lineTo(d.x,d.y))}drawArrowTail(a,b){const c=new na.ArrowTailPoints(a,a),d=c.getFirstControlPoint(),e=c.getFirstEndingPoint(),f=c.getBottomPoint(),h=c.getSecondControlPoint(),m=c.getSecondEndingPoint();
p.CurvedLineCalculationImpl.I.isStraight(a)&&(a=c.getStraightArrowFirstPoint(),b.lineTo(a.x,a.y));b.quadraticCurveTo(d.x,d.y,e.x,e.y);b.lineTo(f.x,f.y);b.quadraticCurveTo(h.x,h.y,m.x,m.y)}createFillStyle(a,b){return b.createFillStyle(this.createSolidOrLinear(a,b,-a.getStartEndDistance()/2,0,a.getStartEndDistance()/2,0,!0))}drawStraightArrow(a,b){b.moveTo(p.CurvedLineCalculationImpl.I.getOuterStartCorner(a,a).x+.5*p.CurvedLineCalculationImpl.I.inverseSign(a)*a.getThickness(),p.CurvedLineCalculationImpl.I.getOuterStartCorner(a,
a).y);b.lineTo(p.CurvedLineCalculationImpl.I.getOuterEndCorner(a,a).x-.5*p.CurvedLineCalculationImpl.I.inverseSign(a)*a.getThickness()*N.ArrowCalculationImpl.I.getHeadLength(),p.CurvedLineCalculationImpl.I.getOuterEndCorner(a,a).y);this.drawArrowHead(a,b,!0);this.drawArrowTail(a,b)}drawCurvedArrow(a,b){let c=!0;p.CurvedLineCalculationImpl.I.isInverse(a)&&(c=!c);var d=new T.ArrowHeadPoints(a,a);const e=Math.atan2(d.getStartPoint().y-p.CurvedLineCalculationImpl.I.getOrigin(a).y,d.getStartPoint().x-
p.CurvedLineCalculationImpl.I.getOrigin(a).x);d=Math.atan2(d.getEndPoint().y-p.CurvedLineCalculationImpl.I.getOrigin(a).y,d.getEndPoint().x-p.CurvedLineCalculationImpl.I.getOrigin(a).x);const f=p.CurvedLineCalculationImpl.I.isPositiveAngle(a)?N.ArrowCalculationImpl.I.getStartArcAngle(a,a):N.ArrowCalculationImpl.I.getEndArcAngle(a,a);var h=p.CurvedLineCalculationImpl.I.isNegativeArcHeight(a);const m=.5*(h?1:-1)*a.getThickness();h=h?c:!c;b.arc(p.CurvedLineCalculationImpl.I.getOrigin(a).x,p.CurvedLineCalculationImpl.I.getOrigin(a).y,
p.CurvedLineCalculationImpl.I.getRadius(a)-m,c?d:e,f,h);this.drawArrowTail(a,b);b.arc(p.CurvedLineCalculationImpl.I.getOrigin(a).x,p.CurvedLineCalculationImpl.I.getOrigin(a).y,p.CurvedLineCalculationImpl.I.getRadius(a)+m,f,c?e:d,!h);this.drawArrowHead(a,b,!1)}};var Ra={};Object.defineProperty(Ra,"__esModule",{value:!0});Ra.ZBracketFrameDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zBracketFrame}calculateGraphicsBounds(a){a=
a.getWrapper(g.CetModel.ID.Z_BRACKET_FRAME.W);const b=r.BoundCalculation.getRectangle(a);return r.BoundCalculation.addBorderToBounds(b,a)}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.Z_BRACKET_FRAME.W);a=this.createSolidOrLinear(c,b,0,-c.getHeight()/2+c.getBorderThickness()/2,0,c.getHeight()/2-c.getBorderThickness()/2);const d=b.createFillStyle(a),e=this.createBorderLineStyle(c,b);a=r.BoundCalculation.getRectangle(c);c=this.getLineThickness(c,c);const f=Math.min(a.getHeight()/7,a.getWidth()/
4);b=b.createPath(d,e);b.moveTo(a.getLeft(),a.getTop());b.lineTo(a.getLeft()+c+f,a.getTop());b.lineTo(a.getLeft()+c+f,a.getTop()+c);b.lineTo(a.getLeft()+c,a.getTop()+c);b.lineTo(a.getLeft()+c,a.getBottom()-c);b.lineTo(a.getLeft()+c+f,a.getBottom()-c);b.lineTo(a.getLeft()+c+f,a.getBottom());b.lineTo(a.getLeft(),a.getBottom());b.lineTo(a.getLeft(),a.getTop());b.moveTo(a.getRight(),a.getTop());b.lineTo(a.getRight(),a.getBottom());b.lineTo(a.getRight()-c-f,a.getBottom());b.lineTo(a.getRight()-c-f,a.getBottom()-
c);b.lineTo(a.getRight()-c,a.getBottom()-c);b.lineTo(a.getRight()-c,a.getTop()+c);b.lineTo(a.getRight()-c-f,a.getTop()+c);b.lineTo(a.getRight()-c-f,a.getTop());b.lineTo(a.getRight(),a.getTop());return[b]}};var Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});Sa.ZCircleDrawComponentImpl=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zCircle}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_CIRCLE.W);var b=a.getRadius();b=k.Geometry.rectangleFromData({x:-b,
y:-b,width:2*b,height:2*b});return r.BoundCalculation.addBorderToBounds(b,a)}calculateBoundingShape(a){var b=a.getWrapper(g.CetModel.ID.Z_CIRCLE.W);a=Math.max(b.getBorderThickness(),0);b=b.getRadius();return k.Geometry.circleFromData(0,0,b+a/2)}createRenderingShapes(a,b){var c=a.getWrapper(g.CetModel.ID.Z_CIRCLE.W);const d=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();a=c.getRadius();var e=this.createSolidOrLinear(c,b,0,-a,0,a);e=b.createFillStyle(e);const f=0<c.getBorderThickness()?
this.createBorderLineStyle(c,b):null;c=(null==c.getThickness()?13:c.getThickness())*Math.min(d.width,d.height)/200;c=Math.max(a-c,0);b=b.createPath(e,f);b.arc(0,0,a,0,2*Math.PI,!0);0<c&&(b.moveTo(c,0),b.arc(0,0,c,0,2*Math.PI,!1));return[b]}};var Ta={};Object.defineProperty(Ta,"__esModule",{value:!0});Ta.ZCircleFrameDrawComponentImpl=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zCircleFrame}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_CIRCLE_FRAME.W);
let b=r.BoundCalculation.getRectangle(a).getData();b={x:b.x,y:b.x,width:b.width,height:b.width};return r.BoundCalculation.addBorderToBounds(k.Geometry.rectangleFromData(b),a)}calculateBoundingShape(a){var b=a.getWrapper(g.CetModel.ID.Z_CIRCLE_FRAME.W);a=Math.max(0,b.getBorderThickness());b=b.getWidth()/2;return k.Geometry.circleFromData(0,0,b+a/2)}createRenderingShapes(a,b){const c=[];var d=a.getWrapper(g.CetModel.ID.Z_CIRCLE_FRAME.W);const e=100>d.getThickness();var f=d.getBorderThickness(),h=this.getLineThickness(d,
d),m=this.createSolidOrLinear(d,b,0,-d.getWidth()/2+f/2,0,d.getWidth()/2-f/2);const u=r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.RECTANGULAR.W)).getData().width/2;var k=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData(),l=k.x+.5*k.width;k=k.y+.5*k.height;e?(m=b.createLineStyle(m,h),m=b.createPath(null,m),m.arc(l,k,u-h/2,0,2*Math.PI,!1),c.push(m)):(m=e?null:b.createFillStyle(m),m=b.createPath(m,null),m.arc(l,k,u,0,2*Math.PI,!1),c.push(m));0<=f&&(f=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData(),
a=f.x+.5*f.width,f=f.y+.5*f.height,h=u-h,d=this.createBorderLineStyle(d,b),l=b.createPath(null,d),l.arc(a,f,u,0,2*Math.PI,!1),c.push(l),e&&(b=b.createPath(null,d),b.arc(a,f,h,0,2*Math.PI,!1),c.push(b)));return c}};var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});Ua.ZInvisibleFrameDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zInvisibleFrame}calculateGraphicsBounds(a){return r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.RECTANGULAR.W))}createRenderingShapes(){return[]}};
var Va={};Object.defineProperty(Va,"__esModule",{value:!0});Va.ZLineDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zLine}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_LINE.W);const b=p.CurvedLineCalculationImpl.I.calculateBoundWidth(a,a),c=p.CurvedLineCalculationImpl.I.calculateBoundHeight(a,a);return k.Geometry.rectangleFromData({x:.5*-b,y:.5*-c,width:b,height:c}).inflate(a.getThickness()/2,0)}createRenderingShapes(a,
b){a=a.getWrapper(g.CetModel.ID.Z_LINE.W);if(a.getDegenerateInvisible())return[];const c=b.createSolidGradient(this.getFillColor(a)),d=a.getThickness();b=b.createPath(null,b.createLineStyle(c,d,t.LineJoin.miter,t.LineCap.round));p.CurvedLineCalculationImpl.I.isStraight(a)?(b.moveTo(p.CurvedLineCalculationImpl.I.getStartPoint(a).x,p.CurvedLineCalculationImpl.I.getStartPoint(a).y),b.lineTo(p.CurvedLineCalculationImpl.I.getEndPoint(a).x,p.CurvedLineCalculationImpl.I.getEndPoint(a).y)):b.arc(p.CurvedLineCalculationImpl.I.getOrigin(a).x,
p.CurvedLineCalculationImpl.I.getOrigin(a).y,p.CurvedLineCalculationImpl.I.getRadius(a),p.CurvedLineCalculationImpl.I.getStartAngle(a),p.CurvedLineCalculationImpl.I.getEndAngle(a),!p.CurvedLineCalculationImpl.I.isNegativeArcHeight(a));return[b]}shouldForceAreaHittest(){return!1}};var oa={};Object.defineProperty(oa,"__esModule",{value:!0});oa.PointPath=class{constructor(){this.clearState()}static createBezierPointsFromCurvePoints(a){if(1>a.length)return new oa.PointPath;let b,c,d;var e=NaN;let f=new oa.PointPath;
f.moveTo(a[0].x,a[0].y);let h=a.length;if(4>h){if(1===h)return f;b=a[0];3===h?(c=a[1],d=a[2]):(d=a[1],c={x:(b.x+d.x)/2,y:(b.y+d.y)/2});f.curveTo(2*c.x-.5*(b.x+d.x),2*c.y-.5*(b.y+d.y),d.x,d.y);f.points=a;return f}let m=[{x:0,y:0},{x:0,y:0}],g=0,k=[];k[g++]=a[0];k[g++]=a[1];for(let f=0,u=h-3;f<u;f++){let u=2;for(;-1<--u;){b=a[f+u];c=a[f+u+1];d=a[f+u+2];var l=isNaN(e)?Math.sqrt((c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y)):e;e=Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y));l=0===u?1-e/2/((l+e)/100)/100:
l/2/((l+e)/100)/100;let h=1-l,g=h*h,k=l*l;m[u]={x:b.x*g+2*(2*c.x-.5*(b.x+d.x))*h*l+d.x*k,y:b.y*g+2*(2*c.y-.5*(b.y+d.y))*h*l+d.y*k}}k[g++]={x:(m[0].x+m[1].x)/2,y:(m[0].y+m[1].y)/2};f<h-4&&(k[g++]={x:a[f+2].x,y:a[f+2].y})}k[g++]={x:a[h-2].x,y:a[h-2].y};k[g++]={x:a[h-1].x,y:a[h-1].y};h=g;for(e=1;e<h-1;)b=k[e-1],c=k[e],d=k[e+1],f.curveTo(2*c.x-.5*(b.x+d.x),2*c.y-.5*(b.y+d.y),d.x,d.y),e+=2;f.points=a;return f}clearState(){this.points=[];this.segments=[]}getNumPoints(){return this.points.length}moveTo(){this.segments.push(1)}lineTo(){this.segments.push(2)}curveTo(){this.segments.push(3)}getBounds(){let a;
if(0===this.points.length)return k.Geometry.zeroRectangle();{a=k.Geometry.rectangleFromData({x:this.points[0].x,y:this.points[0].y,width:0,height:0});a=this.includePoints(a,this.points);let b=15*1.42;return a.inflate(b/2,b/2)}}includePoints(a,b){var c=a.getData();a=c.x;let d=c.y,e=c.x+c.width;c=c.y+c.height;for(let f=0,h=b.length;f<h;f++)a=Math.min(a,b[f].x),d=Math.min(d,b[f].y),e=Math.max(e,b[f].x),c=Math.max(c,b[f].y);return k.Geometry.rectangleFromData({x:a,y:d,width:Math.abs(e-a),height:Math.abs(d-
c)})}};var Wa={};Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ZMarkerPencilDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super();this.kind=l.DrawComponentKind.zMarkerPencil;this.lastPointsVersion=-1;this.pointPath=null}createRenderingShapes(a,b){a=this.zMarkerFromEntity(a);var c=b.createLineStyle(b.createSolidGradient(this.getFillColor(a)),a.getThickness(),t.LineJoin.bevel,t.LineCap.square);b=b.createPath(null,c);a=this.ensurePointPath(a);c=0;for(let e=0,f=a.points.length-
1;e<f;e++)switch(a.segments[e]){case 1:var d=a.points[c++];b.moveTo(d.x,d.y);break;case 2:d=a.points[c++];b.lineTo(d.x,d.y);break;case 3:d=a.points[c++];let f=a.points[c++];null!=d&&null!=f&&b.quadraticCurveTo(d.x,d.y,f.x,f.y)}return[b]}ensurePointPath(a){a=a.getPoints();if(this.lastPointsVersion===a.getVersion())return this.pointPath;this.lastPointsVersion=a.getVersion();return this.pointPath=oa.PointPath.createBezierPointsFromCurvePoints([...a.items()])}calculateGraphicsBounds(a){return this.ensurePointPath(this.zMarkerFromEntity(a)).getBounds()}zMarkerFromEntity(a){return a.getWrapper(g.CetModel.ID.Z_MARKER.W)}};
var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});Xa.ZOvalDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zOval}hitTest(a,b){const {outerRadius:c,innerRadius:d}=this.getRadii(a);a=Math.sqrt(b.x*b.x+b.y*b.y);return a<=c&&a>=d}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_SHAPE.W);var b=a.getWidth()/2;b=k.Geometry.rectangleFromData({x:-b,y:-b,width:2*b,height:2*b});return r.BoundCalculation.addBorderToBounds(b,
a)}calculateBoundingShape(a){var b=a.getWrapper(g.CetModel.ID.Z_SHAPE.W);a=Math.max(b.getBorderThickness(),0);b=b.getWidth()/2;return k.Geometry.circleFromData(0,0,b+a/2)}createRenderingShapes(a,b){const {outerRadius:c,innerRadius:d}=this.getRadii(a);a=a.getWrapper(g.CetModel.ID.Z_SHAPE.W);var e=this.createSolidOrLinear(a,b,0,-c,0,c);e=b.createFillStyle(e);a=0<=a.getBorderThickness()?this.createBorderLineStyle(a,b):null;b=b.createPath(e,a);b.arc(0,0,c,0,2*Math.PI,!0);0<d&&(b.moveTo(d,0),b.arc(0,0,
d,0,2*Math.PI,!1));return[b]}getRadii(a){var b=a.getWrapper(g.CetModel.ID.Z_SHAPE.W);const c=n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData();a=b.getWidth()/2;b=(null==b.getThickness()?13:b.getThickness())*Math.min(c.width,c.height)/200;return{outerRadius:a,innerRadius:Math.max(a-b,0)}}};var Ya={};Object.defineProperty(Ya,"__esModule",{value:!0});Ya.ZPersistentGroupDrawComponent=class extends w.AbstractDrawComponent{constructor(a){super();this.kind=l.DrawComponentKind.zPersistentGroup;
this.getChildIds=a}calculateGraphicsBounds(a){let b=k.Geometry.zeroRectangle(),c=k.Geometry.createFromTransform(Z.TransformCalculation.getLocalToWorld(a)).invert();for(let e of this.getChildIds(a)){var d=a.getEntityList().getEntityById(e);let f=this.createFromObjectToGroupTransformation(Z.TransformCalculation.getLocalToWorld(a),c);d=d.getComponent(n.CetRendererInternal.getDrawComponentKey()).calculateGraphicsBounds(d).transformAABB(f);b=b.union(d)}return b}createFromObjectToGroupTransformation(a,
b){a=k.Geometry.createFromTransform(a);a.concat(b);return a}createRenderingShapes(){return null}};var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.ZPlaceholderDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zPlaceholder}calculateGraphicsBounds(a){return r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.RECTANGULAR.W))}createRenderingShapes(){return[]}};var $a={};Object.defineProperty($a,"__esModule",{value:!0});
$a.ZRectangleFrameDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zRectangleFrame}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_RECTANGLE_FRAME.W);const b=r.BoundCalculation.getRectangle(a);return r.BoundCalculation.addBorderToBounds(b,a)}createRenderingShapes(a,b){a=a.getWrapper(g.CetModel.ID.Z_RECTANGLE_FRAME.W);var c=a.getBorderThickness();c=this.createSolidOrLinear(a,b,0,-a.getHeight()/2+c/2,0,a.getHeight()/2-c/2);
const d=b.createFillStyle(c),e=0<=a.getBorderThickness()?this.createBorderLineStyle(a,b):null;c=r.BoundCalculation.getRectangle(a).getData();b=b.createPath(d,e);aa.ZRectangleDrawComponent.drawRoundedRectangle(b,c,a.getRadius(),!0);return[b]}};var ha={};Object.defineProperty(ha,"__esModule",{value:!0});ha.ZTextDrawComponent=class extends w.AbstractDrawComponent{constructor(a){super();this.zta=a;this.kind=l.DrawComponentKind.zText;this.disposed=!1;this.textProps={layoutBounds:null,ztextBounds:null,
urls:null,textLength:null,cacheVersion:null}}validateCaches(a){const b=a.getComponent(n.CetRendererInternal.getInEditFontSizeComponentKey());a=this.zta.getShapedTextComponentVersion(a)+g.CetModel.ID.HAS_FONT.getVersion(a)+n.CetRendererInternal.isLoadedComponentVersion(a)+n.CetRendererInternal.hidePlaceHolderTextKeyVersion(a)+g.CetModel.ID.STYLED.getVersion(a)+g.CetModel.ID.HAS_PADDING.getVersion(a)+(null==b?0:b.getVersion())+g.CetModel.ID.POSSIBLY_PLACEHOLDER.getVersion(a)+g.CetModel.textKludge.getTextComponent(a).getVersion();
this.textProps.cacheVersion!==a&&(this.textProps={layoutBounds:null,ztextBounds:null,urls:null,textLength:null,cacheVersion:a})}createRenderingShapes(a,b){return this.createRenderingShapesI(a,b,!1)}createRenderingShapesI(a,b,c){this.validateCaches(a);const d=[];var e=this.getFont(a);let f=this.getShapeTextHidePlaceHolder(a),h=this.getLayoutBoundsWithBackgroundIfAny(f,e,this.getFontSize(a)),g=e.getDisplayBackground()?e.getBackgroundPadding():0;if(!c){c=this.zta.getSelectedRange(a);if(e.getDisplayBackground()){var k=
b.createFillStyle(b.createSolidGradient(this.getColorWithAlpha(e.getBackgroundColor(),e.getBackgroundAlpha())));k=b.createPath(k,null);e=e.getBackgroundCornerRadius();if(null==e||0>=e)k.rect(-h.getWidth()/2,-h.getHeight()/2,h.getWidth(),h.getHeight());else{const a=Math.min(h.getWidth(),h.getHeight())/2;e=Math.max(0,Math.min(a,e));aa.ZRectangleDrawComponent.drawRoundedRectangle(k,h.getData(),e,!1)}d.push(k)}null!=c&&null!=c.start&&null!=c.end&&d.push(this.drawSelectionHighlight(g-h.getWidth()/2,g-
h.getHeight()/2,b,f,c,this.zta.getTextSelectionFocused(a)));a.hasComponent(n.CetRendererInternal.getTextUnderlineComponentKey())&&a.get(n.CetRendererInternal.getTextUnderlineComponentKey()).forEach((a)=>{d.push(...this.drawRedUnderline(g-h.getWidth()/2,g-h.getHeight()/2,a,b,f))})}d.push(b.createText(f,h,g,g,this.zta.hasCaret(a),n.CetRendererInternal.isLoaded(a)));return d}drawSelectionHighlight(a,b,c,d,e,f){d=d.getLayoutBoundsForRange(e.start,e.end);c=c.createPath(c.createFillStyle(c.createSolidGradient(this.getColorFromRGBIntA(f?
10010879:14277081,.5))),null);for(let e of d)0!==e.getWidth()&&0!==e.getHeight()&&c.rect(a+e.getLeft(),b+e.getTop(),e.getWidth(),e.getHeight());return c}drawRedUnderline(a,b,c,d,e){e=e.getLayoutBoundsForRange(c.start,c.end);c=[];for(let h of e)if(0!==h.getWidth()&&0!==h.getHeight()){e={x:a+h.getLeft(),y:b+h.getBottom()};var f={x:a+h.getRight(),y:b+h.getBottom()};e={headPos:e,tailPos:f,origin:{x:(e.x+f.x)/2,y:b+h.getBottom()},radius:0,startAngle:0,endAngle:0,isStraight:!0,isInverse:!1,color:this.getColorFromRGBString("#FF0000"),
thickness:2,alpha:1};f=d.createLineStyle(d.createSolidGradient(this.getColorWithAlpha(e.color,e.alpha)),e.thickness);f=d.createHairlineArc(f,!0);f.update(e);c.push(f)}return c}dispose(){this.isDisposed()||(this.disposed=!0,this.incrementVersion());super.dispose()}isDisposed(){return this.disposed}isFullyRenderable(a){return n.CetRendererInternal.isLoaded(a)}calculateGraphicsBounds(a){this.validateCaches(a);var b=this.getFont(a),c=this.getShapeTextHidePlaceHolder(a);let d=c.getClippingBounds((b)=>
this.createRenderingShapesI(a,b,!0));if(null==d||0===d.getWidth())d=this.getLayoutBounds(c,this.getFontSize(a));c=d.union(this.getLayoutBoundsWithBackgroundIfAny(c,b,this.getFontSize(a)));const e=this.updateHittestTextGraphicsBounds(c,a);b=b.getDisplayBackground()?c:d;this.textProps.ztextBounds={textbox:c,visible:b,glyphs:d,selectionbox:e};return c}calculateZTextBounds(a){this.validateCaches(a);null==this.textProps.ztextBounds&&this.calculateGraphicsBounds(a);return this.textProps.ztextBounds}updateHittestTextGraphicsBounds(a,
b){return this.getFont(b).getDisplayBackground()?a:a.inflate(ha.ZTextDrawComponent.NO_BG_TEXT_PADDING,ha.ZTextDrawComponent.NO_BG_TEXT_PADDING)}hitTest(a,b){this.validateCaches(a);let c=this.getLayoutBoundsWithBackgroundIfAny(this.getShapeTextHidePlaceHolder(a),this.getFont(a),this.getFontSize(a));return this.areaHittest(this.updateHittestTextGraphicsBounds(c,a),b)}enclosePoint(a,b){let c=a.getComponent(z.LocalBoundsComponent.KEY()).getGraphicsBounds();return this.areaHittest(this.updateHittestTextGraphicsBounds(c,
a),b)}getUrlAtPosition(a,b){var c;this.validateCaches(a);var d=this.getFont(a),e=this.getShapeTextHidePlaceHolder(a);e=this.getLayoutBoundsWithBackgroundIfAny(e,d,this.getFontSize(a));var f=d.getDisplayBackground()?d.getBackgroundPadding():0;d=b.x+e.getData().width/2-f;b=b.y+e.getData().height/2-f;if(null==this.textProps.urls)if(g.CetModel.textKludge.isEntityRichText(a)&&S.FeatureSwitcher.isActive("js-disable-auto-urls")){e=this.zta.getShapedText(a);a=g.CetModel.textKludge.getTextModel(a);this.textProps.urls=
[];f=-1;let b=null;for(let d=0;d<=a.getLength();d++){const h=d===a.getLength()?null:null===(c=a.getCharacterStylesAt(d).getUrlText())||void 0===c?void 0:c.value;h!==b&&(null!=b&&this.textProps.urls.push({url:b,bounds:e.getLayoutBoundsForRange(f,d)}),f=d,b=h)}}else this.textProps.urls=this.getUrlsWithBoundsFromShapedText(this.zta.getShapedText(a));c=this.textProps.urls;for(a=0;a<c.length;a++)for(e=0;e<c[a].bounds.length;e++)if(f=c[a].bounds[e],d>=f.getLeft()&&d<=f.getLeft()+f.getWidth()&&b>=f.getTop()&&
b<=f.getTop()+f.getHeight())return c[a].url;return""}getUrlsWithBoundsFromShapedText(a){let b=g.CetModel.urlMarker.getUrlsInText(a.getText(),0,a.getText().getLength()),c=[];for(let d=0,e=b.length;d<e;d++){let e=b[d],h=a.getLayoutBoundsForRange(e.pos,e.end);c.push({url:e.str,bounds:h})}return c}getShapeTextHidePlaceHolder(a){const b=this.zta.getShapedText(a);return this.zta.hasCaret(a)&&a.get(g.CetModel.ID.POSSIBLY_PLACEHOLDER.IS_PLACEHOLDER)&&a.get(n.CetRendererInternal.getHidePlaceHolderTextKey())?
(a=this.getLayoutBounds(b,this.getFontSize(a)),this.textProps.layoutBounds=null,b.deleteText(0,b.getLength()).setWrapWidth(a.getWidth())):b}getFont(a){return a.getWrapper(g.CetModel.ID.HAS_FONT.W)}getFontSize(a){return a.get(n.CetRendererInternal.getInEditFontSizeComponentKey())}getLayoutBounds(a,b){null==this.textProps.layoutBounds&&(0===a.getLength()&&(a=a.insertTextWithStyle(0," ",Y.TextModel.withFontSize(b))),this.textProps.layoutBounds=a.getLayoutBounds());return this.textProps.layoutBounds}getLayoutBoundsWithBackgroundIfAny(a,
b,c){a=this.getLayoutBounds(a,c);return b.getDisplayBackground()?a.inflate(b.getBackgroundPadding(),b.getBackgroundPadding()):a}};ha.ZTextDrawComponent.NO_BG_TEXT_PADDING=5;var ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.ZTopicContainerDrawComponent=class extends w.AbstractDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zTopicContainer}calculateGraphicsBounds(a){return r.BoundCalculation.getDefaultLocalBounds(a)}createRenderingShapes(){return[]}};var bb=
{};Object.defineProperty(bb,"__esModule",{value:!0});bb.ZTriangleDrawComponent=class extends O.PixelHittestedDrawComponent{constructor(){super(...arguments);this.kind=l.DrawComponentKind.zTriangle}calculateGraphicsBounds(a){a=a.getWrapper(g.CetModel.ID.Z_TRIANGLE.W);return r.BoundCalculation.addBorderToBounds(r.BoundCalculation.getRectangle(a),a)}createRenderingShapes(a,b){a=a.getWrapper(g.CetModel.ID.Z_TRIANGLE.W);var c=this.createSolidOrLinear(a,b,0,-a.getHeight()/2,0,a.getHeight()/2);c=b.createFillStyle(c);
const d=0<=a.getBorderThickness()?this.createBorderLineStyle(a,b):null;b=b.createPath(c,d);a=this.getTriangleVerticies(a);b.moveTo(a[0].x,a[0].y);b.lineTo(a[1].x,a[1].y);b.lineTo(a[2].x,a[2].y);b.lineTo(a[0].x,a[0].y);return[b]}getTriangleVerticies(a){a=r.BoundCalculation.getRectangle(a).getData();const b=a.y+a.height;return[{x:a.x+a.width/2,y:a.y},{x:a.x+a.width,y:b},{x:a.x,y:b}]}};var cb={};Object.defineProperty(cb,"__esModule",{value:!0});cb.ZZoomAreaDrawComponent=class extends G.AbstractRectangularDrawComponent{constructor(){super(...arguments);
this.kind=l.DrawComponentKind.zZoomArea}calculateGraphicsBounds(a){return r.BoundCalculation.getRectangle(a.getWrapper(g.CetModel.ID.Z_ZOOM_AREA.W))}createRenderingShapes(a,b){if(S.isActive("js-unique-differentiation"))return[];var c=b.createSolidGradient(this.getColorFromRGBString("#dcdcdc"));c=b.createLineStyle(c,0);b=b.createHairlineRectangle(null,c);b.update(this.calculateGraphicsBounds(a));return[b]}hitTest(a,b,c){return this.hitRectangleBorder(a,c,this.calculateGraphicsBounds(a),b,G.AbstractRectangularDrawComponent.HIT_PIXEL_AREA_ON_SCREEN,
1)}};var pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.BaseHitTest=class{getQuadTree(a){return a.getEntity().get(n.CetRendererInternal.getQuadTreeComponentKey())}getViewEntitiesUnderPoint(a,b){a=this.getQuadTree(a);return null!=a?this.sortInZOrder(a.queryPoint(b),!0):[]}getViewEntitiesInRectangle(a,b){a=this.getQuadTree(a);return null!=a?a.queryRectangle(b):[]}getViewEntitiesInRectangleInZOrder(a,b){return this.sortInZOrder(this.getViewEntitiesInRectangle(a,b))}enclosePoint(a,b,c){return this.getDrawComponent(b).enclosePoint(b,
c,a)}hitTest(a,b,c){const d=this.getDrawComponent(b);return d.hitTest(b,c,a,{hitTest:(c,f,h)=>this.pixelHitTest(c,f,h,b,a,d)})}getDrawComponent(a){return a.getComponent(n.CetRendererInternal.getDrawComponentKey())}urlTest(a,b){let c="";if(null==a)return c;if(g.CetModel.textKludge.isEntityText(a))try{let d=a.getComponent(n.CetRendererInternal.getDrawComponentKey()),e=a.getWrapper(g.CetModel.ID.TRANSFORMED.W).getWorldToLocal().transformPoint(b);c=d.getUrlAtPosition(a,e)}catch(d){c=""}else if(a.isDef(g.CetModel.ID.HAS_HYPERLINK))return a.getWrapper(g.CetModel.ID.HAS_HYPERLINK.W).getHyperlink();
return c}sortInZOrder(a,b=!1){a.sort((a,d)=>{var c=n.CetRendererInternal.zOrder(a),f=n.CetRendererInternal.zOrder(d);c=c.getZLayer()===l.LayerType.PdomLayer?0:1;f=f.getZLayer()===l.LayerType.PdomLayer?0:1;f=c-f;0===f&&(f=n.CetRendererInternal.zOrder(a).getZIndex()-n.CetRendererInternal.zOrder(d).getZIndex());return b?-f:f});return a}};var db={};Object.defineProperty(db,"__esModule",{value:!0});db.RenderingShapeCache=class extends U.BaseComponentKludge{constructor(a){super();this.drawComponentVersion=
a;this.renderingShapeCaches={}}getDrawComponentVersion(){return this.drawComponentVersion}set(a,b){this.renderingShapeCaches[a]=b}get(a){return this.renderingShapeCaches[a]}dispose(){for(const a of Object.keys(this.renderingShapeCaches)){const b=this.renderingShapeCaches[a];if(null!=b)for(const a of b.getShapes())a.removeFromShapeCache();delete this.renderingShapeCaches[a]}}};var qa={};Object.defineProperty(qa,"__esModule",{value:!0});qa.QuadTreeUpdaterImpl=class{shouldUpdateQuadTree(a){return a.hasComponent(n.CetRendererInternal.getZOrderComponentKey())&&
a.hasComponent(n.CetRendererInternal.getWorldGeometryComponentKey())}worldBounds(a){let b=k.Geometry.zeroRectangle();a.forEachEntities((a)=>{this.shouldUpdateQuadTree(a)&&(b=b.union(this.worldAxisAlignedBounds(a)))});return b}worldAxisAlignedBounds(a){if(g.CetModel.textKludge.isEntityText(a)){const b=a.getComponent(n.CetRendererInternal.getDrawComponentKey());let c=a.getComponent(n.CetRendererInternal.getLocalBoundsComponentKey()).getGraphicsBounds();c=b.updateHittestTextGraphicsBounds(c,a);a=n.CetRendererInternal.getLocalToWorld(a);
return c.transformAABB(k.Geometry.createFromTransform(a))}return a.getComponent(n.CetRendererInternal.getWorldGeometryComponentKey()).getWorldAxisAlignedBounds()}fillQuadTree(a,b){a.forEachEntities((a)=>{this.shouldUpdateQuadTree(a)&&b.insertOrUpdate(a,a.getId(),this.worldAxisAlignedBounds(a))})}update(a,b,c){let d=a.getEntity().get(n.CetRendererInternal.getQuadTreeComponentKey(),!0);if(null==d)c=k.Geometry.createQuadTree(qa.QuadTreeUpdaterImpl.QUAD_TREE_DEPTH,this.worldBounds(b)),this.fillQuadTree(b,
c),a.getEntity().set(n.CetRendererInternal.getQuadTreeComponentKey(),c);else for(let a of c)a.isDisposed()?d.remove(a.getId()):d.insertOrUpdate(a,a.getId(),this.worldAxisAlignedBounds(a))}};qa.QuadTreeUpdaterImpl.QUAD_TREE_DEPTH=6;var K={},Gb=this&&K.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,h){function f(a){try{k(d.next(a))}catch(y){h(y)}}function g(a){try{k(d["throw"](a))}catch(y){h(y)}}function k(a){a.done?
c(a.value):e(a.value).then(f,g)}k((d=d.apply(a,b||[])).next())})};Object.defineProperty(K,"__esModule",{value:!0});K.RenderingShapes=class{constructor(a){this.items=a;this.version=K.RenderingShapes.nextVersion++}getShapes(){return this.items}getVersion(){return this.version}};K.RenderingShapes.nextVersion=1;K.BaseRenderer=class{constructor(a,b){this.canvas=a;this.renderingShapeCacheInvalidatorKeys=b;this.isEnabled=!0;this.logger=J.LoggerModule.getLoggerManager().createLogger("BaseRenderer")}setEnabled(a){this.isEnabled=
a}getImageDataForTest(){return Gb(this,void 0,void 0,function*(){return null})}createSubRenderer(){throw Error("cannot create sub renderer");}clip(a){this.clipArea=a}unclip(){this.clipArea=null}getLocalBounds(a){return n.CetRendererInternal.getLocalBoundsComponent(a).getGraphicsBounds().getData()}getQuadTreeUpdater(){return new qa.QuadTreeUpdaterImpl}getRenderingShapes(a,b,c){const d=c.getKind(),e=this.getRenderingShapeCache(a,b);let f=e.get(d);null==f&&(f=b.isReadyToRender()?new K.RenderingShapes(b.createRenderingShapes(a,
c)):new K.RenderingShapes([]),e.set(d,f));return f}getRenderingHash(a){let b=0;this.renderingShapeCacheInvalidatorKeys.forEach((c)=>{c=a.getUntypedComponent(c);null!=c&&(b+=c.getVersion())});return b}diff(a,b){let c=[];if(null==b)return"";for(;null!=a&&a!==b;)this.renderingShapeCacheInvalidatorKeys.forEach((b)=>{null!=a.getUntypedComponent(b,!0)&&c.push("-> "+b.getName())}),a=a.getParentEntity();return c.join(", ")}logCache(){}getRenderingShapeCacheI(a,b){const c=this.getRenderingHash(a);let d=a.getComponent(n.CetRendererInternal.getShapeCacheKey(),
!0),e=null;var f=a.getParentEntity();null!=f&&f.getComponent(n.CetRendererInternal.getDrawComponentKey())===b&&(e=this.getRenderingShapeCacheI(f,b));b=null!=d&&d.getDrawComponentVersion()!==c;f=null!=d&&null!=e&&d.getDrawComponentVersion()===e.getDrawComponentVersion();if(b||f)this.logCache(()=>["  remove",d.getDrawComponentVersion(),a.tsto()]),a.setComponent(n.CetRendererInternal.getShapeCacheKey(),null),d=null;b=null!=d&&d.getDrawComponentVersion()===c;f=null!=e&&e.getDrawComponentVersion()===c;
if(b)return d;if(f)return e;d=new db.RenderingShapeCache(c);a.setComponent(n.CetRendererInternal.getShapeCacheKey(),d);this.logCache(()=>["  create",d.getDrawComponentVersion(),a.tsto()]);return d}getRenderingShapeCache(a,b){const c=this.getRenderingHash(a);this.logCache(()=>["called for",c,a.tsto()]);let d=this.getRenderingShapeCacheI(a,b),e=d.entityOwner;this.logCache(()=>["  return",d.getDrawComponentVersion(),e.tsto(),this.diff(e,e.getParentEntity())]);return d}shouldShowObjectId(a){return a.isDef(g.CetModel.ID.Z_OBJECT)&&
a.hasComponent(g.CetModel.MODEL())}drawSample(){throw Error("getSampleCanvas not implemented");}getSnapshotImageData(){throw Error("getSnapshotImageData not implemented");}getVideoViewLogForTest(){throw Error("getVideoViewLogForTest not implemented");}};var ba={};Object.defineProperty(ba,"__esModule",{value:!0});ba.LegacyFontMetrics=class{constructor(){this.legacyLineMetrics={};this.init()}init(){const a=this.loadMetrics();for(let b in a)if(a.hasOwnProperty(b)){const c=a[b],d=c[0],e=c[1];this.legacyLineMetrics[b]=
{ascent:d/ba.LegacyFontMetrics.LEGACY_METRICS_FONT_SIZE,descent:-e/ba.LegacyFontMetrics.LEGACY_METRICS_FONT_SIZE,lineGap:(c[2]-d-e)/ba.LegacyFontMetrics.LEGACY_METRICS_FONT_SIZE}}}lookupLegacyLineMetrics(a){return this.legacyLineMetrics[a]}loadMetrics(){return{"ACaslonReg.swf":[24,16.8,40.8],"accidentalpresident.swf":[22.35,5.3,27.65],"ActionJackson.swf":[20.45,3.9,24.35],"AdobeClean-BoldSemiCn.swf":[22.35,5.75,28.1],"AdobeCleanLight.swf":[22.15,6,28.15],"AdobeCleanRegular.swf":[22.45,5.8,28.25],
"AGaramondPro-Bold.swf":[21.25,6.45,27.7],"AGaramondPro-BoldItalic.swf":[21.25,6.8,28.05],"AGaramondPro-Italic.swf":[22,8.1,30.1],"AGaramondPro-Regular.swf":[22,8.45,30.45],"Agenda-Light.swf":[20.55,8.2,28.75],"Agenda-Semibold.swf":[20.55,8.2,28.75],"AgfaRotisSansSerif-Bold.swf":[23.3,6.15,29.45],"AgfaRotisSansSerif.swf":[22.25,5.7,27.95],"AgfaRotisSansSerifExtraBold.swf":[23.4,6.5,29.9],"Agnieszka_Handwriting.swf":[22.8,8.45,31.25],"AkkuratStdBd.swf":[23.55,7,30.55],"AkkuratStdIt.swf":[23.55,7,30.55],
"AkkuratStdRg.swf":[23.55,7,30.55],"AkzidGroLight.swf":[21.7,6.1,27.8],"AkzidGroMedium.swf":[23.1,5.3,28.4],"AkzidGroReg.swf":[23.95,7,30.95],"AkzidGroStdBold.swf":[22.2,5.5,27.7],"AlberBold.swf":[18.45,5.5,23.95],"AlberItalic.swf":[18.45,5.5,23.95],"AlberRegular.swf":[18.45,5.5,23.95],"Alice-Regular.swf":[21.8,5.6,27.4],"AlternateGotNo3D.swf":[20.6,6,26.6],"Amatic-Bold.swf":[24,1.85,25.85],"AmaticSC-Regular.swf":[24.35,5.85,30.2],"AmnestyTradeGothic-Bd2.swf":[23.4,5.45,28.85],"AmnestyTradeGothic-BdCn20.swf":[23.4,
5.45,28.85],"AmnestyTradeGothic.swf":[23.4,5.45,28.85],"AnnieUseYourTelescope-B.swf":[24.55,9.8,34.35],"AnnieUseYourTelescope-BI.swf":[24.55,9.8,34.35],"AnnieUseYourTelescope-I.swf":[24.55,9.8,34.35],"AnnieUseYourTelescope.swf":[24.55,9.8,34.35],"AnonymousPro-Bold.swf":[19.6,4.35,23.95],"AnonymousPro-BoldItalic.swf":[19.6,4.35,23.95],"AnonymousPro-Italic.swf":[19.6,4.35,23.95],"AnonymousPro-Regular.swf":[19.6,4.35,23.95],"Apercu_Pro_Medium.swf":[22.75,5.85,28.6],"Arabica-Italic.swf":[15.25,4.2,19.45],
"Arabica.swf":[15.25,4.2,19.45],"arial-black.swf":[26.4,7.4,33.8],"arial-bold-italic.swf":[21.7,5.05,26.75],"arial-bold.swf":[21.7,5.05,26.75],"arial-italic.swf":[21.7,5.05,26.75],"arial-narrow.swf":[22.1,5.05,27.15],"arial-new.swf":[22.25,5.65,27.9],"arial-semibold.swf":[21.7,5.05,26.75],"arial.swf":[21.7,5.05,26.75],"Arial_Narrow_Bold.swf":[22.35,5.05,27.4],"Arial_Narrow_Italic.swf":[21.9,5.05,26.95],"ArialRoundedMT.swf":[22.65,5.35,28],"ArialRoundedMTBold.swf":[22.65,5.35,28],"ArialRoundedMTLight.swf":[22.65,
5.35,28],"AritaB.swf":[19.4,4.55,23.95],"Arvil_Sans.swf":[21.45,3.8,25.25],"Asap-B.swf":[22.4,5.05,27.45],"Asap.swf":[22.4,5.05,27.45],"Asda-Freestyle.swf":[22.5,10.75,33.25],"AssaVesta-Bold.swf":[22.55,5.4,27.95],"AssaVesta-Regular.swf":[22.4,5.45,27.85],"atmosphere.swf":[17.25,4.8,22.05],"AudiBold.swf":[23.5,5.75,29.25],"AudiNormal.swf":[23.5,5.75,29.25],"AvantGardeGhotic-Demi.swf":[24.1,6,30.1],"AvantGardeGothic-Bold.swf":[24.85,7.9,32.75],"AvantGardeGothic-Book.swf":[23.2,5.35,28.55],"AvantGardeGothic-Medium.swf":[24.25,
6.2,30.45],"AvenirLT35Light.swf":[22.35,6,28.35],"AvenirLT45Book.swf":[22.05,6.9,28.95],"AvenirLT65Medium.swf":[22.15,6.75,28.9],"AvenirLTStd-Black.swf":[22.85,6,28.85],"AvenirLTStd-Heavy.swf":[22.5,6,28.5],"AvenirLTStd-MediumOblique.swf":[22.15,6.75,28.9],"AvenirLTStd-Roman.swf":[22.25,6,28.25],"BakerScript.swf":[34.25,27.35,61.6],"Baskerville-Normal.swf":[21,6.6,27.6],"Belgacom-Light.swf":[22.35,5.65,28],"Belgacom-Regular.swf":[22.45,5.45,27.9],"BellSlimBold.swf":[23.05,6,29.05],"BellSlimRegular.swf":[22.5,
5.75,28.25],"BemboMTPro-Regular.swf":[22.15,5.55,27.7],"Beroga.swf":[22.85,6.85,29.7],"BirchCTT.swf":[23.8,11.8,35.6],"bkai00mp.swf":[21.05,2.9,23.95],"BLACKJACK.swf":[23.85,12.5,36.35],"BlenderPro-Bold.swf":[20.2,4.75,24.95],"BlenderPro-Book.swf":[19.2,4.8,24],"BlenderPro-Medium.swf":[20.4,4.2,24.6],"BlenderPro-Thin.swf":[20.95,4.2,25.15],"BlissPro-Bold.swf":[22.85,5.75,28.6],"BlissPro-Heavy.swf":[20.45,5.65,26.1],"BlissPro-Light.swf":[22.85,5.75,28.6],"BlissPro-Regular.swf":[22.85,5.75,28.6],"bluehighd.swf":[16.6,
4.45,21.05],"blueHighway.swf":[16.6,4.45,21.05],"BMWbold.swf":[22.75,5.15,27.9],"BMWlight.swf":[22.7,4.95,27.65],"BMWregular.swf":[22.6,4.95,27.55],"BNPPSans.swf":[20.5,8.25,28.75],"BNPPSansBold.swf":[20.5,8.25,28.75],"BNPPSansCond.swf":[19.2,7.2,26.4],"BNPPSansLight.swf":[20.5,8.25,28.75],"BNPPSansv3.swf":[20.5,8.25,28.75],"BodegaDisplay.swf":[18.2,4.95,23.15],"bodoniBold.swf":[22.7,5.65,28.35],"BodoniBoldItalic.swf":[22.8,5.65,28.45],"bodoniBook.swf":[22.55,5.85,28.4],"bodoniBookItalic.swf":[22.4,
6,28.4],"bodoniRegular.swf":[22.9,6.5,29.4],"body-666666.swf":[24.1,5,29.1],"BurberryCapitals.swf":[22.5,6.3,28.8],"BurberryCapitalsSmall.swf":[22.5,6.3,28.8],"Cachet-Book.swf":[23.7,5.75,29.45],"Cachet-Medium.swf":[23.7,5.75,29.45],"CachetStd-Bold.swf":[23.6,5.7,29.3],"CaeciliaforLL-Roman.swf":[22.2,6.45,28.65],"Calibri-BoldItalic.swf":[22.85,6.4,29.25],"Calibri-LightItalic.swf":[22.85,6.4,29.25],"Calibri-new.swf":[22.85,6.4,29.25],"calibri.swf":[22.85,6.4,29.25],"CALIBRIB.swf":[22.85,6.4,29.25],
"calluna-regular.swf":[22.8,6,28.8],"candara.swf":[22.85,6.4,29.25],"CandaraB.swf":[22.85,6.4,29.25],"CandaraI.swf":[22.85,6.4,29.25],"Cardo-Italic.swf":[23.75,8.7,32.45],"century.swf":[23.65,5.15,28.8],"CenturyGothic.swf":[23.3,5.25,28.55],"CenturyGothicDemi.swf":[23.8,5.25,29.05],"CenturyGothicForNordnet-Medium.swf":[23.25,5.3,28.55],"CenturyGothicForNordnet-Semibold.swf":[23.25,5.3,28.55],"ChaletBookRegular.swf":[22.55,5.65,28.2],"ChaletNewYorkNineteenEighty.swf":[22.9,6,28.9],"ChaletParisEighty.swf":[22.2,
6,28.2],"ChaletTTBody.swf":[23,6.05,29.05],"ChaletTTBold.swf":[22.9,6,28.9],"ChaletTTTitle.swf":[22.1,6,28.1],"Chanewei.swf":[22.9,6,28.9],"CharterITCStd-Bold.swf":[23.05,6,29.05],"ChocoBold.swf":[16.8,8.4,25.2],"ChocoRegular.swf":[16.8,8.4,25.2],"ClaredonHvBt.swf":[23.1,5.65,28.75],"ClarendonLTStdLight.swf":[21.85,6,27.85],"conduitclig.swf":[20.5,5.6,26.1],"consolas.swf":[22.05,6,28.05],"Copperplate.swf":[23.05,6,29.05],"Corbel.swf":[22.85,6.4,29.25],"CorbelBold.swf":[22.85,6.4,29.25],"CorisandeRegular.swf":[21.3,
6,27.3],"CreditSuisseBold.swf":[22.6,5.4,28],"CreditSuisseLight.swf":[22.3,5.95,28.25],"CreditSuisseLightIt.swf":[22.3,5.95,28.25],"creditva.swf":[18.9,4.45,23.35],"Crial-B.swf":[21.3,5.6,26.9],"Crial-Black-Latin2.swf":[23.15,5.6,28.75],"Crial-Black.swf":[23.15,5.6,28.75],"Crial.swf":[21.3,5.6,26.9],"Crialblack-B.swf":[21.3,5.6,26.9],"Crialblack-BI.swf":[21.3,5.6,26.9],"Crialblack-I.swf":[21.3,5.6,26.9],"CrimsonText-B.swf":[25.9,17.3,43.2],"CrimsonText-BI.swf":[22,5.55,27.55],"CrimsonText-I.swf":[21.25,
6.3,27.55],"CrimsonText-SB.swf":[24.6,5.8,30.4],"CrimsonText-SBI.swf":[24.55,5.7,30.25],"CrimsonText.swf":[24,6.95,30.95],"CycloneBG.swf":[24.35,6.9,31.25],"DancingScript-B.swf":[22.05,6.7,28.75],"DancingScript-BI.swf":[22.05,6.7,28.75],"DancingScript-Bold.swf":[22.05,6.7,28.75],"DancingScript-I.swf":[22.05,6.7,28.75],"DancingScript-Regular-Latin2.swf":[22.05,6.7,28.75],"DancingScript-Regular.swf":[22.05,6.7,28.75],"DancingScript.swf":[22.05,6.7,28.75],"daniel.swf":[22.1,12.85,34.95],"danielbd.swf":[20.6,
12.35,32.95],"danielbk.swf":[22.25,12.85,35.1],"DaxCEBold.swf":[22.35,5.6,27.95],"DaxWideLight.swf":[23.85,7.5,31.35],"DaxWidLight.swf":[23.85,7.5,31.35],"DaxWidMed.swf":[21.7,5.45,27.15],"DaxWidReg.swf":[21.55,5.45,27],"DejaVuSansMono-B.swf":[22.25,5.65,27.9],"DejaVuSansMono-BoldOblique.swf":[22.25,5.65,27.9],"DejaVuSansMono-Oblique.swf":[22.25,5.65,27.9],"DejaVuSansMono.swf":[22.25,5.65,27.9],"Diavlo-Book.swf":[22.7,5.9,28.6],"Diavlo-Light.swf":[22.85,5.95,28.8],"Diavlo_BOLD.swf":[23.85,5.9,29.75],
"DidotLTStd-Roman.swf":[22.55,7.15,29.7],"DINBlack.swf":[24.7,4.8,29.5],"DinG_Bold.swf":[30.5,11.05,41.55],"DinG_Reg.swf":[29.75,11.55,41.3],"DINMittelschrift.swf":[22.5,6,28.5],"DINNeuzeitGrotesk-BoldCond.swf":[22.4,6,28.4],"DINNextRoundedLTPro-Light.swf":[20.4,8.4,28.8],"DINNextRoundedLTPro-Regular.swf":[20.4,8.4,28.8],"DINOT-Bold.swf":[24.95,5.65,30.6],"DINOT-Light.swf":[24.95,5.65,30.6],"DINOT-Medium.swf":[24.95,5.65,30.6],"DINOT.swf":[24.95,5.65,30.6],"DINProBlack.swf":[24.95,5.65,30.6],"DINProBold.swf":[24.95,
5.65,30.6],"DINProLight.swf":[24.95,5.65,30.6],"DINProMedium.swf":[24.95,5.65,30.6],"DINProRegular.swf":[24.95,5.65,30.6],"Dosis-Bold.swf":[24.6,5.65,30.25],"Dosis-ExtraBold.swf":[24.6,5.65,30.25],"Dosis-ExtraLight.swf":[24.6,5.65,30.25],"Dosis-Light.swf":[24.6,5.65,30.25],"Dosis-Medium.swf":[24.6,5.65,30.25],"Dosis-Regular.swf":[24.6,5.65,30.25],"Dosis-SemiBold.swf":[24.6,5.65,30.25],"DroidSans-Bold.swf":[22.25,5.65,27.9],"DroidSans.swf":[22.25,5.65,27.9],"DUTYBold.swf":[21.4,4.85,26.25],"DUTYLight.swf":[21,
4.85,25.85],"Effra_Std_Bd.swf":[22.8,6,28.8],"Effra_Std_Lt.swf":[22.8,6,28.8],"Effra_Std_Md.swf":[22.8,6,28.8],"Einhorn.swf":[22,5,27],"EngelNewSansSTD_Bold.swf":[23.55,6.85,30.4],"EngelNewSansSTD_Book.swf":[22.9,5.65,28.55],"EngelNewSansSTD_Regular.swf":[22.75,5.65,28.4],"EricssonCapitalTT.swf":[22.35,6.15,28.5],"EU______.swf":[23.2,6,29.2],"EUD_____.swf":[23.8,6,29.8],"EurostileDemi.swf":[23.8,6,29.8],"EurostileLTStd-Ex2.swf":[25,6.65,31.65],"existence-unicaselight.swf":[21.4,7,28.4],"EYInterstate-Bold.swf":[23,
5.75,28.75],"EYInterstate-Light.swf":[23,5.75,28.75],"EYInterstate-Regular.swf":[23,5.75,28.75],"FanwoodText-Italic.swf":[22,9.4,31.4],"FAXFONTStandard.swf":[18.4,6.9,25.3],"FedraBold.swf":[23.4,6.6,30],"FedraSansStdBold.swf":[23.4,6.6,30],"FedraSansStdBook.swf":[21.05,5.7,26.75],"FedraSansStdLight.swf":[21,5.5,26.5],"FedraSansStdMedium.swf":[22.15,6.35,28.5],"FedraSansStdNormal.swf":[23.4,6.6,30],"FelixDrawnCaps-Regular.swf":[23.9,4.85,28.75],"fertigopro.swf":[22.8,6,28.8],"FFJustlefthand.swf":[21.15,
10.25,31.4],"FontAwesome.swf":[22.55,6.2,28.75],"Fontin-B.swf":[21.3,6.4,27.7],"Fontin-BI.swf":[21.3,6.4,27.7],"Fontin-I.swf":[21.05,6.4,27.45],"Fontin-Latin2.swf":[24,4.8,28.8],"Fontin-SC.swf":[21.3,6.05,27.35],"Fontin.swf":[24,4.8,28.8],"FontopoNIHONGO.swf":[21.1,4.7,25.8],"FranclinDemiItalic.swf":[21.95,5.2,27.15],"FranklinBookItalic.swf":[21.95,5.2,27.15],"FranklinGMedium.swf":[21.95,5.2,27.15],"FranklinGMediumItalic.swf":[21.95,5.2,27.15],"FranklinGothicBook.swf":[21.95,5.2,27.15],"FranklinGothicDemi.swf":[21.95,
5.2,27.15],"FranklinGothicHeavy.swf":[21.95,5.2,27.15],"FranklinGothicMedium.swf":[21.35,6,27.35],"freeserif.swf":[21.6,7.2,28.8],"Frutiger45B.swf":[22.4,6,28.4],"Frutiger45L.swf":[21.85,6,27.85],"frutigerBold.swf":[22.55,6,28.55],"FrutigerLTCom-Light.swf":[21.85,6,27.85],"FrutigerLTStd-Black.swf":[22.85,6,28.85],"FrutigerLTStd-BlackItalic.swf":[22.7,6,28.7],"FrutigerLTStd-Bold.swf":[22.4,6,28.4],"FrutigerLTStd-ExtraBlackCn.swf":[23,6,29],"FrutigerLTStd-Italic.swf":[22.3,6,28.3],"FrutigerLTStd-Light.swf":[21.85,
6,27.85],"FrutigerLTStd-Roman.swf":[22.4,6,28.4],"FrutigerLTStd-UltraBlack.swf":[23.05,6,29.05],"FrutigerNextPro-Bold.swf":[21.7,6.65,28.35],"FrutigerNextPro-Light.swf":[21.7,6.65,28.35],"FrutigerNextPro-Medium.swf":[21.7,6.65,28.35],"frutigerRegular.swf":[22.25,6,28.25],"FS-Sammy-Regular.swf":[24.05,12.8,36.85],"FSAlbert-Bold.swf":[21.75,5.25,27],"FSAlbert-Light.swf":[21.8,5.25,27.05],"FSAlbert.swf":[21.65,5.25,26.9],"FSClerkenwell-Light.swf":[18.4,6.2,24.6],"FSClerkenwell-Regular.swf":[18.6,6.2,
24.8],"futura-itao.swf":[21.5,5.6,27.1],"futura-itao_bold.swf":[22.2,5.55,27.75],"futura-itao_italic.swf":[21.5,5.65,27.15],"futura_bk_bt.swf":[23.1,5.65,28.75],"futura_lt_bt.swf":[23.05,5.65,28.7],"FuturaBlackBT.swf":[22.9,5.85,28.75],"FuturaBold.swf":[25.65,6.3,31.95],"FuturaBook.swf":[24.1,7,31.1],"FuturaBookBT.swf":[23.1,5.65,28.75],"FuturaBookOblique.swf":[25.3,7,32.3],"FuturaDemibold.swf":[22.4,6,28.4],"FuturaHEMABold.swf":[24.8,5.9,30.7],"FuturaHEMADemiBold.swf":[23.7,6.85,30.55],"FuturaHvBT.swf":[23.1,
5.65,28.75],"FuturaLight.swf":[23.1,7.2,30.3],"FuturaMedium.swf":[23.85,6.4,30.25],"FuturaStd-CondensedBold.swf":[23.75,6.25,30],"FuturaStd-CondensedExtraBd.swf":[23.95,5.9,29.85],"FuturaStd-Medium.swf":[23.85,6.4,30.25],"FuturaStdBold.swf":[24.95,6.3,31.25],"FuturaStdBook.swf":[24.1,7,31.1],"Garamond.swf":[20.65,6.3,26.95],"Garamond3LTStd-Italic.swf":[19.95,6.05,26],"Garamond3LTStd.swf":[20.2,6,26.2],"GaramondPremrPro.swf":[22,8.05,30.05],"GaramondRough-BoldItalic.swf":[22.4,6.45,28.85],"gbsn00lp.swf":[21.05,
2.9,23.95],"GE_InspiraG_Regular.swf":[22.4,5.6,28],"GenBas-B.swf":[20.95,6.75,27.7],"GenBas-BI.swf":[20.95,6.75,27.7],"GenBas-I.swf":[20.95,6.75,27.7],"GenBas.swf":[20.95,6.75,27.7],"GentiumBasic-B.swf":[20.95,6.75,27.7],"GentiumBasic-BI.swf":[20.95,6.75,27.7],"GentiumBasic-I.swf":[20.95,6.75,27.7],"GentiumBasic.swf":[20.95,6.75,27.7],"GentiumPlus-I.swf":[26.35,8.75,35.1],"GentiumPlus-R.swf":[26.35,8.75,35.1],"GeoGebra.swf":[23.3,5.25,28.55],"GeometrBlack.swf":[23.1,5.65,28.75],"GeometrMedium.swf":[23.1,
5.65,28.75],"Georgia.swf":[22,5.25,27.25],"GeorgiaBold.swf":[22,5.25,27.25],"GeorgiaBoldItalic.swf":[22,5.25,27.25],"GeorgiaItalic.swf":[22,5.25,27.25],"Gill_Sans_MT.swf":[22.3,5.5,27.8],"Gill_Sans_MT_Bold.swf":[22.3,5.5,27.8],"Gill_Sans_MT_Book.swf":[22.3,5.75,28.05],"Gill_Sans_MT_BookItalic.swf":[22.3,5.75,28.05],"Gill_Sans_MT_Light.swf":[21.65,5.7,27.35],"Gill_Sans_MT_Medium.swf":[22.3,5.6,27.9],"GILL_Sans_UltraBoldCD.swf":[23.85,6,29.85],"GillAltBold.swf":[22.3,5.5,27.8],"GillAltItalic.swf":[22.3,
5.5,27.8],"GillAltRegular.swf":[22.3,5.5,27.8],"GillBold.swf":[22.3,5.5,27.8],"GillRegular.swf":[22.3,5.5,27.8],"GlyphaLTStd-Black.swf":[23.1,6,29.1],"GlyphaLTStd-Bold.swf":[23.4,5.05,28.45],"GlyphaLTStd-Light.swf":[22.05,6,28.05],"GlyphaLTStd.swf":[23,4.95,27.95],"Gotham-Black.swf":[23,5.75,28.75],"Gotham-Bold.swf":[23,5.75,28.75],"Gotham-Book.swf":[23,5.75,28.75],"Gotham-Light.swf":[23,5.75,28.75],"Gotham-Medium.swf":[23,5.75,28.75],"Gotham-MediumItalic.swf":[23,5.75,28.75],"Gotham-XLight.swf":[23,
5.75,28.75],"GothamCond-Medium.swf":[23,5.75,28.75],"GothamRnd-Bold.swf":[23,5.75,28.75],"GothamRnd-Book.swf":[23,5.75,28.75],"GothamRnd-BookIta.swf":[23,5.75,28.75],"GothamRnd-Light.swf":[23,5.75,28.75],"GothamRnd-MedIta.swf":[23,5.75,28.75],"GothamRndMedium.swf":[23,5.75,28.75],"GothicLT.swf":[23,5.35,28.35],"GothicLTBold.swf":[23.3,5.45,28.75],"GoudyStd.swf":[23.2,6,29.2],"Graphite-Light.swf":[22.3,5.6,27.9],"GreyscaleBasicBold.swf":[22.65,4.3,26.95],"GreyscaleBasicBoldItalic.swf":[22.65,4.3,26.95],
"GreyscaleBasicRegular.swf":[22.65,4.3,26.95],"GreyscaleBasicRegularItalic.swf":[22.65,4.3,26.95],"handsean.swf":[31.05,11.8,42.85],"handwriting.swf":[25.45,10.4,35.85],"heiLight.swf":[19.3,4.5,23.8],"helvetica.swf":[21.75,5,26.75],"HelveticaBold.swf":[21.95,5.2,27.15],"HelveticaLTBlackCondensed.swf":[23.3,5.5,28.8],"HelveticaLTBoldCondensed.swf":[23.05,5.35,28.4],"HelveticaNeueBlack.swf":[22.85,5.55,28.4],"HelveticaNeueCondense.swf":[22.35,5.05,27.4],"HelveticaNeueLTComLt.swf":[23.2,5.1,28.3],"HelveticaNeueLTPro-Blk.swf":[22.85,
5.55,28.4],"HelveticaNeueLTPro-Lt.swf":[23.2,5.1,28.3],"HelveticaNeueLTPro-Roman.swf":[22.8,5.1,27.9],"HelveticaNeueLTStd-BdCnO.swf":[23.05,6.5,29.55],"HelveticaNeueLTStd-Black.swf":[22.85,5.55,28.4],"HelveticaNeueLTStd-BlkCnO.swf":[23.3,6.45,29.75],"HelveticaNeueLTStdBd.swf":[23.4,5.2,28.6],"HelveticaNeueLTStdIt.swf":[22.95,5.1,28.05],"HelveticaNeueLTStdLt.swf":[23.2,5.1,28.3],"HelveticaNeueLTStdMd.swf":[22.8,5.3,28.1],"HelveticaNeueLTStdRoman.swf":[22.8,5.1,27.9],"HelveticaNeueLTStdThin.swf":[22.2,
5.1,27.3],"HelveticaNeueRoman.swf":[22.8,5.1,27.9],"HiraginoSansGBW3.swf":[22.8,5,27.8],"HiraginoSansGBW6.swf":[24.75,4.95,29.7],"House-A-Rama-League-Night.swf":[22.1,11.35,33.45],"HPSimplified_Bd.swf":[24,7.55,31.55],"HPSimplified_Lt.swf":[24,7.55,31.55],"HPSimplified_Rg.swf":[24,7.55,31.55],"HuiFont29.swf":[20.6,3.35,23.95],"HumanistBlack.swf":[23.8,5.65,29.45],"HumanistLItalic.swf":[23.1,5.65,28.75],"HumanistRoman.swf":[23.25,5.65,28.9],"Husans-Normal.swf":[21.95,5.1,27.05],"IMFeGPsc28P.swf":[22.75,
6.55,29.3],"impact.swf":[24.2,5.05,29.25],"Inconsolata.swf":[20,4.2,24.2],"INFINSTB.swf":[26.85,5.6,32.45],"INTERHLightCond.swf":[21.9,4.6,26.5],"Interstate-Bold.swf":[23,5.75,28.75],"Interstate-Light.swf":[23,5.75,28.75],"Interstate-LightItalic.swf":[23,5.75,28.75],"Interstate-Regular.swf":[23.6,5.15,28.75],"InterstateBold.swf":[21.8,4.6,26.4],"InterstateExtraLight.swf":[21.5,4.7,26.2],"InterstateRegular.swf":[21.85,4.6,26.45],"IstokWeb-Bold.swf":[24.15,10.35,34.5],"IstokWeb-Italic.swf":[24.15,10.35,
34.5],"IstokWeb-Regular.swf":[24.15,10.35,34.5],"ITCCharterBI.swf":[23.1,5.65,28.75],"ITCCharterCom-Italic.swf":[23.05,5.9,28.95],"ITCCharterCom-Regular.swf":[23.05,5.9,28.95],"ITCFranklinGothicStd-DemiIt.swf":[21.4,6,27.4],"ITCFranklinGothicStd-Hvy.swf":[22.3,6,28.3],"ITCFranklinGothicStd-Med.swf":[21.35,6,27.35],"ITCFranklinGothicStd-MedIt.swf":[21.35,6,27.35],"ITCKabelStd-Bold.swf":[22.8,6,28.8],"ITCKabelStd-Book.swf":[22.15,6,28.15],"ITCKabelStd-Medium.swf":[22.3,6,28.3],"ITCQuaySansBlack.swf":[22.15,
5.85,28],"ITCQuaySansBook.swf":[21.05,5.35,26.4],"ITCQuaySansMedium.swf":[21.45,5.35,26.8],"jd.swf":[20.7,11.15,31.85],"JimLeeCartoon.swf":[29,2.85,31.85],"JosefinSlab-B.swf":[18,6,24],"JosefinSlab-BI.swf":[22.35,6,28.35],"JosefinSlab-I.swf":[18,6,24],"JosefinSlab-L.swf":[22.3,6,28.3],"JosefinSlab-Latin2.swf":[22.8,6,28.8],"JosefinSlab-LI.swf":[22.3,6,28.3],"JosefinSlab-SB.swf":[22.35,6,28.35],"JosefinSlab-SBI.swf":[22.35,6,28.35],"JosefinSlab-T.swf":[22.3,6,28.3],"JosefinSlab-TI.swf":[22.3,6,28.3],
"JosefinSlab.swf":[22.8,6,28.8],"KadaRegular.swf":[23.3,2.95,26.25],"kaitiM.swf":[21.05,2.9,23.95],"KlavikaBold.swf":[21,6,27],"KlavikaItalic.swf":[21,6,27],"KlavikaRegular.swf":[21,6,27],"Knowledge-Light.swf":[21.6,5.4,27],"Knowledge-Medium.swf":[21.6,5.4,27],"Knowledge-Regular.swf":[21.6,5.4,27],"kochi-gothic-subst.swf":[20.6,3.35,23.95],"KodomoRounded.swf":[29.4,4.4,33.8],"Kunlasatri-Bold.swf":[17.3,9.15,26.45],"Kunlasatri-Light.swf":[17.3,9.15,26.45],"Kunlasatri.swf":[17.3,9.15,26.45],"KvBd____.swf":[22.65,
6,28.65],"KvRg____.swf":[22.65,6,28.65],"LetterGothicStd-Bold.swf":[23.35,6.9,30.25],"LetterGothicStd-Slanted.swf":[22.25,6.9,29.15],"LiberationMono-Regular.swf":[19.95,7.2,27.15],"LiberationSans-Regular.swf":[21.7,5.05,26.75],"LiberationSerif-Bold.swf":[21.35,5.15,26.5],"LiberationSerif-Regular.swf":[21.35,5.15,26.5],"LLHermes-Regular.swf":[24.05,5.1,29.15],"LLHermes-Thin.swf":[23.75,5.1,28.85],"LobsterTwo-B.swf":[24,6,30],"LobsterTwo-BI.swf":[24,6,30],"LobsterTwo-I.swf":[24,6,30],"LobsterTwo.swf":[24,
6,30],"LoveYaLikeASister-B.swf":[22.05,7.8,29.85],"LoveYaLikeASister-BI.swf":[22.05,7.8,29.85],"LoveYaLikeASister-I.swf":[22.05,7.8,29.85],"LoveYaLikeASister.swf":[22.05,7.8,29.85],"LTe50263_0.swf":[23.2,5.1,28.3],"LTe50872_0.swf":[22.35,5.05,27.4],"LTe50924.swf":[23.4,5.5,28.9],"LucidaGrandeRegular.swf":[23.2,5.05,28.25],"LucidaSansBold.swf":[22.15,6,28.15],"LucidaSansRegular.swf":[22.25,5.05,27.3],"Mailart-Regular.swf":[25.3,5.75,31.05],"malgun.swf":[26.1,5.8,31.9],"MaxLight.swf":[23.9,5.4,29.3],
"MaxSemiBold.swf":[23.9,5.4,29.3],"MaxTFLight.swf":[23.9,5.4,29.3],"mctsbody.swf":[20.35,6.15,26.5],"mctshead.swf":[21.25,6.5,27.75],"mctsstrong.swf":[20.55,6.1,26.65],"MemphisLTStd-Bold.swf":[23.6,6,29.6],"MemphisLTStd-ExtraBold.swf":[24,6,30],"MendozaRomanStdBook.swf":[23.05,6,29.05],"MendozaRomanStdMedium.swf":[23.15,6,29.15],"MendozaRomITCMedSC.swf":[23.3,5.5,28.8],"MercuryDisplay-BolIta.swf":[23,5.75,28.75],"MerriweatherSans-Bold.swf":[23.6,6.55,30.15],"MerriweatherSans-ExtraBold.swf":[23.6,
6.55,30.15],"MerriweatherSans-Light.swf":[23.6,6.55,30.15],"MerriweatherSans-Regular.swf":[23.6,6.55,30.15],"MesseUnivers-B.swf":[23.35,5.5,28.85],"MesseUnivers-Bold.swf":[23.35,5.5,28.85],"MesseUnivers-Light.swf":[23.35,5.5,28.85],"MesseUnivers-Regular.swf":[23.35,5.5,28.85],"MesseUnivers.swf":[23.35,5.5,28.85],"MetaCorrBold.swf":[21.1,5.25,26.35],"MetaCorrRoman.swf":[21.1,5.25,26.35],"MetaOTBold.swf":[27.35,8.3,35.65],"MetaOTItalic.swf":[22.2,4.95,27.15],"MetaOTNorm.swf":[27.35,8.3,35.65],"MetaProNormal.swf":[23.5,
8.35,31.85],"MetaSerifOT-Bold.swf":[28.45,6.95,35.4],"MetaSerifOT-Book.swf":[28.45,6.95,35.4],"MetaSerifOT-Medi.swf":[28.45,6.95,35.4],"Mic32NewRegular.swf":[21.95,5.65,27.6],"Michroma.swf":[27.75,6.35,34.1],"MICRODBoldExt.swf":[24.25,6.8,31.05],"MICRODMediumExt.swf":[23.2,4.9,28.1],"migmix-1m-bold.swf":[25.8,7.65,33.45],"migmix-1m-regular.swf":[25.8,7.65,33.45],"migmix-1p-bold.swf":[25.8,7.65,33.45],"migmix-1p-regular.swf":[25.8,7.65,33.45],"migmix-2m-bold.swf":[25.8,7.65,33.45],"migmix-2m-regular.swf":[25.8,
7.65,33.45],"migmix-2p-bold.swf":[25.8,7.65,33.45],"migmix-2p-regular.swf":[25.8,7.65,33.45],"migu-1c-bold.swf":[25.8,7.65,33.45],"migu-1c-regular.swf":[25.8,7.65,33.45],"migu-1m-bold.swf":[21.1,5.5,26.6],"migu-1m-regular.swf":[21.1,5.5,26.6],"migu-1p-bold.swf":[25.8,7.65,33.45],"migu-1p-regular.swf":[25.8,7.65,33.45],"migu-2m-bold.swf":[21.1,5.5,26.6],"migu-2m-regular.swf":[21.1,5.5,26.6],"mingHeavy.swf":[19.2,5.45,24.65],"mingMedium.swf":[19.55,4.85,24.4],"MiniBold.swf":[22.4,5.15,27.55],"MiniHeadIcon.swf":[23.3,
4,27.3],"MiniHeadline.swf":[23.3,4.8,28.1],"MinionPro-Regular.swf":[22,8.6,30.6],"MiniRegular.swf":[22.1,5.15,27.25],"MisterK.swf":[17.7,16.35,34.05],"MLPOfficeBld.swf":[21.45,5.6,27.05],"MLPOfficeReg.swf":[20.8,5.4,26.2],"MontagLight.swf":[22.6,8.9,31.5],"MontagRegular.swf":[24.75,8.85,33.6],"MrEavesModOT-Bold.swf":[20.15,6.45,26.6],"MrEavesModOT-Reg.swf":[20.15,6.45,26.6],"MrEavesModOT-RegItalic.swf":[20.15,6.45,26.6],"museo500regular.swf":[22.55,6.2,28.75],"MuseoSans300.swf":[22.55,6.2,28.75],
"MuseoSans500.swf":[22.55,6.2,28.75],"MuseoSlab300.swf":[22.55,6.2,28.75],"MuseoSlabItalic.swf":[22.55,6.2,28.75],"MyriadPro-Cond.swf":[22.4,6,28.4],"MyriadPro-SemiCn.swf":[21,6,27],"myriadpro.swf":[22.4,6,28.4],"MyriadProBold.swf":[23.7,6,29.7],"MyriadProItalic.swf":[22.85,6,28.85],"MyriadProLight.swf":[21.15,6,27.15],"MyriadProRegular.swf":[22.8,6,28.8],"MyriadProSemibold.swf":[23.35,6,29.35],"MyriadProSemiboldIt.swf":[23.3,6,29.3],"Nanum2GothicBold.swf":[22.05,5.5,27.55],"NanumBrush.swf":[22.05,
5.5,27.55],"NanumG.swf":[22.05,5.5,27.55],"NanumGBold.swf":[22.05,5.5,27.55],"NanumGothic.swf":[22.05,5.5,27.55],"NanumGothic_i18n.swf":[22.05,5.5,27.55],"NanumGothicBold.swf":[22.05,5.5,27.55],"NanumGothicBold_Prezi.swf":[22.05,5.5,27.55],"NanumGothicExtraBold.swf":[22.05,5.5,27.55],"NanumGothicOTFBold.swf":[20.15,7.4,27.55],"NanumGothicOTFExtraBold.swf":[20.15,7.4,27.55],"NanumMyeongjo.swf":[22.05,5.5,27.55],"NanumMyeongjoBold.swf":[21.75,5.15,26.9],"NanumMyeongjoExtraBold.swf":[22.05,5.5,27.55],
"NanumMyeongjoOTFExtraBold.swf":[20.15,7.4,27.55],"NanumPen.swf":[22.05,5.5,27.55],"NeoSans.swf":[20.45,5,25.45],"NeoSansProBold.swf":[24.85,5.2,30.05],"NeoSansProLight.swf":[23.5,5.15,28.65],"NeoSansProRegular.swf":[23.5,5.15,28.65],"NettoIconsOT-Bold.swf":[31.1,13.9,45],"NettoOT-Bold.swf":[23.5,5.35,28.85],"NettoOT-Light.swf":[23.5,5.35,28.85],"NettoOT.swf":[23.5,5.35,28.85],"Neutra2Display-Light.swf":[21.05,5.35,26.4],"Neutra2Display-Medium.swf":[21.25,5.35,26.6],"Neutra2Text-Demi.swf":[23.3,6.45,
29.75],"NeutraDisplay-Light.swf":[21.15,5.35,26.5],"neuzon.swf":[23.5,5.25,28.75],"NewBT.swf":[22.2,5.25,27.45],"NewBTBd.swf":[22.3,5.85,28.15],"NewsGothicStd-Bold.swf":[24.95,6,30.95],"NewsGothicStd-BoldOblique.swf":[24.95,7.2,32.15],"NewsGothicStd-Oblique.swf":[24.45,7.3,31.75],"NewsGothicStd.swf":[24.45,6,30.45],"NimbusSansBold.swf":[21.45,4.95,26.4],"NimbusSansLight.swf":[21.2,4.65,25.85],"NimbusSansRegular.swf":[21.35,4.65,26],"NotoSerif-Bold.swf":[25.65,7,32.65],"NotoSerif-BoldItalic.swf":[25.65,
7,32.65],"NotoSerif-Italic.swf":[25.65,7,32.65],"NotoSerif-Regular.swf":[25.65,7,32.65],"NudistaLight.swf":[19.2,4.8,24],"NudistaLightItalic.swf":[19.2,4.8,24],"NudistaMedium.swf":[19.2,4.8,24],"Nunito-B.swf":[24.25,8.45,32.7],"Nunito-BI.swf":[24.25,8.45,32.7],"Nunito-Bold.swf":[24.25,8.45,32.7],"Nunito-I.swf":[23.75,7.9,31.65],"Nunito-L.swf":[23.3,7.4,30.7],"Nunito-Light.swf":[23.3,7.4,30.7],"Nunito-Regular.swf":[23.75,7.9,31.65],"Nunito.swf":[23.75,7.9,31.65],"octinstencilfree.swf":[22.05,5.05,
27.1],"OfficinaSans-Black.swf":[23.7,6.65,30.35],"OfficinaSerifStdBold.swf":[23.1,6.25,29.35],"OfficinaSerifStdBook.swf":[22.15,6,28.15],"OfficinaSerifStdBookItalic.swf":[21.85,6,27.85],"ogilvyjbaskerville-bold.swf":[22.8,7.85,30.65],"ogilvyjbaskerville-bolditalic.swf":[22.8,7.5,30.3],"ogilvyjbaskerville-italic.swf":[22.6,7.35,29.95],"ogilvyjbaskerville-regular.swf":[22.5,7.75,30.25],"oldsansblack.swf":[23.65,5.75,29.4],"OlympianLTStd.swf":[23.5,5.2,28.7],"Omnes-Light.swf":[17.65,8.05,25.7],"Omnes-Regular.swf":[17.65,
8.05,25.7],"Omnes-Semibold.swf":[17.65,8.05,25.7],"OpenSans-B.swf":[25.65,7,32.65],"OpenSans-BI.swf":[25.65,7,32.65],"OpenSans-Bold.swf":[25.65,7,32.65],"OpenSans-BoldItalic.swf":[25.65,7,32.65],"OpenSans-I.swf":[25.65,7,32.65],"OpenSans-Italic.swf":[25.65,7,32.65],"OpenSans-L.swf":[25.65,7,32.65],"OpenSans-LI.swf":[25.65,7,32.65],"OpenSans-Light.swf":[25.65,7,32.65],"OpenSans-LightItalic.swf":[25.65,7,32.65],"OpenSans-Regular.swf":[25.65,7,32.65],"OpenSans-SB.swf":[25.65,7,32.65],"OpenSans-SBI.swf":[25.65,
7,32.65],"OpenSans-Semibold.swf":[25.65,7,32.65],"OpenSans-SemiboldItalic.swf":[25.65,7,32.65],"OpenSans-XB.swf":[25.65,7,32.65],"OpenSans-XBI.swf":[25.65,7,32.65],"OpenSans.swf":[25.65,7,32.65],"Optimum-Roman.swf":[22.85,5.15,28],"OptimusPrinceps.swf":[20.45,5.9,26.35],"OptimusPrincepsSemiBold.swf":[21.4,6.05,27.45],"PalatinoBold.swf":[22.15,6.35,28.5],"PalatinoRoman.swf":[22.2,6.75,28.95],"PerpetuaItalic.swf":[19.65,7.8,27.45],"PetelBold.swf":[16.8,7.2,24],"PetelRegular.swf":[16.8,7.2,24],"PillGothic-Bold.swf":[17.75,
5.75,23.5],"PillGothic-Regular.swf":[17.75,5.75,23.5],"pincoyablack.swf":[19.05,4.9,23.95],"ProkyonBold.swf":[24,6.75,30.75],"ProkyonRegular.swf":[23.6,6.45,30.05],"PT_Sans-Web-B.swf":[24.4,6.6,31],"PT_Sans-Web-BI.swf":[24.4,6.6,31],"PT_Sans-Web-I.swf":[24.4,6.6,31],"PT_Sans-Web.swf":[24.4,6.6,31],"PTSans-B.swf":[24.4,6.6,31],"PTSans-BI.swf":[24.4,6.6,31],"PTSans-I.swf":[24.4,6.6,31],"PTSans.swf":[24.4,6.6,31],"PublicGothicSquare-B.swf":[20.8,3.15,23.95],"PublicGothicSquare-BI.swf":[20.8,3.15,23.95],
"PublicGothicSquare-I.swf":[20.8,3.15,23.95],"PublicGothicSquare.swf":[20.8,3.15,23.95],"RageItalic.swf":[20.3,9.8,30.1],"Raleway-B.swf":[22,5.1,27.1],"Raleway-BI.swf":[22,5.1,27.1],"Raleway-I.swf":[22,5.1,27.1],"Raleway-Thin-Latin2.swf":[23.65,5.1,28.75],"Raleway-Thin.swf":[23.65,5.1,28.75],"RalewayThin.swf":[22,5.1,27.1],"Roboto-Black.swf":[25.1,6.5,31.6],"Roboto-BlackItalic.swf":[25.1,6.5,31.6],"Roboto-Bold.swf":[25.1,6.5,31.6],"Roboto-BoldItalic.swf":[25.1,6.5,31.6],"Roboto-Italic.swf":[25.1,
6.5,31.6],"Roboto-Light.swf":[25.1,6.5,31.6],"Roboto-LightItalic.swf":[25.1,6.5,31.6],"Roboto-Medium.swf":[25.1,6.5,31.6],"Roboto-MediumItalic.swf":[25.1,6.5,31.6],"Roboto-Regular.swf":[25.1,6.5,31.6],"Roboto-Thin.swf":[25.1,6.5,31.6],"Roboto-ThinItalic.swf":[25.1,6.5,31.6],"ROCK.swf":[22.65,5.45,28.1],"ROCKB.swf":[22.65,5.45,28.1],"ROCKI.swf":[22.65,5.45,28.1],"rosewoodstdFill.swf":[20.5,5.8,26.3],"RotisSansSerif-ExtraBold.swf":[23.4,6.5,29.9],"RotisSansSerif-Light.swf":[21.85,5.7,27.55],"RotisSansSerif.swf":[22.25,
5.7,27.95],"RotisSansSerifStd-ExtraBold.swf":[23.4,6.5,29.9],"RotisSemiSansBold.swf":[22.85,5.85,28.7],"RotisSemiSansExtrabold.swf":[23.35,6.15,29.5],"RotisSemiSansLight.swf":[21.85,5.6,27.45],"RotisSemiSansStandard.swf":[22.25,5.6,27.85],"Rotterdam.swf":[21.7,5.05,26.75],"RTAlbanese-BoldItalic.swf":[21.65,5.45,27.1],"RTAlbanese.swf":[21.45,5.4,26.85],"RTVickerman-Bold.swf":[23.6,5.65,29.25],"RTVickerman-Light.swf":[23,5.5,28.5],"SabonLTStd-Italic.swf":[22.2,5.45,27.65],"SabonLTStd-Roman.swf":[22.65,
5.45,28.1],"SangSangOTFB.swf":[18.7,3.9,22.6],"SangSangTitleOTFB.swf":[18.7,3.9,22.6],"SangSangTitleOTFM.swf":[18.9,4,22.9],"Sansation_Bold.swf":[21.7,5.05,26.75],"Sansation_Light.swf":[21.7,5.05,26.75],"Sansation_Regular.swf":[21.7,5.05,26.75],"SariOTRegular.swf":[23.45,6.2,29.65],"SariOTRegularItalic.swf":[23.45,6.2,29.65],"SArnhemBlond.swf":[20.95,6.5,27.45],"SArnhemBlondItalic.swf":[20.95,6.5,27.45],"SArnhemNormal.swf":[20.95,6.5,27.45],"SAUNB___.swf":[20.65,6.25,26.9],"SAUNBI__.swf":[20.65,6.25,
26.9],"SAUNI___.swf":[20.65,6.25,26.9],"SAUNR___.swf":[20.65,6.25,26.9],"savingsbond.swf":[21.7,6,27.7],"Scada-Bold.swf":[22.9,6.9,29.8],"Scada-BoldItalic.swf":[22.9,6.9,29.8],"Scada-Italic.swf":[22.9,6.9,29.8],"Scada-Regular.swf":[22.9,6.9,29.8],"ScalaSansBold.swf":[20.7,6.35,27.05],"ScalaSansOffc.swf":[21.6,6.5,28.1],"ScalaSansRegular.swf":[20.8,6.1,26.9],"SceneBlack.swf":[24.45,6.2,30.65],"SceneRegular.swf":[24.45,6.2,30.65],"ScheneBold.swf":[24.45,6.2,30.65],"ScheneMedium.swf":[24.45,6.2,30.65],
"SDBold.swf":[22.8,6,28.8],"SDMedium.swf":[22.8,6,28.8],"Segoe_UILight.swf":[25.85,6,31.85],"segoeprint.swf":[29.9,11.85,41.75],"SEOptimist.swf":[21.45,5.5,26.95],"SEOptimistBlack.swf":[21.6,5.55,27.15],"SEOptimistItalic.swf":[21.45,5.65,27.1],"SEOptimistLight.swf":[21.05,5.2,26.25],"SeoulHangangB.swf":[19.2,4.8,24],"SeoulHangangEB.swf":[19.2,4.8,24],"SeoulHangangL.swf":[19.2,4.8,24],"SeoulHangangM.swf":[19.2,4.8,24],"SeoulNamsanB.swf":[19.2,4.8,24],"SeoulNamsanEB.swf":[19.2,4.8,24],"SeoulNamsanL.swf":[19.2,
4.8,24],"SeoulNamsanM.swf":[19.2,4.8,24],"SeoulNamsanvert.swf":[19.2,4.8,24],"SerifaStd-Light.swf":[21.2,6,27.2],"SiemensSansBold.swf":[21.95,5.55,27.5],"SiemensSansRoman.swf":[21.75,5.45,27.2],"SiemensSerifRoman.swf":[22.25,5.4,27.65],"Signal-No3-D.swf":[21.5,5.9,27.4],"SimKBArr.swf":[22.3,5.35,27.65],"SimKBBd_.swf":[22.3,5.35,27.65],"SimKBRg_.swf":[22.3,5.35,27.65],"SkanskaSansPro-Bold.swf":[22.3,5.3,27.6],"SkanskaSansPro-Light.swf":[21.75,5.25,27],"SkanskaSansPro-Regular.swf":[22.15,5.25,27.4],
"Sketchetik-Bold.swf":[23.55,5.4,28.95],"Sketchetik-Light.swf":[23.25,5.35,28.6],"SketchRockwell-Bold.swf":[21.4,6.25,27.65],"SlatePro-Book.swf":[19.95,4.45,24.4],"SlatePro-Medium.swf":[20.15,4.55,24.7],"SlatePro-Regular.swf":[20.05,4.45,24.5],"smallfatmarker.swf":[21.7,5.05,26.75],"SNNAirport-Bold.swf":[18,6,24],"SNNAirport-Regular.swf":[18,6,24],"SNNAirport-RegularCaps.swf":[18,6,24],"SNNAirport-RegularItalic.swf":[18,6,24],"Solomon-Bold.swf":[22.2,5.45,27.65],"Solomon-Book.swf":[22.55,6.2,28.75],
"Solomon-BookDeco.swf":[22.55,6.2,28.75],"Solomon-Normal.swf":[22.55,6.2,28.75],"SourceSansPro-Bold.swf":[23.6,6.55,30.15],"SourceSansPro-BoldItalic.swf":[23.6,6.55,30.15],"SourceSansPro-ExtraLight.swf":[23.6,6.55,30.15],"SourceSansPro-ExtraLightItalic.swf":[23.6,6.55,30.15],"SourceSansPro-Italic.swf":[23.6,6.55,30.15],"SourceSansPro-Light.swf":[23.6,6.55,30.15],"SourceSansPro-LightItalic.swf":[23.6,6.55,30.15],"SourceSansPro-Regular.swf":[23.6,6.55,30.15],"SourceSansPro-Semibold.swf":[23.6,6.55,
30.15],"SourceSansPro-SemiboldItalic.swf":[23.6,6.55,30.15],"Sparkasse-Bold.swf":[21.35,5.5,26.85],"Sparkasse-Italic.swf":[21.2,5.1,26.3],"Sparkasse-Light.swf":[21.2,5.1,26.3],"Sparkasse-Regular.swf":[21.2,5.1,26.3],"specialk.swf":[24.35,7.5,31.85],"Square721BoldExtended.swf":[23.1,5.65,28.75],"StencilAllround.swf":[20,3.95,23.95],"StoneSans-Semibold.swf":[22.8,6,28.8],"StoneSans-SemiItalic.swf":[22.6,5.95,28.55],"StoneSansStd-Medium.swf":[22.6,6,28.6],"StoneSansStd-MediumItalic.swf":[22.6,6,28.6],
"StoneSansStd-SemiboldItalic.swf":[22.8,6,28.8],"StoryAGBold.swf":[22.85,6,28.85],"streetCompTRA.swf":[17.45,4,21.45],"streetItalicTRA.swf":[22,5.05,27.05],"streetPlainTRA.swf":[22,5.05,27.05],"Subaru-Bold.swf":[19.2,4.8,24],"Subaru-BoldItalic.swf":[19.2,4.8,24],"Subaru-Medium.swf":[19.2,4.8,24],"suingtiL.swf":[21.05,2.9,23.95],"SuzukiPROBold.swf":[23,6.6,29.6],"SuzukiPROHeadline.swf":[23,6.6,29.6],"SuzukiPRORegular.swf":[23,6.6,29.6],"Swis721CnBold.swf":[23.1,5.65,28.75],"Swis721CnBoldItalic.swf":[23.1,
5.8,28.9],"Swis721CnRoman.swf":[23.1,5.65,28.75],"Swis721PL-Heavy.swf":[24.75,6.05,30.8],"Swis721PL-Light.swf":[24.9,6.05,30.95],"Swis721PL-Regular.swf":[24.9,6.05,30.95],"Swiss721TL-Bold.swf":[24.35,6.45,30.8],"SwissBold.swf":[18.55,5.65,24.2],"SwissHeavy.swf":[23.1,5.65,28.75],"SwissLight.swf":[23.1,5.65,28.75],"SwissRegular.swf":[25.05,6.1,31.15],"SyntaxBold.swf":[22.05,6,28.05],"SyntaxItalic.swf":[21.35,6,27.35],"SyntaxRegular.swf":[21.55,6,27.55],"tahoma.swf":[24,4.95,28.95],"tahomabold.swf":[24,
4.95,28.95],"TakaoExGothic.swf":[21.1,4.65,25.75],"TakaoExMincho.swf":[21.95,6.65,28.6],"TakaoGothic.swf":[21.1,4.65,25.75],"TakaoMincho.swf":[21.1,5.3,26.4],"TakaoPGothic.swf":[21.1,4.65,25.75],"TakaoPMincho.swf":[21.1,5.3,26.4],"talldark.swf":[16.8,0,16.8],"TanukiMagic.swf":[20.6,3.35,23.95],"te36013t.swf":[21.15,4.55,25.7],"te36014t.swf":[21.35,4.85,26.2],"te36016t.swf":[21.35,4.8,26.15],"Tele-Grotesk-Fett.swf":[21.3,4.8,26.1],"Tele-Grotesk-Halb.swf":[21.3,4.85,26.15],"Tele-Grotesk-Norm.swf":[21.1,
4.55,25.65],"TeleGroteskReg.swf":[21.15,4.55,25.7],"TeleGroteskRegular.swf":[21.35,4.85,26.2],"TeleGroteskSerif.swf":[21.25,5.4,26.65],"teletekst.swf":[19.2,4.8,24],"TheSans.swf":[28.05,10.35,38.4],"TheSansB-ExBold.swf":[23.5,7.65,31.15],"TheSansB-Light.swf":[23.5,7.65,31.15],"TheSansB-Plain.swf":[23.5,7.65,31.15],"thesansplain-semibold.swf":[28.1,10.55,38.65],"thesansplain-semilight.swf":[28,10.2,38.2],"THSarabunNew.swf":[20.25,10.95,31.2],"THSarabunNewBold.swf":[20.25,10.95,31.2],"THSarabunNewBoldItalic.swf":[20.25,
10.95,31.2],"THSarabunNewItalic.swf":[20.25,10.95,31.2],"times.swf":[21.35,5.15,26.5],"TimesNewRoman-Bold.swf":[21.35,5.15,26.5],"TimesNewRoman-Italic.swf":[21.35,5.15,26.5],"Titillium-B.swf":[22.6,6,28.6],"Titillium.swf":[22.6,6,28.6],"TitilliumMaps.swf":[22.65,5.7,28.35],"TitilliumWeb-Bold.swf":[27.15,9.3,36.45],"TitilliumWeb-LightItalic.swf":[27.15,9.3,36.45],"TitilliumWeb-Regular.swf":[27.15,9.3,36.45],"TJApostol-Thin.swf":[17.7,4.5,22.2],"TKMedium.swf":[21.15,5.05,26.2],"TKSerif.swf":[22,5.35,
27.35],"TKTypeMedium.swf":[21.15,5.05,26.2],"TKTypeRegular.swf":[21.15,5.05,26.2],"tondo.swf":[20.6,4.85,25.45],"Tondo_Std.swf":[22.8,6.35,29.15],"Tondo_Std_Light.swf":[22.8,6.1,28.9],"TondoBold.swf":[23.15,6.7,29.85],"TondoRegular.swf":[22.8,6.35,29.15],"Tpgilbol.swf":[21.95,5.5,27.45],"Tpgilita.swf":[21.8,5.5,27.3],"Tpgilrom.swf":[22,5.5,27.5],"TradeGothicLTStd-Bd2.swf":[23.4,5.45,28.85],"TradeGothicLTStd-BdCn20.swf":[23.1,5.65,28.75],"TradeGothicLTStd-Cn18.swf":[22.8,5.15,27.95],"TradeGothicLTStd-Obl.swf":[23,
6.75,29.75],"TradeGothicLTStd.swf":[23,5.35,28.35],"TradeGothicLTStdBd2.swf":[23.4,5.45,28.85],"TradeGothicLTStdBold.swf":[23.3,5.45,28.75],"TradeGothicLTStdLight.swf":[22.75,5.05,27.8],"TrajanPro-Bold.swf":[23.6,6.8,30.4],"TrajanPro-Regular.swf":[23.95,6.1,30.05],"trebucbd.swf":[22.5,5.3,27.8],"trebucBoldItalic.swf":[22.5,5.3,27.8],"trebucRegular.swf":[22.5,5.3,27.8],"TrendSansFour.swf":[23.75,7.8,31.55],"TriplexCondSansOTCE-Black.swf":[19.9,5.5,25.4],"TriplexCondSansOTCE-Reg.swf":[19.9,5.5,25.4],
"TriplexCondSerifOTCE-Black.swf":[19.9,5.5,25.4],"TriplexCondSerifOTCE-Reg.swf":[19.9,5.5,25.4],"TriplexItalicOTCE-Bold.swf":[19.9,5.5,25.4],"TriplexItalicOTCE-Extrabold.swf":[19.9,5.5,25.4],"TriplexItalicOTCE-Light.swf":[19.9,5.5,25.4],"TriplexSansOT-Bold.swf":[19.9,5.5,25.4],"TriplexSansOTCE-Bold.swf":[19.9,5.5,25.4],"TriplexSansOTCE-Extrabold.swf":[19.9,5.5,25.4],"TriplexSansOTCE-Light.swf":[19.9,5.5,25.4],"TriplexSerifOTCE-Bold.swf":[19.9,5.5,25.4],"TriplexSerifOTCE-Extrabold.swf":[19.9,5.5,25.4],
"TriplexSerifOTCE-Light.swf":[19.9,5.5,25.4],"TrumpMediaevalLTStdRoman.swf":[22.95,6,28.95],"TVBS-Handwritting.swf":[17.05,7.85,24.9],"TypewriterCond-Regular.swf":[24.8,6.9,31.7],"ukai.swf":[22.45,4.75,27.2],"UltramagneticBold.swf":[26.65,8.5,35.15],"UltramagneticRegular.swf":[26.65,8.5,35.15],"uming.swf":[23.2,4.75,27.95],"Univers-UltraCondensed.swf":[22.15,4.85,27],"Universe55Regular.swf":[23.4,5.6,29],"Universe75Bold.swf":[23.4,5.15,28.55],"UniversLTStd-BoldCn.swf":[23.25,6,29.25],"UniversLTStd-Cn.swf":[23.7,
6,29.7],"UniversLTStd.swf":[22.7,6,28.7],"UniversLTStdBlack.swf":[24.35,5.1,29.45],"UniversLTStdBold.swf":[22.5,6,28.5],"UniversLTStdLight.swf":[22.95,6,28.95],"UniversMedium.swf":[23.6,5.55,29.15],"UniversMediumItalic.swf":[23.6,5.55,29.15],"UniversSemiBold.swf":[23.6,5.55,29.15],"UtopiaStd-Bold.swf":[21.7,6.45,28.15],"UtopiaStd-Regular.swf":[20.7,6,26.7],"UtopiaStd-Semibold.swf":[21.3,6.3,27.6],"VagabondBlack.swf":[24.7,5.45,30.15],"vagrounded-bold.swf":[22.5,5.2,27.7],"VAGRoundedStd-Black.swf":[22.95,
7.55,30.5],"VAGRoundedStd-Light.swf":[22.1,7,29.1],"VAGRoundedStd-Thin.swf":[22.1,6.9,29],"VAL.swf":[22.8,5.75,28.55],"velvendacooler.swf":[23.55,4.55,28.1],"VeraMono-B.swf":[22.25,5.65,27.9],"VeraMono-BI.swf":[22.25,5.65,27.9],"VeraMono-Bold-Italic.swf":[22.25,5.65,27.9],"VeraMono-Bold.swf":[22.25,5.65,27.9],"VeraMono-I.swf":[22.25,5.65,27.9],"VeraMono-Italic.swf":[22.25,5.65,27.9],"VeraMono-Latin2.swf":[23,5.75,28.75],"VeraMono.swf":[23,5.75,28.75],"verdana.swf":[24.1,5,29.1],"VerdanaBold.swf":[24.1,
5,29.1],"VerdanaItalic.swf":[24.1,5,29.1],"VersaillesLTStd-Black.swf":[23.35,6,29.35],"VersaillesLTStd-BlackItalic.swf":[23.4,6,29.4],"VersaillesLTStd-Bold.swf":[22.9,6,28.9],"VictoryNeueBold.swf":[23.3,5.6,28.9],"VictoryNeueLight.swf":[23.3,5.6,28.9],"VictoryNeueRegular.swf":[23.3,5.6,28.9],"VictoryNeueRegularOblique.swf":[23.3,5.6,28.9],"VismaHand.swf":[24.6,9.5,34.1],"VitesseBlack.swf":[23,5.75,28.75],"VL-PGothic-Regular.swf":[23.85,5.3,29.15],"VolvoBroadPro.swf":[20,3.95,23.95],"VolvoSansPro-Bold.swf":[22.65,
6,28.65],"VolvoSansPro-Light.swf":[22.2,6.1,28.3],"VolvoSansPro-Medium.swf":[23.1,6,29.1],"VolvoSansPro-Regular.swf":[22.8,6,28.8],"VolvoSerif-Bold.swf":[22.3,6,28.3],"VolvoSerif-Regular.swf":[22.6,6,28.6],"Vonnes-BoldCond.swf":[23.75,5,28.75],"Vonnes-Book.swf":[23.3,5.45,28.75],"wellrockslab.swf":[21.95,5.4,27.35],"Whitney-Bold-Pro.swf":[23,5.75,28.75],"Whitney-Medium-Pro.swf":[23,5.75,28.75],"Whitney-MediumItalic.swf":[23,5.75,28.75],"yanKai.swf":[19.1,4.6,23.7],"YanoneKaffeesatz-B.swf":[22.95,
4.8,27.75],"YanoneKaffeesatz-I.swf":[22.95,4.8,27.75],"YanoneKaffeesatz-L.swf":[22.95,4.8,27.75],"YanoneKaffeesatz-Latin2.swf":[24,4.8,28.8],"YanoneKaffeesatz-T.swf":[22.95,4.8,27.75],"YanoneKaffeesatz.swf":[24,4.8,28.8],"YasashisaBold.swf":[24.85,5.6,30.45],"YasashisaGothic.swf":[23.4,7,30.4],"yenHeavy.swf":[19.95,4.75,24.7],"yenLight.swf":[19.2,4.75,23.95],"ZapfDingbats.swf":[19.5,3.4,22.9]}}};ba.LegacyFontMetrics.LEGACY_METRICS_FONT_SIZE=24;var va={};Object.defineProperty(va,"__esModule",{value:!0});
(function(a){a[a.INSTALLED=0]="INSTALLED";a[a.FAILED=1]="FAILED"})(va.FontInstallationStatus||(va.FontInstallationStatus={}));var ra={},eb=this&&ra.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,h){function f(a){try{k(d.next(a))}catch(y){h(y)}}function g(a){try{k(d["throw"](a))}catch(y){h(y)}}function k(a){a.done?c(a.value):e(a.value).then(f,g)}k((d=d.apply(a,b||[])).next())})};Object.defineProperty(ra,"__esModule",
{value:!0});ra.MediaAssetQueryWorker=class{constructor(a){this.queryMediaAsset=a;this.masatAssetDimensionsCache=new Map}getCachedMediaAssetDimensions(a){return this.masatAssetDimensionsCache.get(a)}queryConversionResult(a){return eb(this,void 0,void 0,function*(){const b=(yield this.queryMediaAssetsUntilReady([a],(a)=>{var b;return null===(b=null===a||void 0===a?void 0:a.pig)||void 0===b?void 0:b.status}))[0];if(b.kind===v.TryKind.success&&null==b.value.pig.status.error_summary)return r.BoundCalculation.clampMediaAssetDimensions(b.value.pig.result.dimensions);
throw{errorCase:Eb.EditorErrorCase.CONVERSION_JOB_FAILED};})}queryMediaAssetDimensions(a){return eb(this,void 0,void 0,function*(){const b=a.filter((a)=>!this.masatAssetDimensionsCache.has(a));(yield this.queryMediaAssetsUntilReady(b,(a)=>{var b;return null===(b=null===a||void 0===a?void 0:a.pig)||void 0===b?void 0:b.status})).forEach((a,c)=>{var d,e,g,k,l;a=a.kind===v.TryKind.success?null===(d=a.value.pig)||void 0===d?void 0:d.result:null;d={width:null!==(g=null===(e=null===a||void 0===a?void 0:
a.dimensions)||void 0===e?void 0:e.width)&&void 0!==g?g:1,height:null!==(l=null===(k=null===a||void 0===a?void 0:a.dimensions)||void 0===k?void 0:k.height)&&void 0!==l?l:1};this.masatAssetDimensionsCache.set(b[c],d)});const c=new Map;for(let b of a)this.masatAssetDimensionsCache.has(b)&&c.set(b,this.getCachedMediaAssetDimensions(b));return c})}queryMediaAssetsUntilReady(a,b){return eb(this,void 0,void 0,function*(){for(;;){const c=yield this.queryMediaAsset(a);if(c.every((a)=>a.kind===v.TryKind.success?
(a=null==a.value?null:b(a.value),null!=(null===a||void 0===a?void 0:a.error_summary)||"ready"===(null===a||void 0===a?void 0:a.state)):!0))return c;yield v.Utils.sleep(100)}})}};var ia={},wa=this&&ia.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,h){function f(a){try{k(d.next(a))}catch(y){h(y)}}function g(a){try{k(d["throw"](a))}catch(y){h(y)}}function k(a){a.done?c(a.value):e(a.value).then(f,g)}k((d=d.apply(a,b||
[])).next())})};Object.defineProperty(ia,"__esModule",{value:!0});ia.HeadlessRenderingAssetManager=class{constructor(a,b){this.assetManager=a;this.fontManagerProperty=b;this.callbackMap={};this.logger=J.LoggerModule.getLoggerManager().createLogger("HeadlessRenderingAssetManager");b.onValue((a)=>a.registerFontInstallationCallback(this.fontInstallationCallback.bind(this)));this.legacyFontMetrics=new ba.LegacyFontMetrics;this.mediaAssetQueryWorker=new ra.MediaAssetQueryWorker((a)=>wa(this,void 0,void 0,
function*(){this.logger.info({action:"queryMediaAssetUntilReady",object:"RemoteMediaUploadProvider",trigger:"machine",payload:{maids:a}});const b=Object.assign(Object.assign({},xb.HttpService.getDefaultRetryOptions()),{times:30,timeout:2E3}),c={type:"POST",cache:!1,dataType:"json",contentType:"application/json",data:JSON.stringify({ids:a}),xhrFields:{withCredentials:!0},url:"https://prezi.com/api/v2/media/"},f=(a)=>wa(this,void 0,void 0,function*(){const d=yield xb.HttpService.createJQueryHttpRequester(c,
b,!0).request().toPromise();return d.count!==d.totalCount?(yield v.Utils.sleep(a),f(2*a)):d});return(yield f(50)).items.map((a)=>({kind:v.TryKind.success,value:a}))}))}thumbnailImageAssetFromVideoUrl(){return wa(this,void 0,void 0,function*(){throw Error("Should not be called in headless");})}imageAssetFromUrl(a,b){const c=this.assetManager.addImageDownloadTask(a,b);return new Promise((a,b)=>{c.onError(b);c.onValue((b)=>{a({kind:l.AssetKind.Image,image:ia.HeadlessRenderingAssetManager.getStillImage(b),
width:b.width,height:b.height,free:()=>{},retain:()=>{}})})})}static getStillImage(a){if(/.*\.[gG][iI][fF]\?js$/.test(a.src)||/.*\.[gG][iI][fF]$/.test(a.src)){let b=n.CetRendererInternal.createCanvas(a.width,a.height);b.getContext("2d").drawImage(a,0,0,a.width,a.height);return b}return a}imageAssetFromImage(a){return Promise.resolve({kind:l.AssetKind.Image,image:a,width:a.width,height:a.height,free:()=>{},retain:()=>{}})}calcSwfBounds(){return Promise.reject("swf is not supported")}xvgAssetFromSwfUrl(){return Promise.reject("swf is not supported")}xvgAssetFromPdfUrl(a,
b){let c=this.assetManager.createBinaryFetcher(a).fetch();return new Promise((a,e)=>{c.onValue((c)=>{null==this.pdfLoader&&(this.pdfLoader=wb.createPdfLoader());this.pdfLoader.loadFromBytes(c,(c)=>{c.loadPage(b,(b)=>a({kind:l.AssetKind.Xvg,pdfRenderer:wb.createPdfRender(b),width:b.getWidth(),height:b.getHeight(),free:()=>{}}),e)},e)});c.onError(e)})}fontInstallationCallback(a){const b=this.callbackMap[a.id.getId()];if(null!=b)if(a.status===va.FontInstallationStatus.INSTALLED)b.onSuccess();else b.onError(a)}fontFromUrl(a,
b,c){return new Promise((d,e)=>{this.callbackMap[a.getId()]={onSuccess:d,onError:e};this.fontManagerProperty.onValue((d)=>d.installFromUrl(a,b,this.legacyFontMetrics.lookupLegacyLineMetrics(c)))})}animatedImageAssetFromMaid(a){return wa(this,void 0,void 0,function*(){const b=(yield this.queryMediaAssetDimensions([a])).get(a);return Promise.resolve({kind:l.AssetKind.AnimatedImage,width:b.width,height:b.height})})}queryConversionResult(a){return this.mediaAssetQueryWorker.queryConversionResult(a)}queryMediaAssetDimensions(a){return this.mediaAssetQueryWorker.queryMediaAssetDimensions(a)}getCachedMediaAssetDimensions(a){return this.mediaAssetQueryWorker.getCachedMediaAssetDimensions(a)}getVideoPlayerPlayButtonImageAsset(){return new Promise(()=>
{})}};var V={};Object.defineProperty(V,"__esModule",{value:!0});V.HeadlessRenderingTextFactory=class{constructor(){}init(a,b,c){this.fontManager=a;this.textRenderer=b;this.layoutShaping=c}createDefaultBaseStyle(){return Y.TextModel.createCharacterStyleContainer(Y.TextModel.createColor(0),"default",24,"normal","normal",0,null)}create(a,b){return new V.HeadlessRenderingText(this.layoutShaping.shapeText(this.fontManager,a,b),this.textRenderer)}update(a,b){return this.create(a,b)}};V.HeadlessRenderingText=
class{constructor(a,b){this.shapedText=a;this.textRenderer=b;this.__RenderingText__=0}getText(){return this.shapedText.getText()}setBaseStyle(a){a=this.shapedText.setBaseStyle(a);return a!==this.shapedText?this.dupShapeText(a):this}getBaseStyle(){return this.shapedText.getBaseStyle()}getLayoutBoundsForRange(a,b){return this.shapedText.getBounds(a,b).map((a)=>k.Geometry.rectangleFromData({x:a.x,y:a.y,width:a.width,height:a.height}))}setWrapWidth(a){return this.dupShapeText(this.shapedText.setWrapWidth(a))}renderText(a){this.textRenderer.renderText(a,
this.shapedText)}getLayoutBounds(){let a;if(0<=this.shapedText.getWrapWidth())a=this.shapedText.getWrapWidth();else{a=0;for(var b of this.shapedText.getParagraphs())a=Math.max(a,b.getWidestLineFullWidth())}b=this.shapedText.getHeight();return k.Geometry.rectangleFromData({x:-(a/2),y:-(b/2),width:a+0,height:b+0})}getRawText(){return this.shapedText.getRawText()}getLength(){return this.shapedText.getLength()}applyStyles(a,b,c,d){return this.dupShapeText(this.shapedText.applyStyles(a,b,c,d))}getLineMetrics(a){return this.shapedText.getLineMetrics(a)}resetStyles(a,
b){return this.dupShapeText(this.shapedText.resetStyles(a,b))}getAlignment(a,b){return this.shapedText.getAlignment(a,b)}getIndent(a,b){return this.shapedText.getIndent(a,b)}setAlignment(a,b,c){return this.dupShapeText(this.shapedText.setAlignment(a,b,c))}setIndent(a,b,c){return this.dupShapeText(this.shapedText.setIndent(a,b,c))}getListType(a,b){return this.shapedText.getListType(a,b)}setListType(a,b,c){return this.dupShapeText(this.shapedText.setListType(a,b,c))}getParagraphs(){return this.shapedText.getParagraphs().map((a)=>
a.getParagraph())}getParagraphStartOffset(a){return this.shapedText.getParagraphStartOffset(a)}insertText(a,b){return this.dupShapeText(this.shapedText.insertText(a,b))}getLayoutWidth(){return this.shapedText.getWidth()}getParagraph(a){return this.shapedText.getParagraph(a).getParagraph()}getCharacterStylesAt(a){return this.shapedText.getCharacterStylesAt(a)}getLayoutHeight(){return this.shapedText.getHeight()}getLineCount(){return this.shapedText.getLineCount()}deleteText(a,b){return this.dupShapeText(this.shapedText.deleteText(a,
b))}getParagraphIndexesBetween(a,b){return this.shapedText.getParagraphIndexesBetween(a,b)}locate(a,b){return this.shapedText.locate(a,b)}getWordBoundaryToLeft(a,b){return this.shapedText.getWordBoundaryToLeft(a,b)}getWordBoundaryToRight(a){return this.shapedText.getWordBoundaryToRight(a)}locatePosition(a,b){return this.shapedText.locatePosition(a,b)}getLineNumberAt(a,b){return this.shapedText.getLineNumberAt(a,b)}getLineAt(a,b){return this.shapedText.getLineAt(a,b)}getParagraphCount(){return this.shapedText.getParagraphCount()}replaceText(a,
b,c){return this.dupShapeText(this.shapedText.replaceText(a,b,c))}getParagraphBoundaryToLeft(a){return this.shapedText.getParagraphBoundaryToLeft(a)}getParagraphBoundaryToRight(a){return this.shapedText.getParagraphBoundaryToRight(a)}locateCaretOffset(a){return this.shapedText.locateCaretOffset(a)}insertTextWithStyle(a,b,c){return this.dupShapeText(this.shapedText.insertTextWithStyle(a,b,c))}replaceTextWithStyle(a,b,c,d){return this.dupShapeText(this.shapedText.replaceTextWithStyle(a,b,c,d))}getWrapWidth(){return this.shapedText.getWrapWidth()}getMinWrapWidth(){return this.deleteText(-1,
this.getLength()).insertText(0,"W").shapedText.getParagraphs()[0].getWidestLineFullWidth()}getLineStart(a){var b=this.getParagraphIndexesBetween(a,a)[0];b=this.shapedText.getParagraph(b);a=b.getLineNumberAt(a,!1);return b.getLineStart(a,0)}dupShapeText(a){return new V.HeadlessRenderingText(a,this.textRenderer)}getClippingBounds(a){const b=new ma.BboxRenderingSurface;a=b.getBBox(a(b));if(null==a)return null;a=a.getData();return k.Geometry.rectangleFromData({x:a.x,y:-this.shapedText.getHeight()/2,width:a.width,
height:this.shapedText.getHeight()})}attachToComponent(){return this}detachedFromComponent(){}};var fb={loadAsync:function(a){if(require.config)require.config({paths:{"prezi.text.backend":B.getResourceUrl("node_modules/prezi.text.backend/index"),"prezi.text.ui":B.getResourceUrl("node_modules/prezi.text.ui/index"),"prezi.text.shaping":B.getResourceUrl("node_modules/prezi.text.shaping/index")}}),require(["prezi.text.backend","prezi.text.ui","prezi.text.shaping"],(...b)=>{a({layoutBackend:b[0],layoutUi:b[1],
layoutShaping:b[2]})});else{const b=require,c={layoutBackend:b("prezi.text.backend"),layoutUi:b("prezi.text.ui"),layoutShaping:b("prezi.text.shaping")};setTimeout(()=>{a(c)},0)}}};Object.defineProperty(fb,"__esModule",{value:!0});var H={};Object.defineProperty(H,"__esModule",{value:!0});H.HeadlessRenderer=class extends K.BaseRenderer{constructor(a,b,c,d){super(a,c);this.assetManager=b;this.renderingAssetManager=d;this.renderingTextFactory=new V.HeadlessRenderingTextFactory;this.fontManagerBus=vb.Bacon.newBus();
a=this.fontManagerBus.toProperty();a.onValue(()=>{});this.renderingTextFactory=new V.HeadlessRenderingTextFactory;null==this.renderingAssetManager&&(this.renderingAssetManager=new ia.HeadlessRenderingAssetManager(this.assetManager,a));null==H.HeadlessRenderer.loadedProperty?H.HeadlessRenderer.loadedProperty=new Promise((a)=>{fb.loadAsync((b)=>{H.HeadlessRenderer.textModules=b;this.initRenderingTextFactory();a()})}):H.HeadlessRenderer.loadedProperty.then(()=>{this.initRenderingTextFactory()})}initRenderingTextFactory(){const a=
H.HeadlessRenderer.textModules.layoutBackend.createBackend().getFontManager();a.setFontDownloader((a,c,d)=>{this.assetManager.createBinaryFetcher(a).fetch().toPromise().then((a)=>{c(new Uint8Array(a))}).catch((b)=>{null!=b.data?d(JSON.stringify(b.data)):d(`Error downloading font from ${a}: ${b}`)})});this.fontManagerBus.push(a);this.textRenderer=H.HeadlessRenderer.textModules.layoutUi.createTextRenderer(a);this.renderingTextFactory.init(a,this.textRenderer,H.HeadlessRenderer.textModules.layoutShaping)}getInvalidator(){return null}createChannel(a){return new Hb(a)}drawEntities(){return!0}getIsReady(){return H.HeadlessRenderer.loadedProperty}getAssetManager(){return this.renderingAssetManager}getRenderingTextFactory(){return this.renderingTextFactory}getHitTest(){return new Ib}createSubRenderer(a){return new H.HeadlessRenderer(a,
this.assetManager,this.renderingShapeCacheInvalidatorKeys,this.renderingAssetManager)}};H.HeadlessRenderer.loadedProperty=null;class Hb{constructor(a){this.name=a}getName(){return this.name}setInteractive(){}}class Ib extends pa.BaseHitTest{pixelHitTest(){return!1}}var I={};Object.defineProperty(I,"__esModule",{value:!0});I.RenderingStatistics=class{static collectStatistics(a){let b={};for(var c of I.RenderingStatistics.keyNames)b[c]=0;for(let c of a)I.RenderingStatistics.updateResultMap(b,c);a=[];
c=[];for(let d of I.RenderingStatistics.keyNames)a.push(d),c.push(b[d]);J.LoggerModule.getLoggerManager().log(I.RenderingStatistics.loggerName,J.Level.DEBUG,{action:"log keys",object:"RenderingStatistics",trigger:"",payload:{logkeys:a}});J.LoggerModule.getLoggerManager().log(I.RenderingStatistics.loggerName,J.Level.INFO,{action:"prezi-statistics",object:"RenderingStatistics",trigger:"",payload:{results:c}})}static updateResultMap(a,b){var c=b.getDef();null!=c&&(c===g.CetModel.ID.Z_IMAGE?(b=b.getComponent(n.CetRendererInternal.getDrawComponentKey()),
b instanceof D.ImageDrawComponentImpl&&null!=b.getAsset()?a.IMAGES_PIXELS_COUNT+=I.RenderingStatistics.getNumberOfPixels(b):a.IMAGES_PIXELS_COUNT=-1):c===g.CetModel.ID.BACKGROUND_IMAGE?(b=b.getComponent(n.CetRendererInternal.getDrawComponentKey()),b instanceof D.ImageDrawComponentImpl&&null!=b.getAsset()?a.BACKGROUND_PIXELS_COUNT+=I.RenderingStatistics.getNumberOfPixels(b):a.BACKGROUND_PIXELS_COUNT=-1):c===g.CetModel.ID.Z_TEXT&&(b=b.get(g.CetModel.ID.Z_TEXT.TEXT),a.TEXT_CHARACTERS_COUNT+=I.RenderingStatistics.getNumberOfCharactersInParagraphs(b.getParagraphs())),
c=c.getName(),a[c]+=1)}static getNumberOfPixels(a){a=a.getAsset();return a.width*a.height}static getNumberOfCharactersInParagraphs(a){let b=0;for(let c of a)b+=c.getLength();return b}};I.RenderingStatistics.keyNames=function(){let a=["IMAGES_PIXELS_COUNT","BACKGROUND_PIXELS_COUNT","TEXT_CHARACTERS_COUNT"];for(let b of g.CetModel.ID.Z_OBJECT.getDescendants())b!==g.CetModel.ID.Z_SWF_GRAPHICS&&a.push(b.getName());return a}();I.RenderingStatistics.loggerName="RenderingStatistics";var gb={};Object.defineProperty(gb,
"__esModule",{value:!0});gb.IdleWorkerMeter=class{constructor(){this.idleRuntimes={}}createLogEntry(a){return{action:"Idle Worker Result",object:"Statistics",trigger:"Speed",payload:a}}updateIdleWorkerMeasurements(a){this.idleRuntimes.hasOwnProperty(a)||(this.idleRuntimes[a]=[])}readIdleWorkerStatistics(){const a=[];for(const c of Object.keys(this.idleRuntimes)){const d=this.idleRuntimes[c];if(null==d)continue;const e=d.reduce((a,b)=>a<b?b:a,0);var b=d.filter((a)=>32<a);const f=b.length;b=b.reduce((a,
b)=>a+b-32,0);a.push({workerName:c,countSlow:f,aboveLimitRuntime:b,runCount:d.length,maximumRuntime:e})}this.idleRuntimes={};return a}};var W={};Object.defineProperty(W,"__esModule",{value:!0});W.ResponsivenessMeter=class{constructor(){this.unresponsiveTime=0;this.startResponsivityPoller();document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.stopResponsivityPoller();"visible"===document.visibilityState&&this.startResponsivityPoller()})}createLogEntry(a){return{action:"Responsiveness Watchdog Result",
object:"Statistics",trigger:"Speed",payload:{unresponsiveTime:a}}}readUnresponsiveTime(){const a=this.unresponsiveTime;this.unresponsiveTime=0;return a}startResponsivityPoller(){null==this.pollerId&&this.createPoller()}stopResponsivityPoller(){clearInterval(this.pollerId);this.pollerId=null}createPoller(){let a=(new Date).getTime();this.pollerId=setInterval(()=>{const b=(new Date).getTime(),c=b-a;W.ResponsivenessMeter.SLOW_RESPONSE_LIMIT<c&&(this.unresponsiveTime+=c-W.ResponsivenessMeter.POLL_RATE);
a=b},W.ResponsivenessMeter.POLL_RATE)}};W.ResponsivenessMeter.SLOW_RESPONSE_LIMIT=80;W.ResponsivenessMeter.POLL_RATE=32;var ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.TimeProvider=class{static now(){return Math.floor((new Date).getTime())}static setTimer(a,b){return v.Utils.delay(a,b)}static stopTimer(a){null!=a&&a.stop()}};var q={};Object.defineProperty(q,"__esModule",{value:!0});q.Statistics=class{constructor(a,b,c,d){this.firstMainDraw=0;this.resolutionAtStart=this.resolutionAtEnd=
"";this.idleFrames=0;this.preprocessingDone=this.allAssetsLoaded=!1;this.badTransitionsPercentage=this.aboveMax=this.jerks=this.lags=this.freezes=0;this.goodMovingAverage=this.framesLess90MS=!1;this.measureId=this.frames=this.time=this.average=this.best=this.worst=this.medianAbsoluteDistance=this.median=this.standardDeviation=this.smoothnessPercentage=0;this.measureId=b;this.probeName=a;this.mergeShortFrames=c;this.started=ca.TimeProvider.now();this.bddCallback=d;this.percentils=[];this.percentilFrames=
[];this.speedData={};for(let a=0,b=q.Statistics.MAIN_STATISTICS_PERCENTILES.length;a<b;a++)this.percentils[a]=0,this.percentilFrames[a]=0}mergeWith(a){this.finished=a.finished;this.measurement=this.measurement.concat(a.measurement);this.allAssetsLoaded=this.allAssetsLoaded||a.allAssetsLoaded;this.preprocessingDone=this.preprocessingDone||a.preprocessingDone;this.idleFrames+=a.idleFrames;this.resolutionAtEnd=a.resolutionAtEnd}setFinished(a){this.finished=a}getMergeShortFrames(){return this.mergeShortFrames}getMessage(){null==
this.speedMeasurementMode&&(this.speedMeasurementMode="undefined");let a={action:"Aggregated Speed Results",object:"Statistics",trigger:"Speed",payload:{probeName:this.probeName,measureId:this.measureId,frames:this.frames,time:this.time,average:this.average,best:this.best,worst:this.worst,medianAbsoluteDistance:this.medianAbsoluteDistance,median:this.median,framesAboveMax:Math.round(this.aboveMax/this.frames*100)/100,percentils:this.percentils,allAssetsLoaded:this.allAssetsLoaded,preprocessingDone:this.preprocessingDone,
idleFrames:this.idleFrames,resolutionAtStart:this.resolutionAtStart,resolutionAtEnd:this.resolutionAtEnd,jerks:this.jerks,lags:this.lags,freezes:this.freezes,firstMainDraw:this.firstMainDraw,speedMeasurementMode:this.speedMeasurementMode,standardDeviation:this.standardDeviation,smoothnessPercentage:this.smoothnessPercentage,goodMovingAverage:this.goodMovingAverage,framesLess90MS:this.framesLess90MS,badTransitionsPercentage:this.badTransitionsPercentage}};this.bddCallback(this.score,this.speedData);
return a}setMessage(a){this.message=a}measureScore(){let a=0;for(let b=0,c=q.Statistics.SCORE[q.Statistics.AVERAGE].length;b<c;b++)1E3/this.average>b&&a++;let b=0;for(let a=0,c=q.Statistics.SCORE[q.Statistics.WORST].length;a<c;a++)1E3/this.worst>a&&b++;let c=Math.round(1E3/this.median*100)/100,d=c>q.Statistics.SCORE[q.Statistics.MEDIAN][0]?1:0;this.setSpeedDataForBDD();return{action:"SpeedScoreMessage",object:"Statistics",trigger:"Speed",payload:{frames:this.frames,average:this.average,averageFPS:Math.round(1E3/
this.average*100)/100,averageScore:a,worst:this.worst,worstFPS:Math.round(1E3/this.worst*100)/100,worstScore:b,median:this.median,medianFPS:c,medianScore:d,averageOK:33>=this.average?"OK":"BAD",standardDeviation:this.standardDeviation,standardDeviationOK:this.standardDeviation<=q.Statistics.STANDARD_DEVIATION_THRESHOLD?"OK":"BAD",smoothnessPercentage:this.smoothnessPercentage,smoothnessOK:this.smoothnessPercentage>=q.Statistics.SMOOTHNESS_THRESHOLD?"OK":"BAD",movingAverageOK:this.goodMovingAverage?
"OK":"BAD",framesLess90MSOK:this.framesLess90MS?"OK":"BAD",badTransitionsPercentage:this.badTransitionsPercentage,badTransitionsOK:this.badTransitionsPercentage<=q.Statistics.SMOOTH_TRANSITIONS_THRESHOLD?"OK":"BAD",overallOK:this.standardDeviation<=q.Statistics.STANDARD_DEVIATION_THRESHOLD&&this.smoothnessPercentage>=q.Statistics.SMOOTHNESS_THRESHOLD&&this.goodMovingAverage&&this.framesLess90MS&&this.badTransitionsPercentage<=q.Statistics.SMOOTH_TRANSITIONS_THRESHOLD?"OK":"BAD"}}}setSpeedDataForBDD(){this.speedData[q.Statistics.AVERAGE]=
this.average;this.speedData[q.Statistics.BEST]=this.best;this.speedData[q.Statistics.WORST]=this.worst;this.speedData[q.Statistics.MEDIAN]=this.median;this.speedData[q.Statistics.ABOVE_MAX]=Math.round(this.aboveMax/this.frames*100)/100;this.speedData[q.Statistics.BEST]=this.best;for(let a=0,b=q.Statistics.PERCENTILS.length;a<b;a++)this.speedData[q.Statistics.PERCENTILS[a]]=this.percentils[a]}};q.Statistics.FRAMES="Rendered frames";q.Statistics.TIME="Total time";q.Statistics.AVERAGE="Average";q.Statistics.BEST=
"Best";q.Statistics.WORST="Worst";q.Statistics.MEDIAN_ABSOLUTE_DISTANCE="Median absolute distance";q.Statistics.MEDIAN="Median";q.Statistics.PERCENTIL="% percentile";q.Statistics.ABOVE_MAX="Above max";q.Statistics.STANDARD_DEVIATION="Standard deviation";q.Statistics.SMOOTHNESS="Smoothness percentage";q.Statistics.MOVING_AVERAGE="Good moving average";q.Statistics.FRAMES_LESS_90MS="Frames times less than 90 ms";q.Statistics.BAD_TRANSITIONS="Percentage of bad transitions";q.Statistics.PERCENTILS=["1"+
q.Statistics.PERCENTIL,"5"+q.Statistics.PERCENTIL,"25"+q.Statistics.PERCENTIL,"75"+q.Statistics.PERCENTIL,"95"+q.Statistics.PERCENTIL,"97"+q.Statistics.PERCENTIL,"99"+q.Statistics.PERCENTIL,"99.9"+q.Statistics.PERCENTIL];q.Statistics.SCORE={[q.Statistics.AVERAGE]:[21,25,29],[q.Statistics.WORST]:[1,5],[q.Statistics.MEDIAN]:[29],[q.Statistics.PERCENTILS[3]]:[27],[q.Statistics.PERCENTILS[4]]:[23],[q.Statistics.PERCENTILS[5]]:[1E3],[q.Statistics.PERCENTILS[6]]:[18],[q.Statistics.PERCENTILS[7]]:[14]};
q.Statistics.TARGET_FRAME_RENDERING_TIME=33;q.Statistics.STANDARD_DEVIATION_THRESHOLD=9;q.Statistics.SMOOTHNESS_THRESHOLD=95;q.Statistics.MOVING_AVERAGE_THRESHOLD=40;q.Statistics.MOVING_AVERAGE_WINDOW_SIZE=30;q.Statistics.SMOOTH_TRANSITIONS_THRESHOLD=1;q.Statistics.NUMBER_OF_ALLOWED_BAD_FRAMES=5;q.Statistics.MAIN_STATISTICS_PERCENTILES=[.01,.05,.25,.75,.95,.97,.99,.999];var xa={};Object.defineProperty(xa,"__esModule",{value:!0});xa.SpeedProbe=class{constructor(a,b,c,d,e){this.probeName=a;this.measureId=
b;this.samples=[];this.totalSamples=0;this.maximalMeasurementLimit=1E3*d;this.statistics=new q.Statistics(a,b,c,e)}storeSample(a){this.samples[this.totalSamples]=a;this.totalSamples++}getStatistics(){this.statistics.measurement=this.samples;return this.statistics}getProbeName(){return this.probeName}getTotalSamples(){return this.totalSamples}};xa.SpeedProbe.DEFAULT_INVALID_BETWEEN_MEASUREMENTS_LIMIT_IN_SECONDS=3600;var hb={};Object.defineProperty(hb,"__esModule",{value:!0});hb.FrameTimeCollector=
class{constructor(){this.frameTimes=[]}addFrameTimeWithTimeStamp(a,b){this.frameTimes.push(b);this.frameTimes.push(a)}getFrameTimes(){return this.frameTimes}count(){return this.frameTimes.length}reset(){this.frameTimes.length=0}toLogLine(){return this.frameTimes.toString()}};var ja={};Object.defineProperty(ja,"__esModule",{value:!0});ja.MetricsCalculator=class{static calculateSmoothnessPercentage(a,b){a.smoothnessPercentage=0;for(let c=0,d=b.length;c<d;c++)b[c]<=q.Statistics.TARGET_FRAME_RENDERING_TIME&&
(a.smoothnessPercentage+=1);a.smoothnessPercentage/=a.frames;a.smoothnessPercentage=Math.round(100*a.smoothnessPercentage)}static calculateStandardDeviation(a,b){a.standardDeviation=0;for(let c=0,d=b.length;c<d;c++)a.standardDeviation+=Math.pow(b[c]-a.average,2);a.standardDeviation=Math.sqrt(a.standardDeviation/a.frames);a.standardDeviation=Math.round(100*a.standardDeviation)/100}static checkOnMovingAverage(a){let b=[];for(let c=0,d=a.measurement.length;c<d;c++)a.measurement[c]!==x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP&&
b.push(a.measurement[c]);let c=0;a.goodMovingAverage=!0;let d=Math.min(b.length,q.Statistics.MOVING_AVERAGE_WINDOW_SIZE);for(let a=0;a<d;a++)c+=b[a];if(c/Math.min(b.length,q.Statistics.MOVING_AVERAGE_WINDOW_SIZE)>q.Statistics.MOVING_AVERAGE_THRESHOLD)a.goodMovingAverage=!1;else for(let d=q.Statistics.MOVING_AVERAGE_WINDOW_SIZE,f=b.length;d<f;d++)if(c-=b[d-q.Statistics.MOVING_AVERAGE_WINDOW_SIZE],c+=b[d],c/q.Statistics.MOVING_AVERAGE_WINDOW_SIZE>q.Statistics.MOVING_AVERAGE_THRESHOLD){a.goodMovingAverage=
!1;break}}static checkOnFramesTime(a){a.framesLess90MS=!0;let b=[],c=0,d=0!==a.measurement[a.measurement.length-1]?a.measurement.concat([x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP]):a.measurement;for(let e=0,f=d.length;e<f;e++)if(d[e]===x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP){let d=q.Statistics.NUMBER_OF_ALLOWED_BAD_FRAMES,e=b.length-q.Statistics.NUMBER_OF_ALLOWED_BAD_FRAMES;for(let c=d,f=e+1;c<f;c++)90<b[c]&&(a.framesLess90MS=!1);for(let c=0;c<d;c++)90<b[c]&&(a.badTransitionsPercentage+=
1);for(let c=e+1,d=b.length;c<d;c++)90<b[c]&&(a.badTransitionsPercentage+=1);c+=1;b.length=0}else b.push(d[e]);a.badTransitionsPercentage/=d.length-c;a.badTransitionsPercentage=Math.round(100*a.badTransitionsPercentage)}};var L={};Object.defineProperty(L,"__esModule",{value:!0});L.StatisticsProcessorImpl=class{constructor(a,b,c,d){this.responsivenessMeter=c;this.idleWorkerMeter=d;this.autoplaySpeedTestInProgress=this.logStatistics=!1;this.ZERO=0;this.minimumMeasurementLimit=a;this.isAutoplaySpeedTest=
!1;this.stats=[];this.statsByProbe={};this.frameTimeCollector=new hb.FrameTimeCollector;this.logStatistics=b;this.structLogger=J.LoggerModule.getLoggerManager().createLogger("StatisticsProcessorImpl")}static sortAscendingInts(a,b){return a-b}processStatistics(){if(this.isAutoplaySpeedTest)for(let a in this.statsByProbe)this.processStats(this.statsByProbe[a]),delete this.statsByProbe[a];else for(;0!==this.stats.length;)this.processStats(this.stats.pop())}isAutoplaySpeedTestInProgress(){return this.autoplaySpeedTestInProgress}processStats(a){let b=
a.getMergeShortFrames()?this.mergeTooShortFrames(a.measurement):a.measurement;this.process(a,b)}setSpeedMeasurementMode(a){a!==this.speedMeasurementMode&&this.processStatistics();this.speedMeasurementMode=a}getSpeedMeasurementMode(){return this.speedMeasurementMode}setAutoplaySpeedTest(a){this.autoplaySpeedTestInProgress=this.isAutoplaySpeedTest=!0;this.onReport=a}stopAutoplaySpeedTest(){this.autoplaySpeedTestInProgress=!1}process(a,b){if(!this.isAutoplaySpeedTest||"userFrame"===a.probeName){b=b.slice();
b.sort(L.StatisticsProcessorImpl.sortAscendingInts);var c=v.Utils.Lambda().count(b,(a)=>a===x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP);b.splice(0,c);a.frames=b.length;a.worst=b[b.length-1];a.best=b[0];a.median=0===b.length%2?(b[Math.floor((b.length-1)/2)]+b[Math.floor((b.length-1)/2)+1])/2:b[Math.floor((b.length-1)/2)];var d=c=0;for(let e=0,f=b.length;e<f;e++){c+=b[e];let f=b[e]-a.median;a.medianAbsoluteDistance+=0<=f?f:-f;for(let c=0,d=q.Statistics.MAIN_STATISTICS_PERCENTILES.length;c<d;c++)e<
Math.ceil(b.length*q.Statistics.MAIN_STATISTICS_PERCENTILES[c])&&(a.percentils[c]=b[e],a.percentilFrames[c]++);b[e]>L.StatisticsProcessorImpl.ABOVE_MAX_THRESHOLD&&d++;b[e]>L.StatisticsProcessorImpl.JERKING_THRESHOLD&&a.jerks++;b[e]>L.StatisticsProcessorImpl.LAGGING_THRESHOLD&&a.lags++;b[e]>L.StatisticsProcessorImpl.FREEZING_THRESHOLD&&a.freezes++}for(let b=0,c=a.percentils.length;b<c;b++)a.percentils[b]=a.percentils[b],a.percentils[b]=Math.round(100*a.percentils[b])/100;a.aboveMax=d;a.average=c/a.frames;
a.average=Math.round(100*a.average)/100;a.medianAbsoluteDistance/=b.length;a.medianAbsoluteDistance=Math.round(100*a.medianAbsoluteDistance)/100;"userFrame"===a.probeName&&(ja.MetricsCalculator.calculateSmoothnessPercentage(a,b),ja.MetricsCalculator.calculateStandardDeviation(a,b),ja.MetricsCalculator.checkOnMovingAverage(a),ja.MetricsCalculator.checkOnFramesTime(a));0<a.frames&&(this.isAutoplaySpeedTest&&"userFrame"===a.probeName?(null!=this.onReport?(a.measureScore(),this.onReport(JSON.stringify(a.getMessage()),
this.rawMeasurements)):(a=a.measureScore(),this.structLogger.debug(a),window.alert(v.Utils.stringify(a))),this.isAutoplaySpeedTest=!1):(a.measureScore(),a.speedMeasurementMode=this.speedMeasurementMode,this.logStatistics&&(this.structLogger.info(a.getMessage()),0<this.frameTimeCollector.count()&&(a={frames:this.frameTimeCollector.getFrameTimes()},this.structLogger.info({action:"UserFramesWithTimeStamp",object:"StatisticsProcessorImpl",trigger:"Speed",payload:a}),this.frameTimeCollector.reset()))))}}mergeTooShortFrames(a){let b=
[],c=this.ZERO;for(let d of a)c+=d,c>this.minimumMeasurementLimit&&(b.push(c),c=this.ZERO);return b}addMeasurement(a){this.autoplaySpeedTestInProgress?null==this.statsByProbe[a.probeName]?this.statsByProbe[a.probeName]=a:this.statsByProbe[a.probeName].mergeWith(a):this.stats.push(a)}logResponsivityMeasurement(){var a=this.idleWorkerMeter.readIdleWorkerStatistics();this.logStatistics&&(a.forEach((a)=>{0<a.aboveLimitRuntime&&this.structLogger.info(this.idleWorkerMeter.createLogEntry(a))}),a=this.responsivenessMeter.readUnresponsiveTime(),
0<a&&this.structLogger.info(this.responsivenessMeter.createLogEntry(a)))}};L.StatisticsProcessorImpl.ABOVE_MAX_THRESHOLD=50;L.StatisticsProcessorImpl.JERKING_THRESHOLD=100;L.StatisticsProcessorImpl.LAGGING_THRESHOLD=200;L.StatisticsProcessorImpl.FREEZING_THRESHOLD=1E3;var x={};Object.defineProperty(x,"__esModule",{value:!0});x.SpeedMeterController=class{constructor(a){this.cameraX=this.cameraY=this.cameraScale=this.cameraRotation=this.currentPathStepIndex=0;this.rawMeasurements="";this.firstMainDraw=
0;this.resolution="";this.preprocessingDone=this.allAssetsLoaded=!1;this.currentMeasureId=this.currentMeasureSequenceId=0;this.logAllFrames=!1;this.responsivenessMeter=new W.ResponsivenessMeter;this.idleWorkerMeter=new gb.IdleWorkerMeter;this.statisticsProcessor=new L.StatisticsProcessorImpl(x.SpeedMeterController.MINIMAL_VALID_MEASUREMENT_IN_MILLIS,a,this.responsivenessMeter,this.idleWorkerMeter);this.probes={};this.active=!1;this.startScheduledTest()}getZeroTimestamp(){return x.SpeedMeterController.ZERO_TIMESTAMP}setCurrentPathStepIndex(a){this.currentPathStepIndex=
a}getLogAllFrames(){return this.logAllFrames}setLogAllFrames(a){this.logAllFrames=a}setExperiment(a){this.currentExperiment=a}setAllAssetsLoaded(a){this.allAssetsLoaded=a}setPreprocessingDone(a){a!==this.preprocessingDone&&(this.completeMeasurement(),this.preprocessingDone=a)}startResponsivityPoller(){this.responsivenessMeter.startResponsivityPoller()}stopResponsivityPoller(){this.responsivenessMeter.stopResponsivityPoller()}updateIdleWorkerMeasurements(a,b){this.idleWorkerMeter.updateIdleWorkerMeasurements(a,
b)}incrementIdleFrames(){for(let a in this.probes)this.probes[a].getStatistics().idleFrames++}setResolution(a,b){this.resolution=""+a+"x"+b;for(let a in this.probes)this.probes[a].getStatistics().resolutionAtEnd=this.resolution}setFirstMainDraw(a){this.firstMainDraw=a;for(let b in this.probes)this.probes[b].getStatistics().firstMainDraw=a}getCurrentTimestamp(){return ca.TimeProvider.now()}frameEnded(){this.logAllFrames&&this.completeMeasurement()}updateCameraTransform(a){if(this.logAllFrames){var b=
a.getTranslation();this.cameraX=b.x;this.cameraY=b.y;this.cameraRotation=a.getRotationDeg();this.cameraScale=a.getScale()}}addEndOfTransitionLabel(a=!1){this.setupProbe("userFrame",a).storeSample(x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP)}updateProbeWithMeasurement(a,b,c,d=!1,e,f){b=c-b;d=this.setupProbe(a,d);b<d.maximalMeasurementLimit&&(this.logAllFrames&&(this.rawMeasurements+=(new Date).getTime()+" ",this.rawMeasurements+=this.currentExperiment+" ",this.rawMeasurements+=this.currentMeasureId+
" ",this.rawMeasurements+=++this.currentMeasureSequenceId+" ",this.rawMeasurements+=d.getProbeName()+" ",this.rawMeasurements+=b+" ",this.rawMeasurements+=e+" ",this.rawMeasurements+=f+" ",this.rawMeasurements+=this.cameraX+" ",this.rawMeasurements+=this.cameraY+" ",this.rawMeasurements+=this.cameraRotation+" ",this.rawMeasurements+=this.cameraScale+" ",this.rawMeasurements+=this.currentPathStepIndex+"\n"),d.storeSample(b));"userFrame"===a&&this.statisticsProcessor.frameTimeCollector.addFrameTimeWithTimeStamp(b,
Math.floor((new Date).getTime()))}executeWithMeasurementMergeShortFrames(a,b){this.executeWithMeasurementImpl(a,b,!0)}executeWithMeasurement(a,b){this.executeWithMeasurementImpl(a,b,!1)}executeWithMeasurementImpl(a,b,c){let d=this.getCurrentTimestamp();a();a=this.getCurrentTimestamp();this.updateProbeWithMeasurement(b,d,a,c)}enterMeasureIdle(){!1===this.active&&this.startScheduledTest();this.setupProbe(x.SpeedMeterController.IDLE_TIME,!0);this.idleMeasurementStart=this.getCurrentTimestamp()}exitMeasureIdle(){let a=
this.probes[x.SpeedMeterController.IDLE_TIME];if(null!=a){let b=this.getCurrentTimestamp()-this.idleMeasurementStart;b<a.maximalMeasurementLimit&&a.storeSample(b)}}setupProbe(a,b){let c=this.probes[a];null==c&&(c=new xa.SpeedProbe(a,this.currentMeasureId,b,x.SpeedMeterController.MAXIMAL_VALID_MEASUREMENT_IN_SECONDS,this.bddCallback?(a,b)=>this.bddCallback(a,b):null),this.probes[a]=c);a=c.getStatistics();a.allAssetsLoaded=this.allAssetsLoaded;a.preprocessingDone=this.preprocessingDone;""===a.resolutionAtStart&&
(a.resolutionAtStart=this.resolution);a.resolutionAtEnd=this.resolution;a.firstMainDraw=this.firstMainDraw;return c}start(){this.active=!0;this.currentMeasureId++;this.currentMeasureSequenceId=0}stop(){for(let a in this.probes){let b=this.probes[a];delete this.probes[b.getProbeName()];b.getStatistics().setFinished(this.getCurrentTimestamp());this.statisticsProcessor.addMeasurement(b.getStatistics())}this.statisticsProcessor.rawMeasurements=this.rawMeasurements;this.active=!1;this.statisticsProcessor.logResponsivityMeasurement()}bddCallback(a,
b){this.score=a;this.speedData=b;null!=this.endTestCallback&&this.endTestCallback()}setEndTestCallback(a){this.endTestCallback=a}getScore(){return this.score}isRunning(){return this.active}getFPSData(){return this.speedData}startScheduledTest(){this.start();this.timer=ca.TimeProvider.setTimer(this.completeMeasurement?()=>this.completeMeasurement():null,x.SpeedMeterController.SPEED_LOG_LENGTH_IN_MILLIS)}stopScheduledTest(){ca.TimeProvider.stopTimer(this.timer);for(let a in this.probes){let b=this.probes[a].getProbeName();
delete this.probes[b]}}completeMeasurement(){this.dispose();this.stop();this.startScheduledTest()}dispose(){null!=this.timer&&ca.TimeProvider.stopTimer(this.timer)}setSpeedMeasurementMode(a){a!==this.statisticsProcessor.getSpeedMeasurementMode()&&this.completeMeasurement();this.statisticsProcessor.setSpeedMeasurementMode(a)}getSpeedMeasurementMode(){return this.statisticsProcessor.getSpeedMeasurementMode()}getStatisticsProcessor(){return this.statisticsProcessor}};x.SpeedMeterController.SPEED_LOG_LENGTH_IN_MILLIS=
3E4;x.SpeedMeterController.MAXIMAL_VALID_MEASUREMENT_IN_SECONDS=30;x.SpeedMeterController.MINIMAL_VALID_MEASUREMENT_IN_MILLIS=16;x.SpeedMeterController.IDLE_TIME="idleTime";x.SpeedMeterController.ZERO_TIMESTAMP=0;x.SpeedMeterController.END_OF_TRANSITION_TIMESTAMP=0;var E={};Object.defineProperty(E,"__esModule",{value:!0});E.MockRenderer=class extends K.BaseRenderer{constructor(a,b,c){super(a,c);null==E.MockRenderer.textModules?E.MockRenderer.preloadTextModules().then(()=>{this.initRenderingTextFactory()}):
this.initRenderingTextFactory();this.renderingAssetManager=new ia.HeadlessRenderingAssetManager(b,vb.Bacon.never())}static preloadTextModules(){return new Promise((a)=>{null==E.MockRenderer.loadedProperty&&fb.loadAsync((b)=>{E.MockRenderer.textModules=b;a()})})}initRenderingTextFactory(){this.renderingTextFactory=new V.HeadlessRenderingTextFactory;this.fontManager=E.MockRenderer.textModules.layoutBackend.createBackend().getFontManager();this.textRenderer=E.MockRenderer.textModules.layoutUi.createTextRenderer(this.fontManager);
this.renderingTextFactory.init(this.fontManager,this.textRenderer,E.MockRenderer.textModules.layoutShaping)}getInvalidator(){return null}createChannel(a){return new Jb(a)}drawEntities(){return!0}getIsReady(){return E.MockRenderer.loadedProperty}getAssetManager(){return this.renderingAssetManager}getRenderingTextFactory(){return this.renderingTextFactory}getHitTest(){return new Kb}createSubRenderer(a){return new E.MockRenderer(a,{addImageDownloadTask:()=>{}},this.renderingShapeCacheInvalidatorKeys)}};
E.MockRenderer.loadedProperty=null;class Jb{constructor(a){this.name=a}getName(){return this.name}setInteractive(){}}class Kb extends pa.BaseHitTest{pixelHitTest(){return!1}}var Q={};Object.defineProperty(Q,"__esModule",{value:!0});class Lb{constructor(a,b,c,d){this.id=a;this.url=b;this.videoViewLog=c;this.videoView=d}log(a,b){this.videoViewLog.push({id:this.id,url:this.url,method:a,args:b})}onMouseDown(a){this.log("onMouseDown",[...arguments]);return this.videoView.onMouseDown(a)}onMouseUp(a){this.log("onMouseUp",
[...arguments]);return this.videoView.onMouseUp(a)}onMouseMove(a,b){this.log("onMouseMove",[...arguments]);return this.videoView.onMouseMove(a,b)}onMouseEnter(){this.log("onMouseEnter",[...arguments]);return this.videoView.onMouseEnter()}onMouseLeave(){this.log("onMouseLeave",[...arguments]);return this.videoView.onMouseLeave()}getEntity(){this.log("getEntity",[...arguments]);return this.videoView.getEntity()}getBounds(){this.log("getBounds",[...arguments]);return this.videoView.getBounds()}seekTo(a){this.log("seekTo",
[...arguments]);return this.videoView.seekTo(a)}setVolume(a){this.log("setVolume",[...arguments]);return this.videoView.setVolume(a)}getVolume(){this.log("getVolume",[...arguments]);return this.videoView.getVolume()}play(){this.log("play",[...arguments]);return this.videoView.play()}pause(){this.log("pause",[...arguments]);return this.videoView.pause()}loadVideo(a){this.log("loadVideo",[...arguments]);return this.videoView.loadVideo(a)}isLoaded(){this.log("isLoaded",[...arguments]);return this.videoView.isLoaded()}hasError(){this.log("hasError",
[...arguments]);return this.videoView.hasError()}showThumbnail(){this.log("showThumbnail",[...arguments]);return this.videoView.showThumbnail()}showVideo(){this.log("showVideo",[...arguments]);return this.videoView.showVideo()}}Q.WebGlScene=class{constructor(a,b,c){this.name=a;this.libboxfish=b;this.interactive=c;this.lcEntities=new Set;this.videoViewCache=new Map;this.sceneView=this.libboxfish.createSceneView()}needsRender(){return this.sceneView.needsRender()}wrap(a){this.lcEntities.add(a);this.addDelete(a);
return a}addDelete(a){a.delete=()=>{this.sceneView.getScene().deleteEntity(a)}}createTextEntity(a){const b=this.wrap(this.sceneView.getScene().createEntity(a));a.retain();b.releaseModel=a.release;return b}createImageEntity(a,b=null){const c=this.libboxfish.getWebGlModelManager().createImageModel(a.image);null!=b&&c.setImageSourceRect(b.x,b.y,b.width,b.height);b=this.wrap(this.sceneView.getScene().createEntity(c));a.retain();b.releaseModel=()=>{c.delete();a.free()};return b}createShapeEntity(a){const b=
this.sceneView.getScene().createEntity(a);a.retain();b.releaseModel=a.release;return this.wrap(b)}createXVGEntity(a,b){var c=a.xvgAsset.model;const d=this.sceneView.getScene().createXVGEntity();d.setModel(c);a.xvgAsset.retain();d.releaseModel=a.xvgAsset.free;a=this.sceneView.getScene().createEntityGroup();a.addChild(d);b&&(c=this.libboxfish.createDrawingInterface(),c.beginPath(),c.drawRectangle(b.x,b.y,b.x+b.width,b.y+b.height),c.endPath(),b=this.libboxfish.getWebGlModelManager().createShapeModel(c),
b=this.createShapeEntity(b),a.addChild(b),d.setMask(b));return this.wrap(a)}createEntityGroup(){const a=this.sceneView.getScene().createEntityGroup();return this.wrap(a)}deleteLcEntity(a){this.lcEntities.delete(a);a.delete();a.releaseModel&&a.releaseModel()}getLcEntities(){return this.lcEntities}onEventVideoPlayer(a,b,c){var d,e;this.interactive&&this.channelInteractive&&(null===(e=null===(d=this.videoViewCache.get(a))||void 0===d?void 0:d.get(b))||void 0===e?void 0:e.onEvent(c))}createVideoPlayerEntity(a,
b,c){let d=this.videoViewCache.get(a);null==d&&(d=new Map,this.videoViewCache.set(a,d));let e=d.get(b);if(null==e){c.retain();var f=this.libboxfish.urlResolver.getResolvedUrl(b);f=this.sceneView.createVideoView(f,c.image);a=S.isActive("js-for-test-monitor-video-view")?new Lb(a,b,this.libboxfish.videoViewLog,f):f;this.interactive&&(this.libboxfish.assetLoadingBus.push(l.AssetLoadingMessage.VIDEO_LOADING_STARTED),a.loadVideo(()=>{this.libboxfish.assetLoadingBus.push(l.AssetLoadingMessage.VIDEO_LOADING_FINISHED)}));
let h=!1;e={videoView:a,videoViewOrig:f,refCount:0,entity:this.wrap(a.getEntity()),onEvent:this.interactive?(a)=>{const b=e.videoView;if(null!=b){switch(a.kind){case l.DrawComponentFocusEventKind.Received:b.showVideo();b.play();return;case l.DrawComponentFocusEventKind.Lost:b.pause();return;case l.DrawComponentMouseEventWithoutPositionKind.Activate:h=!0;return}if(h){switch(a.kind){case l.DrawComponentMouseEventWithoutPositionKind.Deactivate:b.onMouseLeave();b.pause();h=!1;return;case l.DrawComponentMouseEventWithoutPositionKind.Leave:b.onMouseLeave();
return;case l.DrawComponentMouseEventKindWithPosition.Move:if(a.isEntering)b.onMouseEnter();b.onMouseMove(a.worldX,a.worldY);a.isClick&&(b.showVideo(),b.onMouseDown(0),b.onMouseUp(0));return}v.Utils.assertNever(a.kind)}}}:null};e.entity.delete=()=>{--e.refCount;0>=e.refCount&&null!=e.videoView&&(d.delete(b),this.sceneView.deleteVideoView(e.videoViewOrig),c.free(),e.videoViewOrig=null,e.videoView=null)};d.set(b,e)}e.refCount+=1;return e.entity}invalidate(){}setInteractive(a){for(const a of this.videoViewCache.values())for(const b of a.values())b.videoView.pause();
this.channelInteractive=a}};class zb extends Q.WebGlScene{constructor(a,b,c){super(a,b,c);this.depthManager=b.createDepthManager(this.sceneView.getScene())}setDepth(a,b){this.depthManager.setDepth(a,b)}deleteLcEntity(a){this.depthManager.removeEntity(a);super.deleteLcEntity(a)}}Q.ZObjectScene=class extends zb{constructor(a,b,c){super(a,b,c)}setViewDef(a,b){this.sceneView.setViewport(a);Ba(this.libboxfish,a,b,!1,(a)=>{this.sceneView.setCamera(a);if(null!=this.gridEntity){const d=b.getScale();var c=
this.gridDesc.maxDistance,e=c/2,f=Math.log2(d/e);e*=Math.pow(2,f-Math.floor(f));f=2*this.gridDesc.maxCircleRadius/d;this.gridDesc.scalePoints&&(f*=e/c);var h=this.gridDesc.rotate?0:-b.getRotationRad();c=Math.sin(h);h=Math.cos(h);e/=d;this.gridEntity.setTransform(this.libboxfish.generateDotGrid(this.gridModel,this.gridImage.getRenderImage(),a,{x:f,y:f},{x:0,y:0},{x:e*h,y:e*c},{x:-e*c,y:e*h}))}})}setQuadtreeBounds(a){null!=this.lcEntityQuadtreeBounds&&this.deleteLcEntity(this.lcEntityQuadtreeBounds);
this.lcEntityQuadtreeBounds=a}setGridDesc(a){if(S.isActive("js-canvas-grid")&&a!==this.gridDesc&&(this.gridDesc=a,null!=this.gridEntity&&(this.deleteLcEntity(this.gridEntity),this.gridEntity=null,this.gridModel.delete(),this.gridModel=null,this.libboxfish.getLcRendererInterface().getImageResourceManager().releaseImage(this.gridImage),this.gridImage=null),null!=this.gridDesc)){this.gridModel=this.libboxfish.getLcRendererInterface().getModelManager().createUIModel();this.gridEntity=this.sceneView.getScene().createEntity(this.gridModel);
this.addDelete(this.gridEntity);this.setDepth(this.gridEntity,this.gridDesc.top?30001E4:0);a=document.createElement("canvas");a.width=16;a.height=16;a=a.getContext("2d");a.clearRect(0,0,16,16);a.beginPath();const b=this.gridDesc.color;a.fillStyle=`rgba(${b.r},${b.g},${b.b},${b.a})`;a.arc(8,8,8,0,2*Math.PI);a.fill();a=a.getImageData(0,0,16,16);this.gridImage=this.libboxfish.getLcRendererInterface().getImageResourceManager().createDataImageFromImageData("gridImage-"+this.gridEntity,a)}}render(a,b){return this.sceneView.render(a,
b)}invalidate(){super.invalidate();this.setQuadtreeBounds(null);this.setGridDesc(null)}};Q.LogoScene=class extends zb{constructor(a,b){super(a,b,!1)}setViewDef(a,b){this.sceneView.setViewport(a);Ba(this.libboxfish,a,b,!0,(a)=>{this.sceneView.setCamera(a)})}render(a,b){return this.sceneView.render(a,b)}};Q.BackgroundScene=class extends Q.WebGlScene{constructor(a,b){super(a,b,!1)}setViewDef(a,b){this.viewport=a;this.sceneView.setViewport(a);Ba(this.libboxfish,a,b,!1,(a,b)=>{if(this.visibility){b=this.libboxfish.calcViewScale(b);
for(let d=0;d<this.sortedLayers.length;d++){var c=this.libboxfish.calcParallaxScale(this.sortedLayers[d].depth,b);const e={x:(1-c)*a.getPosition().x,y:(1-c)*a.getPosition().y};c=this.libboxfish.createTransform2D(e,{x:c,y:c},0);c=this.libboxfish.concatTransform2D(this.sortedLayers[d].transform,c);this.sortedLayers[d].entity.setTransform(c);0===d&&this.maskEntity&&this.maskEntity.setTransform(c);c=this.visibility.calcLayerAlpha(d,b);this.sortedLayers[d].entity.setAlpha(c*this.backgroundAlpha)}}this.sceneView.setCamera(a)})}setFill(a){this.fillW=
a}setBackgroundAlpha(a){this.backgroundAlpha=a}render(a,b){this.fill(a,this.viewport);return null==this.visibility?!0:this.sceneView.render(a,b)}hasLayers(){return null!=this.visibility}clearLayers(){if(null!=this.visibility){for(let a of this.getLcEntities())this.deleteLcEntity(a);this.visibility.delete();this.visibility=null}}invalidate(){super.invalidate();this.clearLayers()}initLayers(a,b){if(0!==a.length){this.sortedLayers=a.sort((a,b)=>a.depth-b.depth);this.visibility=this.libboxfish.createBackgroundVisibility();
a=this.libboxfish.createVectorBackgroundLayer();for(let b of this.sortedLayers)a.push_back({depth:b.depth,fadeScale:b.fadeScale});this.visibility.init(b,a);a.delete();this.setupEntityHierarchy(b)}}fill(a,b){switch(this.fillW.getFillType()){case g.FillType.Radial:{var c=this.createColorStops();var d=b.width/2;const a=b.height/2;d=this.libboxfish.createRadialGradient(d,a,Math.sqrt(b.width*b.width+b.height*b.height)/2,d,a,c,this.libboxfish.GradientSpreadType.PAD,this.libboxfish.GradientUnitType.POINT);
c.delete();break}case g.FillType.Linear:c=this.createColorStops();d=this.libboxfish.createLinearGradient(b.width/2,0,b.width/2,b.height/2,c,this.libboxfish.GradientSpreadType.PAD,this.libboxfish.GradientUnitType.RATIO);c.delete();break;case g.FillType.Solid:d=this.libboxfish.createSolidColorFill(this.getRgbaFromColor(k.Geometry.colorFromRGBIntA(this.fillW.getColor().getRGBInt(),this.fillW.getAlpha())))}null!=d&&(a.fillRect(b.x,b.y,b.width,b.height,d),d.delete())}createColorStops(){const a=this.libboxfish.createVectorColorStop();
a.push_back({offset:0,color:this.getRgbaFromColor(this.fillW.getGradStartColor())});a.push_back({offset:1,color:this.getRgbaFromColor(this.fillW.getGradEndColor())});return a}setupEntityHierarchy(a){let b=this.sceneView.getScene().getRootEntity();if(a===this.libboxfish.BackgroundLayerFadeMode.OPAQUEFADE){a=this.sortedLayers[0].entity;let d=this.createEntityGroup();var c=this.createRectangleShapeModel(this.sortedLayers[0].entity.getBounds());this.maskEntity=this.createShapeEntity(c);for(c=this.sortedLayers.length-
1;1<=c;c--)d.addChild(this.sortedLayers[c].entity);this.maskEntity.setTransform(this.sortedLayers[0].transform);d.setMask(this.maskEntity);b.addChild(a)}else{for(a=this.sortedLayers.length-1;0<=a;a--)b.addChild(this.sortedLayers[a].entity);this.maskEntity=null}}createRectangleShapeModel(a){const b=this.libboxfish.createDrawingInterface();b.beginPath();const c=a.mins();a=a.getSize();b.drawRectangle(c.x,c.y,c.x+a.x,c.y+a.y);b.endPath();return this.libboxfish.getWebGlModelManager().createShapeModel(b)}getRgbaFromColor(a){return this.libboxfish.getRgbaFromColor(a.modifyAlpha(a.getAlpha()*
this.backgroundAlpha))}};var M={};Object.defineProperty(M,"__esModule",{value:!0});M.LibboxfishModule=class{static createLibboxfishAsync(a,b,c,d,e,f){const h=J.LoggerModule.getLoggerManager().createLogger("webgl-renderer");if(require.config){const b=S.FeatureSwitcher.isActive("js-webgl-debug")?"libboxfish_debug/wasm/":"libboxfish/wasm/";require([B.getResourceUrl(b+"libboxfish.js")],()=>{const g=S.FeatureSwitcher.isActive("js-webgl-console-logs");BoxfishLib({INITIAL_MEMORY:268435456,print:(...a)=>
{g&&console.log(a.join(" "));h.info({object:"libboxfish",action:"libboxfish",trigger:"machine",payload:{message:a.join(" ")}})},printErr:(...a)=>{g&&console.error(a.join(" "));h.error({object:"libboxfish",action:"libboxfish",trigger:"machine",payload:{message:a.join(" ")}})},locateFile:(a)=>B.getResourceUrl(b+a),postRun:[],hostInterface:{sendLog:(a,b,c)=>{h.info({object:"libboxfish",action:a,trigger:b,payload:c})}}}).then(function(g){window.rendererBoxfishLibVersion=g.getVersion();g.createAndRunApplication=
function(c,d,e){const f=`Loaded libboxfish ${g.getVersion()} (${g.getVersionInternal()})`;h.info({object:"libboxfish",action:"libboxfish",trigger:"machine",payload:{message:f}});e=new (g.AppDelegate.extend("App",e));g.StartApplication(e,{canvasId:a.id.replace(/\./g,"\\."),jobSystem:{workerName:"libboxfish-worker",workerURLPrefix:M.UrlHelpers.resolveUrl(B.getResourceUrl(b)),allowCors:!0},input:{limitKeyEventsToCanvas:!0},renderer:{enableMultisampling:!0},autoWindowRedraw:!1,isDesktopCEF:c,mipmapServiceEnabled:d,
urlPolicy:{forceHttps:!0,useCloudfront:!0,useYoutubeProxy:!1}})};f(new M.Libboxfish(g,c,d,e))})})}else setTimeout(()=>{f(null)},0)}};M.WebGlModelManager=class{constructor(a,b,c){this.boxfishLib=a;this.lcModelManager=b;this.lcImageResourceManager=c;this.mediaAsset=0;this.imageModelCreationContext=this.imageModelCreationCanvas=null}newMediaName(){const a="boxfish_media_"+this.mediaAsset;this.mediaAsset+=1;return a}createImageModel(a){const b=this.lcModelManager.createImageModel(a);b.delete=()=>{this.lcModelManager.releaseModel(b)};
return this.wrapWithRefCount(b)}createShapeModel(a){const b=this.lcModelManager.createShapeModel(a,!0);b.delete=()=>{this.lcModelManager.releaseModel(b)};return this.wrapWithRefCount(b)}createTextModel(a){const b=this.lcModelManager.createTextModel(a);b.delete=()=>{this.lcModelManager.releaseModel(b)};return this.wrapWithRefCount(b)}createXVGModel(a){const b=this.lcModelManager.createXVGModel(this.newMediaName(),a);b.delete=()=>{this.lcModelManager.releaseModel(b)};return b}createTiledImage(a,b){const c=
this.newMediaName();b=this.boxfishLib.AssetManager.getImagePath(c,b);const d=this.lcImageResourceManager.createTiledImage(c);b.delete();d.delete=()=>{this.lcImageResourceManager.releaseImage(d);a.cancel(d)};return d}createDataImageFromHTMLImageElement(a){this.imageModelCreationCanvas||(this.imageModelCreationCanvas=document.createElement("canvas"),this.imageModelCreationCanvas.width=this.imageModelCreationCanvas.height=512,this.imageModelCreationCanvas.id="offscreen_picture",this.imageModelCreationContext=
this.imageModelCreationCanvas.getContext("2d"));const b=this.imageModelCreationCanvas,c=this.imageModelCreationContext;let d=a.width,e=a.height;if(d>b.width||e>b.height){const a=d/e;d>e?(d=b.width,e=d/a):(e=b.height,d=e*a)}d=Math.max(1,d);e=Math.max(1,e);c.clearRect(0,0,d,e);c.drawImage(a,0,0,d,e);a=c.getImageData(0,0,d,e);const f=this.lcImageResourceManager.createDataImageFromImageData(this.newMediaName(),a);f.delete=()=>{this.lcImageResourceManager.releaseImage(f)};return f}releaseImage(a){this.lcImageResourceManager.releaseImage(a)}createRenderingText(a,
b){return this.boxfishLib.RenderingText.create(a,b)}wrapWithRefCount(a){let b=1;a.retain=()=>{b+=1};a.release=()=>{--b;1>b&&a.delete()};return a}createDataImageFromImageData(a){return this.lcImageResourceManager.createDataImageFromImageData(this.newMediaName(),a)}};M.Libboxfish=class{constructor(a,b,c,d){this.boxfishLib=a;this.assetLoadingBus=b;this.urlResolver=c;this.videoViewLog=d;this.channels=[];this.dashCache=[];this.PathID=a.PathID;this.LineCap=a.LineCap;this.LineJoin=a.LineJoin;this.PathWindingType=
a.PathWindingType;this.GradientSpreadType=a.GradientSpreadType;this.GradientUnitType=a.GradientUnitType;this.FillWrapMode=a.FillWrapMode;this.FontWeightType=a.FontWeightType;this.FontStyleType=a.FontStyleType;this.AssetManagerResult=a.AssetManagerResult;this.BackgroundLayerFadeMode=a.BackgroundLayerFadeMode;this.AssetStatus=a.AssetStatus;this.createBounds2D=(b,c)=>new a.Bounds2D(b,c);this.createVideoRenderPort=(b)=>new a.VideoRenderPort(b);this.createSolidColorFill=(b)=>a.createSolidColorFill(b);
this.createVerticalGradient=a.createVerticalGradient.bind(a);this.createHorizontalGradient=a.createHorizontalGradient.bind(a);this.createLinearGradient=a.createLinearGradient.bind(a);this.createRadialGradient=a.createRadialGradient.bind(a);this.createLineStyle=a.createLineStyle.bind(a);this.createNonScalingLineStyle=a.createNonScalingLineStyle.bind(a);this.createDashedLineStyle=a.createDashedLineStyle.bind(a);this.createNonScalingDashedLineStyle=a.createNonScalingDashedLineStyle.bind(a);this.createFontFaceId=
(b,c,d)=>new a.FontFaceId(b,c,d);this.createCharacterStyleContainer=(b,c,d)=>new a.CharacterStyleContainer(b,c,d);this.createTransform2D=a.createTransform2D;this.concatTransform2D=a.concatTransform2D;this.createSimilarityTransform2D=(b,c,d,g)=>new a.SimilarityTransform2D(b,c,d,g);this.createCamera=()=>new a.Camera;this.generateDotGrid=a.generateDotGrid;this.getRendererInterface=this.getLcRendererInterface=a.RendererInterface.get.bind(a.RendererInterface);this.createPath=(b,c)=>new a.Path(b,c);this.createAndRunApplication=
a.createAndRunApplication.bind(a);this.createVectorColorStop=()=>new a.VectorColorStop;this.createVectorFloat=()=>new a.VectorFloat;this.createGeometryHitTest=()=>a.GeometryHitTest.createInstance();this.createDepthManager=(b)=>new a.DepthManager(b);this.createSceneView=()=>a.createSceneView();this.createDrawingInterface=()=>a.createShape();this.getImagePath=(b,c)=>a.AssetManager.getImagePath(b,c);this.calcViewScale=a.calcViewScale;this.calcParallaxScale=a.calcParallaxScale;this.calcSwfBounds=a.calcSwfBounds;
this.cancelCalcSwfBounds=a.cancelCalcSwfBounds;this.isJobSystemIdle=a.isJobSystemIdle;this.createBackgroundVisibility=()=>new a.BackgroundVisibility;this.createVectorBackgroundLayer=()=>new a.VectorBackgroundLayer;this.createVideoPlayer=a.CreateVideoPlayer;this.getAssetDimensions=a.getAssetDimensions.bind(a);this.getAssetManager=a.getAssetManager.bind(a);this.getMipmapServiceClient=a.getMipmapServiceClient.bind(a);this.getTiledImageLoader=a.getTiledImageLoader.bind(a);this.getPIGImageLoader=a.getPIGImageLoader.bind(a);
this.getVideoThumbnailUrl=a.getVideoThumbnailUrl.bind(a);this.getVideoPlayerPlayButtonImage=a.getVideoPlayerPlayButtonImage.bind(a)}getRgbaFromColor(a){const b=a.getRGBData();return{r:b.r/255,g:b.g/255,b:b.b/255,a:a.getAlpha()}}colorFromRenderingGradient(a){return a.type===t.RenderingGradientType.Solid?this.getRgbaFromColor(a.color):{r:0,g:0,b:0,a:1}}fillStyleFromRenderingGradient(a){switch(a.type){case t.RenderingGradientType.Solid:return this.createSolidColorFill(this.getRgbaFromColor(a.color));
case t.RenderingGradientType.Radial:var b=this.createVectorColorStop();for(const c of a.colorStops)b.push_back({offset:c.offset,color:this.getRgbaFromColor(c.color)});a=this.createRadialGradient(a.x0,a.y0,a.r,a.x0,a.y0,b,this.GradientSpreadType.PAD,this.GradientUnitType.POINT);b.delete();return a;case t.RenderingGradientType.Linear:b=this.createVectorColorStop();for(const c of a.colorStops)b.push_back({offset:c.offset,color:this.getRgbaFromColor(c.color)});a=this.createLinearGradient(a.x0,a.y0,a.x1,
a.y1,b,this.GradientSpreadType.PAD,this.GradientUnitType.RATIO);b.delete();return a;default:throw Error("unknown gradient type");}}getWebGlModelManager(){null==this.webGlModelManager&&(this.webGlModelManager=new M.WebGlModelManager(this.boxfishLib,this.getLcRendererInterface().getModelManager(),this.getLcRendererInterface().getImageResourceManager()));return this.webGlModelManager}createWebGlChannel(a,b){a=new C.WebGlChannel(a,new Q.ZObjectScene(`${a}::ZObject`,this,b),new Q.BackgroundScene(`${a}::Background`,
this),new Q.LogoScene(`${a}::Logo`,this));this.channels.push(a);return a}createDashedLineStyleId(a,b){for(var c of this.dashCache)if(b===c.nonScaling&&v.Utils.arrayEquals(a,c.pattern))return c.id;c=this.createVectorFloat();for(var d of a)c.push_back(d);d=this.getLcRendererInterface().getMaterialManager().createLineDashPattern(c,b);c.delete();this.dashCache.push({pattern:a,nonScaling:b,id:d});return d}};M.UrlHelpers=class{static resolveUrl(a){if(0>a.indexOf(":")){const b=window.document.createElement("a");
b.href=a;a=b.href}return a}};var ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.WebGlHitTest=class extends pa.BaseHitTest{constructor(a){super();this.renderer=a}pixelHitTest(a,b,c,d,e,f){return this.renderer.pixelHitTest(a,b,c,d,e,f)}};var R={};Object.defineProperty(R,"__esModule",{value:!0});R.WebGlRenderingShape=class{constructor(a=null,b=!1){this.webGlToLocalTransform=a;this.flipped=b;this.isDecoration=!1}getWebGlToLocalTransform(){return this.webGlToLocalTransform}isFlipped(){return this.flipped}dispose(){}removeFromShapeCache(){this.dispose()}};
var da={};Object.defineProperty(da,"__esModule",{value:!0});da.WebGlPathRenderingShape=class extends R.WebGlRenderingShape{constructor(a,b,c,d=!1){super();this.libboxfish=a;this.drawingInterface=a.createDrawingInterface();this.empty=this.open=!0;null!=b&&(this.drawingInterface.beginPath(),b=a.fillStyleFromRenderingGradient(b.gradient),this.drawingInterface.setFillStyle(b),b.delete());if(null!=c){var e=0===c.width;b=d&&e?1:c.width;var f=null!=c.dashSegments;if(f||d)f&&!d?(e={id:a.createDashedLineStyleId(c.dashSegments,
!1),offset:0,scale:1},c=a.colorFromRenderingGradient(c.gradient),h=a.createDashedLineStyle(c,b,e)):!f&&d?(c=a.colorFromRenderingGradient(c.gradient),h=a.createNonScalingLineStyle(c,b)):f&&d&&(e={id:a.createDashedLineStyleId(c.dashSegments,!0),offset:0,scale:1},c=a.colorFromRenderingGradient(c.gradient),h=a.createNonScalingDashedLineStyle(c,b,e));else{d=a.fillStyleFromRenderingGradient(c.gradient);switch(c.lineCap){case t.LineCap.round:var h=a.LineCap.ROUND;break;case t.LineCap.butt:h=a.LineCap.NONE;
break;case t.LineCap.square:h=a.LineCap.SQUARE;break;default:throw Error("unknown linecap");}switch(c.lineJoin){case t.LineJoin.round:f=a.LineJoin.ROUND;break;case t.LineJoin.bevel:f=a.LineJoin.BEVEL;break;case t.LineJoin.miter:f=a.LineJoin.MITER;break;default:throw Error("unknown lineJoin");}h=a.createLineStyle(d,b,h,h,f,e?1:c.width)}this.drawingInterface.setLineStyle(h);h.delete()}}getOrCreateModel(){this.shapeModel||(this.shapeModel=this.libboxfish.getWebGlModelManager().createShapeModel(this.drawingInterface));
return this.shapeModel}createEntity(a){return a.createShapeEntity(this.getOrCreateModel())}lineTo(a,b){this.drawingInterface.lineTo(a,b);this.empty=!1}moveTo(a,b){this.drawingInterface.moveTo(a,b);this.empty=!1}quadraticCurveTo(a,b,c,d){this.drawingInterface.quadraticCurveTo(a,b,c,d);this.empty=!1}bezierCurveTo(a,b,c,d,e,f){this.drawingInterface.cubicCurveTo(a,b,c,d,e,f);this.empty=!1}toPoint(a,b,c,d){return{x:a+c*Math.cos(d),y:b+c*Math.sin(d)}}arc(a,b,c,d,e,f){c=this.toPoint(a,b,c,d);this.empty?
this.drawingInterface.moveTo(c.x,c.y):this.drawingInterface.lineTo(c.x,c.y);d=e-d;e=2*Math.PI;d>=e?d=e:d<-e&&(d=-e);0>d&&(d+=e);f&&(d=0===d?0:d===e?-e:d-e);this.drawingInterface.arcTo(a,b,180*d/Math.PI);this.empty=!1}rect(a,b,c,d){this.moveTo(a,b);this.lineTo(a+c,b);this.lineTo(a+c,b+d);this.lineTo(a,b+d);this.lineTo(a,b)}ensureCachedTarget(a){null==this.cachedTarget&&(this.cachedTarget=a.createCachedTarget(this.getOrCreateModel(),!0,4));return this.cachedTarget}dispose(){null!=this.cachedTarget&&
this.cachedTarget.delete();this.shapeModel&&this.shapeModel.release()}removeFromShapeCache(){this.dispose()}obtainShapeModel(){this.open&&(this.open=!1,this.drawingInterface.endPath());const a=this.getOrCreateModel();this.shapeModel=null;return a}};var ya={},F=this&&ya.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,h){function f(a){try{k(d.next(a))}catch(y){h(y)}}function g(a){try{k(d["throw"](a))}catch(y){h(y)}}function k(a){a.done?
c(a.value):e(a.value).then(f,g)}k((d=d.apply(a,b||[])).next())})};Object.defineProperty(ya,"__esModule",{value:!0});ya.WebGlRenderingAssetManagerImpl=class{constructor(a,b,c){this.propsPromise=a;this.urlResolver=b;this.fontCache=new Map;this.modelCache=new Map;this.scheduler=v.Utils.createScheduler(10,(a)=>{var b;return null!==(b=[...c.notFullyRenderableOthers,...c.notFullyRenderableMain].reverse().find((b)=>a.has(b)))&&void 0!==b?b:a.values().next().value});this.mediaAssetQueryWorker=new ra.MediaAssetQueryWorker((a)=>
F(this,void 0,void 0,function*(){const b=yield this.propsPromise;return new Promise((c)=>{b.libboxfish.getAssetManager().requestAssetInfo(a,(d)=>{const e=[];for(let c=0;c<d.size();c++){var f=d.get(c);null==f?e.push({kind:v.TryKind.error,error:"unknown error"}):f.status===b.libboxfish.AssetStatus.ErrorAssetNotFound||f.status===b.libboxfish.AssetStatus.ErrorNetworkCommunicationFailure?e.push({kind:v.TryKind.success,value:{mediaAssetId:a[c],pig:{status:{state:"ready",error_summary:"unknown error"}}}}):
f.status===b.libboxfish.AssetStatus.ErrorAssetConversionFailed?e.push({kind:v.TryKind.error,error:"ErrorAssetConversionFailed"}):f.status===b.libboxfish.AssetStatus.Processing?e.push({kind:v.TryKind.success,value:{mediaAssetId:a[c],pig:{status:{state:"inprogress",percentage:f.progress}}}}):(f=b.libboxfish.getAssetDimensions(f.getAssetInfo()),e.push({kind:v.TryKind.success,value:{mediaAssetId:a[c],pig:{status:{state:"ready"},result:{urls:[],dimensions:{width:f.x,height:f.y}}}}}))}c(e)})})}))}createImageAsset(a,
b,c){const d=a.getImageSize();return{kind:l.AssetKind.Image,image:a,width:d.width,height:d.height,free:b,retain:c}}createAnimatedImageAsset(a,b,c){const d=a.getImageSize();return{kind:l.AssetKind.AnimatedImage,image:a,width:d.width,height:d.height,free:b,retain:c}}createXvgAsset(a,b,c,d){a=b.getFrameWidth();const e=b.getFrameHeight();return{kind:l.AssetKind.Xvg,model:b,width:a,height:e,free:c,retain:d}}refCount(){let a=0;return[()=>{--a;return 1>a},()=>{a+=1}]}useCache(a,b,c){let d=this.modelCache.get(a);
if(null==d){const [e,f]=this.refCount();d={promise:b().catch((b)=>{this.modelCache.delete(a);throw b;}),release:()=>{e()&&(this.modelCache.delete(a),c())},retain:f};this.modelCache.set(a,d)}d.retain();return d}downloadSwf(a,b){return new Promise((c,d)=>{a.assetManager.addSwf(b,(e,f)=>{e===a.libboxfish.AssetManagerResult.SUCCESS?c(f):e===a.libboxfish.AssetManagerResult.FAILURE&&d(`AssetManager.add failed for url: ${b}`)})})}loadXVGModel(a,b,c){return new Promise((a,e)=>{c.load();c.addLoadCallback((d)=>
{d?a(c):e("model.load failed for url: "+b)})})}thumbnailImageAssetFromVideoUrl(a,b){return F(this,void 0,void 0,function*(){const c=(yield this.propsPromise).libboxfish.getVideoThumbnailUrl(a);return this.imageAssetFromUrl(c,b)})}imageAssetFromUrl(a,b){return F(this,void 0,void 0,function*(){return this.scheduler.addJob(b,()=>this.imageAssetFromUrlI(a))})}imageAssetFromUrlI(a){return F(this,void 0,void 0,function*(){const b=this.urlResolver.getResolvedUrl(a),c=yield this.propsPromise;let d;const e=
this.useCache(b,()=>F(this,void 0,void 0,function*(){d=c.libboxfish.getWebGlModelManager().createTiledImage(c.tiledImageLoader,b);try{return yield new Promise((a,e)=>{let f=c.libboxfish.getImagePath(d.getName(),b);d.addLoadCallback((c)=>{c?a(d):e("model.load failed for url: "+b)});c.tiledImageLoader.load(d,b,f);f.delete()})}catch(f){throw d.delete(),d=void 0,f;}}),()=>{d&&d.delete()});return this.createImageAsset(yield e.promise,e.release,e.retain)})}xvgAssetFromSwfUrl(a,b){return this.xvgAssetFromXvgUrl(a,
b)}xvgAssetFromPdfUrl(a,b,c){return".pdf"===a.substring(a.length-4).toLowerCase()?this.xvgAssetFromXvgUrl(`${a.substring(0,a.length-4)}_pdf_page_${b}.swf`,c):this.xvgAssetFromXvgUrl(a,c)}xvgAssetFromXvgUrl(a,b){return F(this,void 0,void 0,function*(){return this.scheduler.addJob(b,()=>this.xvgAssetFromXvgUrlI(a))})}xvgAssetFromXvgUrlI(a){return F(this,void 0,void 0,function*(){const b=this.urlResolver.getResolvedUrl(a),c=yield this.propsPromise;let d;const e=this.useCache(b,()=>F(this,void 0,void 0,
function*(){const a=yield this.downloadSwf(c,b);d=c.libboxfish.getWebGlModelManager().createXVGModel(a);a.delete();try{return yield this.loadXVGModel(c,b,d)}catch(h){throw d.delete(),c.assetManager.removeSwf(b),d=void 0,h;}}),()=>{d&&(d.delete(),c.assetManager.removeSwf(b))});return this.createXvgAsset(b,yield e.promise,e.release,e.retain)})}calcSwfBounds(a){return F(this,void 0,void 0,function*(){const b=this.urlResolver.getResolvedUrl(a),c=yield this.propsPromise,d=yield this.downloadSwf(c,b);try{return yield new Promise((a,
b)=>{c.libboxfish.calcSwfBounds(d,(c,d)=>{c?(c=d.mins(),d=d.getSize(),a({x:c.x,y:c.y,width:d.x,height:d.y})):b()})})}finally{d.delete(),c.assetManager.removeSwf(b)}})}imageAssetFromImage(a){return F(this,void 0,void 0,function*(){yield v.Utils.waitForLoading(a);const b=(yield this.propsPromise).libboxfish.getWebGlModelManager().createDataImageFromHTMLImageElement(a);let c=1;return this.createImageAsset(b,()=>{--c;0===c&&b.delete()},()=>{c+=1})})}getVideoPlayerPlayButtonImageAsset(){return F(this,
void 0,void 0,function*(){const a=(yield this.propsPromise).libboxfish.getVideoPlayerPlayButtonImage();yield new Promise((b)=>{a.addLoadCallback(()=>{b()})});return this.createImageAsset(a,()=>{},()=>{})})}fontFromUrl(a,b,c){return this.propsPromise.then((d)=>{let e=this.fontCache.get(b);null==e&&(e={promise:new Promise((e,h)=>{const f=M.UrlHelpers.resolveUrl(b);d.assetManager.addFont(a,f,c,(a)=>{a===d.libboxfish.AssetManagerResult.SUCCESS?e():a===d.libboxfish.AssetManagerResult.FAILURE&&h("AssetManager.addFont failed for url: "+
b)})})},this.fontCache.set(b,e));return e.promise})}animatedImageAssetFromMaid(a){return F(this,void 0,void 0,function*(){const b=yield this.propsPromise;let c=!1,d=null;const e=this.useCache(a,()=>F(this,void 0,void 0,function*(){return new Promise((e,h)=>{let f=50;const g=()=>{d=b.pigImageLoader.createPIGImage(a,a,(a)=>F(this,void 0,void 0,function*(){null==a?(f*=2,yield v.Utils.sleep(f),g()):(a.addLoadCallback((b)=>{b&&!c&&a.play(0)}),c?h():e(a))}))};g()})}),()=>{c=!0;null!=d&&b.pigImageLoader.cancel(d)});
return this.createAnimatedImageAsset(yield e.promise,e.release,e.retain)})}queryConversionResult(a){return this.mediaAssetQueryWorker.queryConversionResult(a)}queryMediaAssetDimensions(a){return this.mediaAssetQueryWorker.queryMediaAssetDimensions(a)}getCachedMediaAssetDimensions(a){return this.mediaAssetQueryWorker.getCachedMediaAssetDimensions(a)}};var jb={};Object.defineProperty(jb,"__esModule",{value:!0});jb.WebGlHairlineArcRenderingShape=class extends R.WebGlRenderingShape{constructor(a,b,c){super();
this.lineStyle=a;this.libboxfish=b;this.isDecoration=c}update(a){this.webGlToLocalTransform=k.Geometry.createIdentity();null==this.oldArcData||this.hasSameModel(this.oldArcData,a)||(this.shapeModel.release(),this.oldArcData=this.shapeModel=null);if(a.isStraight){var b=a.tailPos.x-a.headPos.x;const c=a.tailPos.y-a.headPos.y,d=Math.sqrt(b*b+c*c);if(null==this.shapeModel){const e=new da.WebGlPathRenderingShape(this.libboxfish,null,this.lineStyle,!0);e.moveTo(0,0);e.lineTo(b/d,c/d);this.shapeModel=e.obtainShapeModel();
this.oldArcData=a}this.webGlToLocalTransform.scale(d);this.webGlToLocalTransform.translate(a.headPos.x,a.headPos.y)}else null==this.shapeModel&&(b=new da.WebGlPathRenderingShape(this.libboxfish,null,this.lineStyle,!0),b.arc(0,0,1,a.startAngle,a.endAngle,a.isInverse),this.shapeModel=b.obtainShapeModel(),this.oldArcData=a),this.webGlToLocalTransform.scale(a.radius),this.webGlToLocalTransform.translate(a.origin.x,a.origin.y)}createEntity(a){return a.createShapeEntity(this.shapeModel)}dispose(){null!=
this.shapeModel&&this.shapeModel.release()}removeFromShapeCache(){}hasSameModel(a,b){return a.isStraight!==b.isStraight||a.isInverse!==b.isInverse||a.alpha!==b.alpha||a.startAngle!==b.startAngle||a.endAngle!==b.endAngle?!1:!0}};var kb={};Object.defineProperty(kb,"__esModule",{value:!0});kb.WebGlHairlineRectangleRenderingShape=class extends R.WebGlRenderingShape{constructor(a,b,c){super();this.fillStyle=a;this.lineStyle=b;this.libboxfish=c}update(a){this.webGlToLocalTransform=k.Geometry.createIdentity();
if(null==this.shapeModel){const a=new da.WebGlPathRenderingShape(this.libboxfish,this.fillStyle,this.lineStyle,!0);a.rect(0,0,1,1);this.shapeModel=a.obtainShapeModel()}this.webGlToLocalTransform.scaleXY(a.getWidth(),a.getHeight());this.webGlToLocalTransform.translate(a.getLeft(),a.getTop())}createEntity(a){return a.createShapeEntity(this.shapeModel)}dispose(){null!=this.shapeModel&&this.shapeModel.release()}removeFromShapeCache(){}};var lb={};Object.defineProperty(lb,"__esModule",{value:!0});lb.WebGlImageRenderingShape=
class extends R.WebGlRenderingShape{constructor(a,b,c,d){const e=k.Geometry.createIdentity();let f=b.getWidth()/a.width,h=b.getHeight()/a.height;e.setToScaleXY(f,h);null!=c?e.translate((d?-1:1)*b.getLeft()*f,b.getTop()*h):e.translate((d?1:-1)*(b.getLeft()+b.getWidth()/2),-(b.getTop()+b.getHeight()/2));super(e,d);this.imageAsset=a;this.imageMask=c;this.nonMaskedRect=b}createEntity(a){var b=null;if(null!=this.imageMask){b=this.nonMaskedRect.intersectWith(this.imageMask).getData();const a=b.x-this.nonMaskedRect.getLeft(),
d=b.y-this.nonMaskedRect.getTop();b={x:a,y:d,width:b.width,height:b.height}}return a.createImageEntity(this.imageAsset,b)}};var za={};Object.defineProperty(za,"__esModule",{value:!0});za.WebGlTextRenderingShape=class extends R.WebGlRenderingShape{constructor(a,b=null){super(b);this.webGlToLocalTransform=b;this.model=a.createRenderModel()}createEntity(a){return a.createTextEntity(this.model)}dispose(){this.model&&this.model.release()}};var mb={};Object.defineProperty(mb,"__esModule",{value:!0});mb.WebGlXvgRenderingShape=
class extends R.WebGlRenderingShape{constructor(a,b,c,d,e,f,h,g){super();this.xvgAsset=a;this.imageScaleX=b;this.imageScaleY=c;this.boundsLeft=d;this.boundsTop=e;this.width=f;this.height=h;this.mask=g;this.__XvgRenderingShape__=0;this.webGlToLocalTransform=k.Geometry.createIdentity();null!=this.mask?(a=g.getCenter(),this.webGlToLocalTransform.translate(-a.x,-a.y)):this.webGlToLocalTransform.translate(-((null!==d&&void 0!==d?d:0)+f/2*b),-((null!==e&&void 0!==e?e:0)+h/2*c))}createEntity(a){return null!=
this.mask?a.createXVGEntity(this,this.mask.getData()):a.createXVGEntity(this,null)}};var nb={};Object.defineProperty(nb,"__esModule",{value:!0});nb.WebGlAnimatedImageRenderingShape=class extends R.WebGlRenderingShape{constructor(a){const b=k.Geometry.createIdentity(),c=1/Math.max(a.width,a.height);b.setToScale(c);b.translate(-a.width*c/2,-a.height*c/2);super(b,!1);this.animatedImageAsset=a}createEntity(a){return a.createImageEntity(this.animatedImageAsset)}};var ob={};Object.defineProperty(ob,"__esModule",
{value:!0});ob.WebGlVideoPlayerShape=class extends R.WebGlRenderingShape{constructor(a,b,c){super();this.id=a;this.url=b;this.imageAsset=c;this.sceneSet=new Set}createEntity(a){a.interactive&&this.sceneSet.add(a);return a.createVideoPlayerEntity(this.id,this.url,this.imageAsset)}onEvent(a){for(const b of this.sceneSet)b.onEventVideoPlayer(this.id,this.url,a)}};var pb={};Object.defineProperty(pb,"__esModule",{value:!0});pb.WebGlRenderingSurface=class extends ua.BaseRenderingSurface{constructor(a){super();
this.libboxfish=a}createImage(a,b,c=null,d=!1){return new lb.WebGlImageRenderingShape(a,b,c,d)}createAnimatedImage(a){return new nb.WebGlAnimatedImageRenderingShape(a)}createPath(a,b){return new da.WebGlPathRenderingShape(this.libboxfish,a,b)}getKind(){return"webgl"}createXvg(a,b,c,d,e,f,h,g,k){return new mb.WebGlXvgRenderingShape(a,c,d,e,f,h,g,k)}createText(a){return new za.WebGlTextRenderingShape(a)}createHairlineRectangle(a,b){return new kb.WebGlHairlineRectangleRenderingShape(a,b,this.libboxfish)}createHairlineArc(a,
b){return new jb.WebGlHairlineArcRenderingShape(a,this.libboxfish,b)}createVideoPlayerShape(a,b,c){return new ob.WebGlVideoPlayerShape(a,b,c)}};var A={};Object.defineProperty(A,"__esModule",{value:!0});A.LineBreakDataI=class{constructor(){this.Pr=1;this.In=2;this.PC=3;this.IC=4;this.Di=5;this.Ex=10;this.OP=0;this.CL=1;this.CP=2;this.QU=3;this.GL=4;this.NS=5;this.EX=6;this.SY=7;this.IS=8;this.PR=9;this.PO=10;this.NU=11;this.AL=12;this.HL=13;this.ID=14;this.IN=15;this.HY=16;this.BA=17;this.BB=18;this.B2=
19;this.ZW=20;this.CM=21;this.WJ=22;this.H2=23;this.H3=24;this.JL=25;this.JV=26;this.JT=27;this.RI=28;this.SP=100;this.SA=this.XX=this.AI=this.AL;this.CJ=this.ID;this.LF=201;this.BK=202;this.CR=203;this.NL=204;this.SG=205;this.CB=206;this.LINE_BREAK_MATRIX=[[this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.PC,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr,this.Pr],[this.Di,
this.Pr,this.Pr,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Pr,this.In,this.In,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,this.In,this.In,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,
this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.Pr,this.IC,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.Pr,this.IC,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,
this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,
this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.In,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,
this.IC,this.Pr,this.In,this.In,this.In,this.In,this.In,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,this.In,this.In,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,
this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,
this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.Di,this.In,
this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.Di,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.In,this.In,
this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.Pr,this.IC,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Pr,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,
this.Di,this.Di,this.Di,this.Di,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di],[this.In,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.In,this.Pr,
this.IC,this.Pr,this.In,this.In,this.In,this.In,this.In,this.In],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.In,this.In,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,
this.Di,this.In,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.In,this.In,this.In,this.In,this.Di,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.In,this.In,this.Di],[this.Di,
this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.In,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.In,this.Di],[this.Di,this.Pr,this.Pr,this.In,this.In,this.In,this.Pr,this.Pr,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.Di,this.In,this.In,this.Di,this.Di,this.Pr,this.IC,this.Pr,this.Di,this.Di,this.Di,this.Di,this.Di,this.In]];this.BREAK_RANGE_CLASSES=[this.CM,this.BA,
this.LF,this.BK,this.CR,this.CM,this.SP,this.EX,this.QU,this.AL,this.PR,this.PO,this.AL,this.QU,this.OP,this.CP,this.AL,this.PR,this.IS,this.HY,this.IS,this.SY,this.NU,this.IS,this.AL,this.EX,this.AL,this.OP,this.PR,this.CP,this.AL,this.OP,this.BA,this.CL,this.AL,this.CM,this.NL,this.CM,this.GL,this.OP,this.PO,this.PR,this.AL,this.AI,this.AL,this.AI,this.QU,this.AL,this.BA,this.AL,this.PO,this.PR,this.AI,this.BB,this.AL,this.AI,this.QU,this.AI,this.OP,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,
this.BB,this.AI,this.BB,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.BB,this.AL,this.CM,this.GL,this.CM,this.GL,this.CM,this.AL,this.IS,this.AL,this.CM,this.AL,this.IS,this.BA,this.PR,this.CM,this.BA,this.CM,this.AL,this.CM,this.AL,this.CM,this.EX,this.CM,this.HL,this.AL,this.PO,this.IS,this.AL,this.CM,this.EX,this.AL,this.CM,this.NU,this.PO,this.NU,this.AL,this.CM,this.AL,this.EX,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.NU,this.AL,this.CM,
this.AL,this.CM,this.AL,this.CM,this.AL,this.NU,this.AL,this.CM,this.AL,this.IS,this.EX,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.BA,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.PO,this.AL,this.PO,this.AL,this.PR,this.CM,this.AL,this.CM,this.AL,this.NU,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,
this.CM,this.NU,this.AL,this.PR,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.PR,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.PO,this.AL,this.CM,this.AL,this.CM,this.AL,this.SA,this.PR,this.SA,this.AL,this.NU,this.BA,this.SA,this.NU,this.SA,this.AL,
this.BB,this.AL,this.BB,this.GL,this.BB,this.BA,this.GL,this.EX,this.GL,this.AL,this.EX,this.AL,this.CM,this.AL,this.NU,this.AL,this.BA,this.CM,this.AL,this.CM,this.AL,this.CM,this.OP,this.CL,this.OP,this.CL,this.CM,this.AL,this.CM,this.BA,this.CM,this.BA,this.CM,this.AL,this.CM,this.BA,this.AL,this.CM,this.AL,this.BB,this.BA,this.BB,this.AL,this.GL,this.SA,this.NU,this.BA,this.AL,this.SA,this.NU,this.SA,this.AL,this.JL,this.JV,this.JT,this.AL,this.CM,this.AL,this.BA,this.AL,this.BA,this.AL,this.BA,
this.AL,this.OP,this.CL,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,this.BA,this.AL,this.CM,this.AL,this.CM,this.SA,this.BA,this.NS,this.SA,this.BA,this.AL,this.BA,this.PR,this.SA,this.NU,this.AL,this.EX,this.BA,this.BB,this.AL,this.EX,this.AL,this.CM,this.GL,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.EX,this.NU,this.SA,this.NU,this.SA,this.AL,this.CM,this.AL,this.SA,this.CM,this.NU,this.SA,this.CM,this.AL,this.CM,this.AL,this.NU,this.BA,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,
this.AL,this.CM,this.AL,this.NU,this.AL,this.CM,this.AL,this.CM,this.BA,this.NU,this.AL,this.NU,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.BB,this.AL,this.BA,this.GL,this.BA,this.ZW,this.CM,this.BA,this.GL,this.BA,this.B2,this.AI,this.AL,this.QU,this.OP,this.QU,this.OP,this.QU,this.AI,this.AL,this.IN,this.BA,this.BK,this.CM,this.GL,this.PO,this.AL,this.QU,this.AI,this.NS,this.AL,this.IS,this.OP,this.CL,this.NS,this.AL,this.BA,this.AL,
this.BA,this.AL,this.BA,this.WJ,this.AL,this.CM,this.AL,this.AI,this.AL,this.OP,this.CL,this.AI,this.AL,this.AI,this.AL,this.OP,this.CL,this.AL,this.PR,this.PO,this.PR,this.PO,this.PR,this.CM,this.AL,this.PO,this.AL,this.AI,this.AL,this.PO,this.AL,this.AI,this.AL,this.PR,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,
this.AI,this.AL,this.AI,this.PR,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.ID,this.AL,this.OP,this.CL,this.AL,this.ID,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,
this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.ID,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.ID,this.AI,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.AI,this.ID,this.AI,this.AL,this.AI,this.AL,this.AI,this.AL,this.ID,this.AL,this.AI,this.AL,
this.ID,this.AI,this.ID,this.AL,this.ID,this.AI,this.ID,this.AI,this.ID,this.AI,this.ID,this.AI,this.ID,this.AL,this.AI,this.AL,this.AI,this.ID,this.AI,this.ID,this.AI,this.ID,this.AI,this.ID,this.AL,this.ID,this.AL,this.AI,this.AL,this.QU,this.AL,this.EX,this.AL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.AI,this.AL,this.OP,this.CL,this.AL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.AL,
this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.AL,this.OP,this.CL,this.OP,this.CL,this.AL,this.OP,this.CL,this.AL,this.AI,this.AL,this.CM,this.AL,this.EX,this.BA,this.AL,this.EX,this.BA,this.AL,this.BA,this.CM,this.AL,this.CM,this.QU,this.BA,this.AL,this.BA,this.OP,this.BA,this.AL,this.QU,this.AL,this.QU,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,
this.BA,this.EX,this.AL,this.BA,this.AL,this.BA,this.AL,this.B2,this.ID,this.CL,this.ID,this.NS,this.ID,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.ID,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.NS,this.OP,this.CL,this.ID,this.CM,this.ID,this.NS,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.CM,this.NS,
this.ID,this.NS,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.CJ,this.ID,this.NS,this.CJ,this.NS,this.ID,this.CJ,this.ID,this.AI,this.ID,this.AL,this.ID,this.NS,this.ID,this.AL,this.BA,this.AL,this.BA,this.EX,this.BA,this.AL,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,
this.PO,this.AL,this.BB,this.EX,this.CM,this.AL,this.CM,this.BA,this.NU,this.CM,this.AL,this.NU,this.AL,this.CM,this.BA,this.AL,this.CM,this.AL,this.JL,this.CM,this.AL,this.CM,this.AL,this.BA,this.AL,this.NU,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.NU,this.AL,this.BA,this.SA,this.AL,this.CM,this.BA,this.AL,this.CM,this.AL,this.CM,this.BA,this.CM,this.NU,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,
this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,
this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.H2,this.H3,this.JV,this.JT,this.SG,this.XX,this.ID,this.AL,this.HL,this.CM,this.HL,this.AL,this.HL,this.AL,this.OP,this.CL,this.AL,this.PO,this.AL,this.CM,this.IS,this.CL,this.IS,this.EX,this.OP,this.CL,this.IN,this.CM,this.ID,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.OP,
this.CL,this.OP,this.CL,this.OP,this.CL,this.ID,this.OP,this.CL,this.ID,this.CL,this.ID,this.CL,this.NS,this.EX,this.ID,this.OP,this.CL,this.OP,this.CL,this.OP,this.CL,this.ID,this.PR,this.PO,this.ID,this.AL,this.WJ,this.EX,this.ID,this.PR,this.PO,this.ID,this.OP,this.CL,this.ID,this.CL,this.ID,this.CL,this.ID,this.NS,this.ID,this.EX,this.ID,this.OP,this.ID,this.CL,this.ID,this.OP,this.ID,this.CL,this.ID,this.OP,this.CL,this.OP,this.CL,this.NS,this.AL,this.CJ,this.AL,this.NS,this.AL,this.PO,this.PR,
this.ID,this.PR,this.AL,this.CM,this.CB,this.AI,this.AL,this.BA,this.AL,this.CM,this.AL,this.BA,this.AL,this.BA,this.AL,this.NU,this.AL,this.BA,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,this.AL,this.BA,this.AL,this.BA,this.AL,this.CM,this.AL,this.CM,this.BA,this.AL,this.NU,this.CM,this.AL,this.CM,this.AL,this.BA,this.AL,this.NU,this.CM,this.AL,this.CM,this.NU,this.BA,this.CM,this.AL,this.CM,this.AL,this.BA,this.AL,this.BA,this.NU,this.AL,this.CM,this.NU,this.AL,this.BA,this.AL,this.OP,this.CL,
this.AL,this.CL,this.AL,this.OP,this.CL,this.OP,this.CL,this.AL,this.OP,this.CL,this.AL,this.CM,this.AL,this.ID,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.CM,this.AL,this.NU,this.AL,this.ID,this.AI,this.AL,this.AI,this.AL,this.AI,this.RI,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.AL,this.ID,this.CM,this.XX];this.BREAK_RANGE_ENDS=[8,9,10,
12,13,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,57,59,62,63,90,91,92,93,122,123,124,125,126,132,133,159,160,161,162,165,166,168,169,170,171,172,173,175,176,177,179,180,181,186,187,190,191,214,215,246,247,710,711,712,715,716,717,719,720,727,731,732,733,734,735,767,846,847,859,866,879,893,894,1154,1161,1415,1417,1418,1423,1469,1470,1471,1472,1474,1475,1477,1478,1479,1522,1544,1547,1549,1551,1562,1567,1610,1631,1641,1642,1644,1647,1648,1747,1748,1749,1756,1758,1764,1766,1768,1769,1773,1775,
1785,1808,1809,1839,1866,1957,1968,1969,1993,2026,2035,2039,2040,2041,2069,2073,2074,2083,2084,2087,2088,2093,2136,2139,2220,2307,2361,2364,2365,2383,2384,2391,2401,2403,2405,2415,2431,2435,2489,2492,2493,2509,2510,2519,2529,2531,2543,2545,2547,2552,2553,2554,2555,2563,2617,2641,2654,2671,2673,2676,2691,2745,2748,2749,2765,2785,2787,2799,2800,2801,2819,2873,2876,2877,2903,2913,2915,2927,2935,2946,3001,3021,3024,3031,3055,3064,3065,3066,3075,3133,3158,3169,3171,3183,3199,3203,3257,3260,3261,3286,3297,
3299,3311,3314,3331,3389,3405,3406,3415,3425,3427,3439,3445,3449,3455,3459,3526,3571,3572,3642,3647,3662,3663,3673,3675,3789,3801,3807,3840,3844,3845,3847,3848,3850,3851,3852,3857,3858,3859,3860,3863,3865,3871,3881,3891,3892,3893,3894,3895,3896,3897,3898,3899,3900,3901,3903,3948,3966,3967,3972,3973,3975,3980,4028,4031,4037,4038,4047,4049,4050,4051,4056,4058,4159,4169,4171,4175,4239,4249,4255,4351,4447,4519,4607,4954,4959,4960,4961,5108,5120,5759,5760,5786,5787,5788,5866,5869,5905,5908,5937,5940,5942,
5969,5971,6E3,6003,6099,6101,6102,6103,6104,6105,6106,6107,6109,6121,6145,6147,6149,6150,6151,6153,6154,6157,6158,6169,6312,6313,6428,6459,6464,6469,6479,6601,6617,6623,6678,6683,6687,6780,6783,6809,6829,6916,6963,6980,6987,7001,7003,7004,7008,7018,7027,7036,7042,7072,7085,7087,7097,7141,7155,7203,7223,7231,7241,7247,7257,7293,7295,7367,7378,7379,7400,7404,7405,7409,7412,7615,7679,8188,8189,8190,8198,8199,8202,8203,8207,8208,8209,8211,8212,8214,8215,8217,8218,8221,8222,8223,8225,8227,8230,8231,8233,
8238,8239,8247,8248,8250,8251,8253,8259,8260,8261,8262,8265,8277,8278,8279,8283,8284,8287,8288,8292,8303,8305,8308,8316,8317,8318,8319,8320,8324,8332,8333,8334,8348,8358,8359,8373,8374,8378,8432,8450,8451,8452,8453,8456,8457,8466,8467,8469,8470,8480,8482,8490,8491,8531,8533,8538,8539,8541,8542,8543,8555,8559,8569,8584,8601,8657,8658,8659,8660,8703,8704,8705,8707,8710,8712,8714,8715,8718,8719,8720,8721,8723,8724,8725,8729,8730,8732,8736,8738,8739,8740,8741,8742,8748,8749,8750,8755,8759,8763,8765,8775,
8776,8779,8780,8785,8786,8799,8801,8803,8807,8809,8811,8813,8815,8833,8835,8837,8839,8852,8853,8856,8857,8868,8869,8894,8895,8977,8978,8985,8987,9E3,9001,9002,9199,9203,9290,9470,9471,9547,9551,9588,9599,9615,9617,9621,9631,9633,9634,9641,9649,9651,9653,9655,9659,9661,9663,9665,9669,9672,9674,9675,9677,9681,9697,9701,9710,9711,9727,9731,9732,9734,9736,9737,9741,9743,9747,9749,9751,9752,9753,9759,9784,9787,9791,9792,9793,9794,9823,9825,9826,9829,9830,9831,9832,9834,9835,9837,9838,9839,9854,9855,9885,
9887,9916,9928,9932,9933,9934,9937,9938,9940,9943,9945,9947,9948,9950,9953,9954,9955,9959,9961,9962,9968,9973,9974,9978,9980,9988,9991,9997,10070,10071,10074,10078,10081,10083,10087,10088,10089,10090,10091,10092,10093,10094,10095,10096,10097,10098,10099,10100,10101,10131,10180,10181,10182,10213,10214,10215,10216,10217,10218,10219,10220,10221,10222,10223,10626,10627,10628,10629,10630,10631,10632,10633,10634,10635,10636,10637,10638,10639,10640,10641,10642,10643,10644,10645,10646,10647,10648,10711,10712,
10713,10714,10715,10747,10748,10749,11092,11097,11502,11505,11507,11513,11516,11517,11518,11519,11631,11632,11647,11742,11775,11789,11797,11798,11799,11800,11801,11803,11805,11807,11809,11810,11811,11812,11813,11814,11815,11816,11817,11821,11822,11823,11825,11826,11828,11833,11835,12288,12290,12292,12293,12295,12296,12297,12298,12299,12300,12301,12302,12303,12304,12305,12307,12308,12309,12310,12311,12312,12313,12314,12315,12316,12317,12319,12329,12335,12346,12348,12351,12353,12354,12355,12356,12357,
12358,12359,12360,12361,12386,12387,12418,12419,12420,12421,12422,12423,12429,12430,12436,12438,12442,12446,12447,12448,12449,12450,12451,12452,12453,12454,12455,12456,12457,12482,12483,12514,12515,12516,12517,12518,12519,12525,12526,12532,12534,12538,12539,12540,12542,12771,12799,12871,12879,19903,19967,40980,40981,42182,42237,42239,42508,42509,42510,42511,42527,42537,42606,42610,42611,42621,42647,42655,42735,42737,42738,42743,43009,43010,43013,43014,43018,43019,43042,43047,43063,43064,43123,43125,
43127,43137,43187,43204,43215,43225,43249,43259,43273,43301,43309,43311,43334,43347,43359,43388,43395,43442,43456,43462,43465,43471,43481,43560,43574,43586,43587,43595,43597,43609,43612,43615,43743,43754,43759,43761,43764,43766,44002,44010,44011,44013,44025,44032,44059,44060,44087,44088,44115,44116,44143,44144,44171,44172,44199,44200,44227,44228,44255,44256,44283,44284,44311,44312,44339,44340,44367,44368,44395,44396,44423,44424,44451,44452,44479,44480,44507,44508,44535,44536,44563,44564,44591,44592,
44619,44620,44647,44648,44675,44676,44703,44704,44731,44732,44759,44760,44787,44788,44815,44816,44843,44844,44871,44872,44899,44900,44927,44928,44955,44956,44983,44984,45011,45012,45039,45040,45067,45068,45095,45096,45123,45124,45151,45152,45179,45180,45207,45208,45235,45236,45263,45264,45291,45292,45319,45320,45347,45348,45375,45376,45403,45404,45431,45432,45459,45460,45487,45488,45515,45516,45543,45544,45571,45572,45599,45600,45627,45628,45655,45656,45683,45684,45711,45712,45739,45740,45767,45768,
45795,45796,45823,45824,45851,45852,45879,45880,45907,45908,45935,45936,45963,45964,45991,45992,46019,46020,46047,46048,46075,46076,46103,46104,46131,46132,46159,46160,46187,46188,46215,46216,46243,46244,46271,46272,46299,46300,46327,46328,46355,46356,46383,46384,46411,46412,46439,46440,46467,46468,46495,46496,46523,46524,46551,46552,46579,46580,46607,46608,46635,46636,46663,46664,46691,46692,46719,46720,46747,46748,46775,46776,46803,46804,46831,46832,46859,46860,46887,46888,46915,46916,46943,46944,
46971,46972,46999,47E3,47027,47028,47055,47056,47083,47084,47111,47112,47139,47140,47167,47168,47195,47196,47223,47224,47251,47252,47279,47280,47307,47308,47335,47336,47363,47364,47391,47392,47419,47420,47447,47448,47475,47476,47503,47504,47531,47532,47559,47560,47587,47588,47615,47616,47643,47644,47671,47672,47699,47700,47727,47728,47755,47756,47783,47784,47811,47812,47839,47840,47867,47868,47895,47896,47923,47924,47951,47952,47979,47980,48007,48008,48035,48036,48063,48064,48091,48092,48119,48120,
48147,48148,48175,48176,48203,48204,48231,48232,48259,48260,48287,48288,48315,48316,48343,48344,48371,48372,48399,48400,48427,48428,48455,48456,48483,48484,48511,48512,48539,48540,48567,48568,48595,48596,48623,48624,48651,48652,48679,48680,48707,48708,48735,48736,48763,48764,48791,48792,48819,48820,48847,48848,48875,48876,48903,48904,48931,48932,48959,48960,48987,48988,49015,49016,49043,49044,49071,49072,49099,49100,49127,49128,49155,49156,49183,49184,49211,49212,49239,49240,49267,49268,49295,49296,
49323,49324,49351,49352,49379,49380,49407,49408,49435,49436,49463,49464,49491,49492,49519,49520,49547,49548,49575,49576,49603,49604,49631,49632,49659,49660,49687,49688,49715,49716,49743,49744,49771,49772,49799,49800,49827,49828,49855,49856,49883,49884,49911,49912,49939,49940,49967,49968,49995,49996,50023,50024,50051,50052,50079,50080,50107,50108,50135,50136,50163,50164,50191,50192,50219,50220,50247,50248,50275,50276,50303,50304,50331,50332,50359,50360,50387,50388,50415,50416,50443,50444,50471,50472,
50499,50500,50527,50528,50555,50556,50583,50584,50611,50612,50639,50640,50667,50668,50695,50696,50723,50724,50751,50752,50779,50780,50807,50808,50835,50836,50863,50864,50891,50892,50919,50920,50947,50948,50975,50976,51003,51004,51031,51032,51059,51060,51087,51088,51115,51116,51143,51144,51171,51172,51199,51200,51227,51228,51255,51256,51283,51284,51311,51312,51339,51340,51367,51368,51395,51396,51423,51424,51451,51452,51479,51480,51507,51508,51535,51536,51563,51564,51591,51592,51619,51620,51647,51648,
51675,51676,51703,51704,51731,51732,51759,51760,51787,51788,51815,51816,51843,51844,51871,51872,51899,51900,51927,51928,51955,51956,51983,51984,52011,52012,52039,52040,52067,52068,52095,52096,52123,52124,52151,52152,52179,52180,52207,52208,52235,52236,52263,52264,52291,52292,52319,52320,52347,52348,52375,52376,52403,52404,52431,52432,52459,52460,52487,52488,52515,52516,52543,52544,52571,52572,52599,52600,52627,52628,52655,52656,52683,52684,52711,52712,52739,52740,52767,52768,52795,52796,52823,52824,
52851,52852,52879,52880,52907,52908,52935,52936,52963,52964,52991,52992,53019,53020,53047,53048,53075,53076,53103,53104,53131,53132,53159,53160,53187,53188,53215,53216,53243,53244,53271,53272,53299,53300,53327,53328,53355,53356,53383,53384,53411,53412,53439,53440,53467,53468,53495,53496,53523,53524,53551,53552,53579,53580,53607,53608,53635,53636,53663,53664,53691,53692,53719,53720,53747,53748,53775,53776,53803,53804,53831,53832,53859,53860,53887,53888,53915,53916,53943,53944,53971,53972,53999,54E3,
54027,54028,54055,54056,54083,54084,54111,54112,54139,54140,54167,54168,54195,54196,54223,54224,54251,54252,54279,54280,54307,54308,54335,54336,54363,54364,54391,54392,54419,54420,54447,54448,54475,54476,54503,54504,54531,54532,54559,54560,54587,54588,54615,54616,54643,54644,54671,54672,54699,54700,54727,54728,54755,54756,54783,54784,54811,54812,54839,54840,54867,54868,54895,54896,54923,54924,54951,54952,54979,54980,55007,55008,55035,55036,55063,55064,55091,55092,55119,55120,55147,55148,55175,55176,
55203,55238,55291,57343,63743,64255,64279,64285,64286,64296,64297,64335,64829,64830,64831,65019,65020,65021,65039,65040,65042,65044,65046,65047,65048,65049,65062,65076,65077,65078,65079,65080,65081,65082,65083,65084,65085,65086,65087,65088,65089,65090,65091,65092,65094,65095,65096,65103,65104,65105,65106,65109,65111,65112,65113,65114,65115,65116,65117,65118,65128,65129,65130,65131,65276,65279,65281,65283,65284,65285,65287,65288,65289,65291,65292,65293,65294,65305,65307,65310,65311,65338,65339,65340,
65341,65370,65371,65372,65373,65374,65375,65377,65378,65380,65381,65382,65392,65437,65439,65500,65504,65505,65508,65510,65518,65531,65532,65533,65786,65794,66044,66045,66461,66463,66511,66512,66717,66729,67669,67671,67867,67871,68096,68111,68147,68159,68167,68183,68405,68415,69246,69634,69687,69702,69704,69733,69743,69762,69807,69818,69821,69825,69864,69881,69890,69926,69940,69951,69955,70018,70066,70080,70084,70086,70087,70088,70105,71338,71351,71369,74850,74867,78423,78426,78429,78465,78466,78469,
78470,78471,78472,78473,78712,78713,78715,94032,94098,94111,110593,119140,119145,119148,119170,119172,119179,119209,119213,119361,119364,120779,120831,126705,127199,127277,127278,127337,127339,127386,127487,127924,127926,127931,127932,128159,128160,128161,128162,128163,128164,128174,128175,128176,128178,128252,128262,128278,128292,128305,128323,128709,128883,262141,917999,1114109]}};A.LineBreakData=new A.LineBreakDataI;var ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.WebGlRenderingTextFactory=
class{constructor(a){this.textManager=a}init(a){this.libboxfish=a}createDefaultBaseStyle(){return Y.TextModel.createCharacterStyleContainer(Y.TextModel.createColor(0),"default",24,"normal","normal",0,null)}create(a,b){return new ea.WebGlRenderingText(this.textManager,a,b,this.libboxfish,null)}update(a,b,c,d){d=d?g.CetModel.urlMarker.markUrlsInText(a):a;return null!=c&&a===c.getText()&&a.equals(d)?c:this.create(d,b).setBaseStyle(b)}};ea.WebGlRenderingText=class{constructor(a,b,c,d,e){this.freeTextManager=
a;this.modelText=b;this.baseStyle=c;this.libboxfish=d;this.parentWebGlRenderingText=e;this.__RenderingText__=0;this.op=null;this.isAttachedToComponent=!1}log(){}getLibboxfishText(){null==this._libboxfishText&&(null==this.parentWebGlRenderingText?this._libboxfishText=this.libboxfish.getWebGlModelManager().createRenderingText(this.modelText,this.getBaseStyle()):(this.parentWebGlRenderingText.getLibboxfishText(),this.parentWebGlRenderingText.isAttachedToComponent?this._libboxfishText=this.parentWebGlRenderingText._libboxfishText.copy():
(this._libboxfishText=this.parentWebGlRenderingText._libboxfishText,this.parentWebGlRenderingText._libboxfishText=null,this.freeTextManager.unregister(this.parentWebGlRenderingText)),null!=this.op&&this.op(this._libboxfishText)),this.isAttachedToComponent||this.freeTextManager.register(this));return this._libboxfishText}update(a){const b=new ea.WebGlRenderingText(this.freeTextManager,this.modelText,this.baseStyle,this.libboxfish,this);a(b);return b}createRenderModel(){const a=this.getLibboxfishText().getShapedText();
return this.libboxfish.getWebGlModelManager().createTextModel(a)}attachToComponent(){if(this.isAttachedToComponent)return(new ea.WebGlRenderingText(this.freeTextManager,this.modelText,this.baseStyle,this.libboxfish,null)).attachToComponent();this.freeTextManager.unregister(this);this.isAttachedToComponent=!0;return this}detachedFromComponent(){this.isAttachedToComponent=!1;null!=this._libboxfishText&&this.freeTextManager.register(this)}deleteLibboxfishText(){null!=this._libboxfishText&&(this._libboxfishText.delete(),
this._libboxfishText=null)}getText(){return this.modelText}setBaseStyle(a){return this.update((b)=>{b.baseStyle=a;b.op=(b)=>{this.log("setBaseStyle",a);b.setBaseStyle(a)}})}getBaseStyle(){return this.baseStyle}getLayoutBoundsForRange(a,b){return this.getLibboxfishText().getBounds(a,b).map((a)=>k.Geometry.rectangleFromData({width:a.width,height:a.height,x:a.x,y:a.y}))}setWrapWidth(a){return this.update((b)=>{b.modelText=b.modelText.setWrapWidth(a);b.op=(b)=>{this.log("setWrapWidth",a);0===a?b.setWrapWidth(-1):
b.setWrapWidth(a)}})}getLayoutBounds(){let a;a=0<=this.modelText.getWrapWidth()?this.modelText.getWrapWidth():this.getLibboxfishText().getWidestLineFullWidth();const b=this.getLibboxfishText().getHeight();return k.Geometry.rectangleFromData({x:-(a/2),y:-(b/2),width:a+0,height:b+0})}getRawText(){return this.modelText.getRawText()}getLength(){return this.modelText.getLength()}applyStyles(a,b,c,d){return this.update((e)=>{e.modelText=e.modelText.applyStyles(a,b,c,d);e.op=(e)=>{this.log("applyStyles",
a,b,c,d);e.applyStyles(a,b,c,d)}})}getLineMetrics(a){a=this.getLibboxfishText().getLineMetrics(a);return{length:a.length,width:a.width,fullWidth:a.fullWidth,left:a.left,right:a.right,ascent:a.ascent,descent:a.descent,lineGap:a.lineGap,height:a.height}}resetStyles(a,b){return this.update((c)=>{c.modelText=c.modelText.resetStyles(a,b);c.op=(c)=>{this.log("resetStyles",a,b);c.resetStyles(a,b)}})}getAlignment(a,b){return this.modelText.getAlignment(a,b)}getIndent(a,b){return this.modelText.getIndent(a,
b)}setAlignment(a,b,c){return this.update((d)=>{d.modelText=d.modelText.setAlignment(a,b,c);d.op=(d)=>{this.log("setAlignment",a,b,c);d.setAlignment(a,b,c)}})}setIndent(a,b,c){return this.update((d)=>{d.modelText=d.modelText.setIndent(a,b,c);d.op=(d)=>{this.log("setIndent",a,b,c);d.setIndent(a,b,c)}})}getListType(a,b){return this.modelText.getListType(a,b)}setListType(a,b,c){return this.update((d)=>{d.modelText=d.modelText.setListType(a,b,c);d.op=(d)=>{this.log("setListType",a,b,c);d.setListType(a,
b,c)}})}getParagraphs(){return this.modelText.getParagraphs()}getParagraphStartOffset(a){return this.modelText.getParagraphStartOffset(a)}insertText(a,b){return this.update((c)=>{c.modelText=c.modelText.insertText(a,b);c.op=(c)=>{this.log("insertText",a,b);c.insertText(a,b)}})}getLayoutWidth(){return this.getLibboxfishText().getWidth()}getParagraph(a){return this.modelText.getParagraph(a)}getCharacterStylesAt(a){return this.modelText.getCharacterStylesAt(a)}getLayoutHeight(){return this.getLibboxfishText().getHeight()}getLineCount(){return this.getLibboxfishText().getLineCount()}deleteText(a,
b){return this.update((c)=>{c.modelText=c.modelText.deleteText(a,b);c.op=(c)=>{this.log("deleteText",a,b);c.deleteText(a,b)}})}getParagraphIndexesBetween(a,b){return this.modelText.getParagraphIndexesBetween(a,b)}locate(a,b){return this.modelText.locate(a,b)}getWordBoundaryToLeft(a,b){return this.getWordBoundaryInternal(this.modelText.getRawText(),a,-1,b)}getWordBoundaryToRight(a){return this.getWordBoundaryInternal(this.modelText.getRawText(),a,1,!0)}locatePosition(a,b){a=this.getLibboxfishText().locatePosition(a,
b);return{x:a.x,y:a.y}}getLineNumberAt(a,b){return this.getLibboxfishText().getLineNumberAt(a,b)}getLineAt(a,b){return this.getLibboxfishText().getLineAt(a,b)}getParagraphCount(){return this.modelText.getParagraphCount()}replaceText(a,b,c){return this.update((d)=>{d.modelText=d.modelText.replaceText(a,b,c);d.op=(d)=>{this.log("replaceText",a,b,c);d.replaceText(a,b,c)}})}getParagraphBoundaryToLeft(a){return this.getParagraphBoundaryInternal(this.modelText.getRawText(),a,-1)}getParagraphBoundaryToRight(a){return this.getParagraphBoundaryInternal(this.modelText.getRawText(),
a,1)}locateCaretOffset(a){a=this.getLibboxfishText().locateCaretOffset(a);return{offset:a.offset,endOfLine:a.endOfLine}}insertTextWithStyle(a,b,c){return this.update((d)=>{d.modelText=d.modelText.insertTextWithStyle(a,b,c);d.op=(d)=>{this.log("insertTextWithStyle",a,b,c);d.insertTextWithStyle(a,b,c)}})}replaceTextWithStyle(a,b,c,d){return this.update((e)=>{e.modelText=e.modelText.replaceTextWithStyle(a,b,c,d);e.op=(e)=>{this.log("replaceTextWithStyle",a,b,c,d);e.replaceTextWithStyle(a,b,c,d)}})}getWrapWidth(){return this.modelText.getWrapWidth()}getMinWrapWidth(){let a=
this.getLibboxfishText().copy();a.deleteText(0,this.getLength());a.insertText(0,"W");const b=a.getWidestLineFullWidth();a.delete();return b}getLineStart(a){return this.getLibboxfishText().getLineStart(a)}getParagraphBoundaryInternal(a,b,c){-1===c&&b--;let d=this.isParagraphChar(a,b);for(;0<=b&&b<a.length;){const e=this.isParagraphChar(a,b);if(d&&!e){-1===c&&b++;break}d=e;b+=c}return 0>b?0:b}isParagraphChar(a,b){return 0>b||b>=a.length?!1:"\n"!==a.charAt(b)}getWordBoundaryInternal(a,b,c,d){d&&-1===
c&&b--;let e=this.isALetter(a,b);for(;0<=b&&b<a.length;){let f=this.isALetter(a,b);if(e&&!f||!d&&!e&&f){-1===c&&b++;break}e=f;b+=c}return 0>b?0:b}breakClass(a){let b=0,c=A.LineBreakData.BREAK_RANGE_ENDS.length;for(;b<c;){let d=b+c>>1,e=A.LineBreakData.BREAK_RANGE_ENDS[d];if((0===d?0:A.LineBreakData.BREAK_RANGE_ENDS[d-1]+1)>a)c=d;else if(e<a)b=d+1;else return A.LineBreakData.BREAK_RANGE_CLASSES[d]}return A.LineBreakData.XX}isALetter(a,b){if(0>b||b>=a.length)return!1;switch(this.breakClass(a.charCodeAt(b))){case A.LineBreakData.AL:case A.LineBreakData.ID:case A.LineBreakData.NU:case A.LineBreakData.WJ:case A.LineBreakData.HL:case A.LineBreakData.JL:case A.LineBreakData.JV:case A.LineBreakData.JT:case A.LineBreakData.PC:return!0;
default:return!1}}getClippingBounds(){const a=this.getLibboxfishText().getBoundingRectangleWithExtents();return k.Geometry.rectangleFromData({x:a.x-this.getLayoutWidth()/2,y:a.y-this.getLayoutHeight()/2,width:a.width,height:a.height})}};var qb={};Object.defineProperty(qb,"__esModule",{value:!0});qb.WebGlRenderingTextManager=class{constructor(){this.reset()}reset(){this.unboundRenderingTexts=new Set}register(a){this.unboundRenderingTexts.add(a)}unregister(a){this.unboundRenderingTexts.delete(a)}cleanup(){for(const a of this.unboundRenderingTexts)a.deleteLibboxfishText();
this.reset()}};var C={},Ab=this&&C.__awaiter||function(a,b,c,d){function e(a){return a instanceof c?a:new c(function(b){b(a)})}return new (c||(c=Promise))(function(c,h){function f(a){try{k(d.next(a))}catch(y){h(y)}}function g(a){try{k(d["throw"](a))}catch(y){h(y)}}function k(a){a.done?c(a.value):e(a.value).then(f,g)}k((d=d.apply(a,b||[])).next())})};Object.defineProperty(C,"__esModule",{value:!0});const rb=(a)=>{a=a.getComponent(n.CetRendererInternal.getVisibilityComponentKey());return a.isVisible()?
a.getAlpha():0};var X;(function(a){a[a.Overview=0]="Overview";a[a.Quadtree=1]="Quadtree";a[a.ZObject=2]="ZObject"})(X||(X={}));C.LcEntityComponent=class extends U.BaseComponentKludge{constructor(a,b,c){super();this.lcEntities=a;this.version=b;this.sceneWrapper=c}dispose(){this.lcEntities.forEach((a)=>{this.sceneWrapper.deleteLcEntity(a)});this.lcEntities=[]}};class Bb{constructor(a){this.lcEntityComponents=a}disposeComponents(){for(const a of this.lcEntityComponents)a.dispose()}}C.WebGlChannel=class{constructor(a,
b,c,d){this.name=a;this.zObjectScene=b;this.backgroundScene=c;this.logoScene=d}getName(){return this.name}invalidate(){this.invalidEntities=null;this.backgroundScene.invalidate();this.zObjectScene.invalidate();this.logoScene.invalidate()}setInteractive(a){this.backgroundScene.setInteractive(a);this.zObjectScene.setInteractive(a);this.logoScene.setInteractive(a)}};C.UrlResolver=class{constructor(a){this.urlRewriter=a}getResolvedUrl(a){a=this.urlRewriter.rewriteUrl(a);return M.UrlHelpers.resolveUrl(a)}};
C.WebGlBaseRenderer=class extends K.BaseRenderer{constructor(a,b,c,d,e,f){super(a,c);this.assetManager=b;this.isCaptureTasksPossible=d;this.isCaptureTasksPreferred=e;this.hitCache=this.mipmapServiceClient=this.libboxfishAssetManager=this.libboxfish=null;this.captureTaskForTestCount=this.captureTaskCount=0;this.runSampleTasks=!1;this.sampleTasks=[];this.cameraRenderPort=this.cameraPlayer=this.lastHitTestTime=null;this.cameraActive=!1;this.window=null;this.textManager=new qb.WebGlRenderingTextManager;
this.renderingTextFactory=new ea.WebGlRenderingTextFactory(this.textManager);f.onValue((a)=>this.isGridEnabled=a)}createChannel(a,b){return this.libboxfish.createWebGlChannel(a,b)}getAssetManager(){return this.renderingAssetManager}renderChannel(a,b,c){let d=!0;b.clearFramebuffer();a.renderParams.showBackground&&(d=this.renderBackground(b,a,c));a.zObjectScene.render(b,c)||(d=!1);a.logoScene.render(b,c)||(d=!1);return d}addCaptureTaskI(a,b,c,d,e){return new Promise((f)=>{this.captureTaskCount++;d&&
this.captureTaskForTestCount++;let h=!1;this.libboxfish.getRendererInterface().addCaptureTask(a.width,a.height,a,(a)=>{if(!this.isCaptureTasksPossible()||0===this.captureTaskForTestCount&&!this.isCaptureTasksPreferred())return 1;if(b){let d=this.libboxfish.getRendererInterface().isAnimationEnabled();this.libboxfish.getRendererInterface().setAnimationEnabled(!1);a=this.renderChannel(b,a,c);this.libboxfish.getRendererInterface().setAnimationEnabled(d);if(!a&&c){if(e())return 1;h=!0}}return 0},(a,b)=>
{d&&this.captureTaskForTestCount--;this.captureTaskCount--;b&&f({wasCancelled:h})},!0)})}renderBackground(a,b,c){const d=b.renderParams.backgroundVideo;if(null!=d&&null!=d.source)this.cameraActive||(null==this.cameraPlayer&&(this.cameraPlayer=this.libboxfish.createVideoPlayer()),"string"===typeof d.source?this.cameraPlayer.load(d.source):this.cameraPlayer.openStream(d.source),this.cameraRenderPort=this.libboxfish.createVideoRenderPort("_videoCamera"),this.cameraPlayer.play(),this.cameraActive=!0),
this.renderVideoBackground(a,b.renderParams,b.viewport);else if(d&&!d.source&&this.cameraActive&&(this.cameraRenderPort.delete(),this.cameraRenderPort=null,this.cameraPlayer.closeStream(),this.cameraActive=!1),!b.backgroundScene.render(a,c))return!1;return!0}setHitCache(a){this.hitCache=a}isReady(){return null!=this.libboxfish&&null!=this.renderingSurface}drawEntities(a,b,c,d){this.renderTask.channel=a;const e=this.getFullyRenderableInfo().notFullyRenderableMain;this.drawEntitiesI(a,b,c,rb,d,!0,e);
return 0===e.size}drawEntitiesI(a,b,c,d,e,f,h){if(!this.isReady())return new Bb([]);this.handleSceneOrParamsChange(a,b,e);a.document=b;a.renderParams={showObjectIds:e.showObjectIds,showQuadtreeBounds:e.showQuadtreeBounds,showSurroundings:e.showSurroundings,camera:e.camera.getSnapshot(),aspectRatioClip:e.aspectRatioClip,backgroundVideo:e.backgroundVideo,showBackground:e.showBackground,showDecoration:e.showDecoration,showGrid:e.showGrid};let m=[];null==a.invalidEntities?c.forEachEntities((a)=>{a.hasComponent(n.CetRendererInternal.getDrawComponentKey())&&
m.push(a)}):m=[...a.invalidEntities.keys()].map((a)=>c.getEntityById(a)).filter((a)=>null!=a);a.invalidEntities=new Set;var l=this.drawBackground(a.backgroundScene,b,m);e=e.camera.getStageArea();var {cameraTransform:p,viewport:q,marginCorrectedViewport:r}=this.getCameraTransformAndViewport(a,e);a.backgroundScene.setViewDef(q,p);a.zObjectScene.setViewDef(q,p);e=k.Geometry.transform2dFromRad({x:0,y:0},1,0);a.logoScene.setViewDef(r,e);a.viewport=q;const t=new Set(h);e=(a,b,c)=>{t.delete(a);b?h.delete(a):
c&&(h.delete(a),h.add(a))};for(const [a,b]of l.isFullyRenderableMap)e(a,b,!0);l=[];for(const b of m.filter((a)=>!a.isDef(g.CetModel.ID.BACKGROUND_LAYER))){const c=b.getComponent(n.CetRendererInternal.getDrawComponentKey());if(null==c)continue;let h=b.isDef(g.CetModel.ID.LOGO)||b.isDef(g.CetModel.ID.NEXT_LOGO_V1)?a.logoScene:a.zObjectScene;const {isFullyRenderable:k,isVisible:m,lcEntityComponent:p}=this.drawEntity(a.renderParams,d,h,c,b,f);l.push(p);e(b.getId(),k,m)}a.renderParams.showQuadtreeBounds&&
(b=this.createQuadtreeBounds(b,this.renderingSurface).createEntity(a.zObjectScene),a.zObjectScene.setDepth(b,this.getBaseDepth(X.Quadtree)),b.setAlpha(1),b.setTransformComponents({x:0,y:0},{x:1,y:1},0),a.zObjectScene.setQuadtreeBounds(b));a.zObjectScene.setGridDesc(a.renderParams.showGrid&&this.isGridEnabled?n.CetRendererInternal.gridDesc:null);this.textManager.cleanup();for(const a of t)null==c.getEntityById(a)&&h.delete(a);return new Bb(l)}drawBackground(a,b,c){const d=new Map;b=b.getBackground();
a.setFill(b);a.setBackgroundAlpha(null==b?1:rb(b.getEntity()));if(!a.hasLayers()||c.some((a)=>this.underBackground(a))){a.clearLayers();if(null==b)return{isFullyRenderableMap:d};const e=[];b.getLayers().forEach((b)=>{const c=b.getEntity(),f=c.getComponent(n.CetRendererInternal.getDrawComponentKey());var g=this.getRenderingShapes(c,f,this.renderingSurface);if(null!=g)for(let d of g.getShapes()){g=d;const f=g.createEntity(a);this.setComponentsOnLcEntity(c,g,f);e.push({entity:f,transform:this.calcLcEntityTransform(c,
g),depth:b.getDepth(),fadeScale:b.getFadeScale()})}d.set(c.getId(),f.isFullyRenderable(c))});c=b.getLayerType();a.initLayers(e,c===g.BackgroundLayerType.AllLayersFullAlpha?this.libboxfish.BackgroundLayerFadeMode.NOFADE:c===g.BackgroundLayerType.FadeBetweenTransparentLayers?this.libboxfish.BackgroundLayerFadeMode.TRANSPARENTFADE:c===g.BackgroundLayerType.Opaque?this.libboxfish.BackgroundLayerFadeMode.OPAQUEFADE:this.libboxfish.BackgroundLayerFadeMode.UNKNOWN)}return{isFullyRenderableMap:d}}entityAlpha(a,
b,c){if(null!=a.backgroundVideo&&null!=a.backgroundVideo.source&&b.isDef(g.CetModel.ID.BACKGROUND_IMAGE))return 0;a=b.getComponent(n.CetRendererInternal.getDrawComponentKey());return a.hasError()||a.isDisposed()?0:c(b)}getLcEntityComponent(a,b,c){a=a.getComponent(n.CetRendererInternal.getLcEntityKey());return null==a||a.version!==b.getVersion()||a.sceneWrapper!==c?null:a}drawEntity(a,b,c,d,e,f){var g;b=this.entityAlpha(a,e,b);var k=this.getRenderingShapesWithTsto(d,e,a),l=null;if(null!=k){l=f?this.getLcEntityComponent(e,
k,c):null;null==l&&(l=k.getShapes().map((a)=>a.createEntity(c)),l=new C.LcEntityComponent(l,k.getVersion(),c),f&&e.setComponent(n.CetRendererInternal.getLcEntityKey(),l));f=0;for(const d of k.getShapes()){k=d;const h=l.lcEntities[f],m=100*this.getDepth(e)+f;f++;c.setDepth(h,m);!a.showDecoration&&d.isDecoration?h.setAlpha(0):h.setAlpha(b*(null!==(g=d.alpha)&&void 0!==g?g:1));this.setComponentsOnLcEntity(e,k,h)}}return{isFullyRenderable:d.isFullyRenderable(e),isVisible:0!==b,lcEntityComponent:l}}getRenderingShapesWithTsto(a,
b,c){let d=this.getRenderingShapes(b,a,this.renderingSurface);c.showObjectIds&&this.shouldShowObjectId(b)&&(c=C.WebGlRenderer.keyShowObjectIds,a=this.getRenderingShapeCache(b,a),(null==a.get(c)||d.getVersion()>a.get(c).getVersion())&&a.set(c,new K.RenderingShapes(d.getShapes().concat(this.createRenderingShapesForShowObjectId(b)))),d=a.get(c));return d}getImageDataForTest(a,b,c,d){return Ab(this,void 0,void 0,function*(){const e=document.createElement("canvas");var f=this.getDevicePixelRatio();e.width=
Math.round(this.canvas.width/f);e.height=Math.round(this.canvas.height/f);f=this.renderTask.channel.renderParams;var g=f.aspectRatioClip?f.camera.getMarginCorrectedViewport():null;f=g?g.getLeft()+e.width/2:0;const k=g?g.getTop()+e.height/2:0,l=g?g.getWidth():e.width;g=g?g.getHeight():e.height;yield this.addCaptureTaskI(e,this.renderTask.channel,!0,!0,()=>!0);var n=document.createElement("canvas");n.width=e.width;n.height=e.height;n=n.getContext("2d");n.drawImage(e,f,k,l,g,f,k,l,g);return n.getImageData(a,
b,c,d)})}getSnapshotImageData(a,b,c,d,e,f,g,k){return Ab(this,void 0,void 0,function*(){const h=document.createElement("canvas");h.id=v.Utils.generateUUID();h.width=a.width;h.height=a.height;b.invalidate();const l=this.drawEntitiesI(b,c,d,null!==e&&void 0!==e?e:rb,g,!1,this.getFullyRenderableInfo().notFullyRenderableOthers),{wasCancelled:m}=yield this.addCaptureTaskI(h,b,f,!1,k);l.disposeComponents();return{canvas:h,wasCancelled:m}})}drawSample(a,b){return new Promise((c)=>{this.sampleTasks.push({canvas:a,
screenRectData:b,resolve:c});this.requestRedraw()})}getDevicePixelRatio(){return window.devicePixelRatio||1}createQuadtreeBounds(a,b){a=a.getEntity().get(n.CetRendererInternal.getQuadTreeComponentKey());if(null==a)return null;b=b.createPath(null,b.createLineStyle(b.createSolidGradient(k.Geometry.colorFromRGBString("#ffff00")),0));for(let d=a.getIds();d.hasNext();){var c=d.next();c=a.queryId(c);c=k.Geometry.obbFromRect(c.getData()).getVertices();b.moveTo(c[0].x,c[0].y);b.lineTo(c[1].x,c[1].y);b.lineTo(c[2].x,
c[2].y);b.lineTo(c[3].x,c[3].y);b.lineTo(c[0].x,c[0].y)}return b}createRenderingShapesForShowObjectId(a){const b=this.getLocalBounds(a),c=(c,e,f)=>{f=this.getRenderingTextFactory().createDefaultBaseStyle().setColor(Y.TextModel.createColor(f)).setFontSize(10);return new za.WebGlTextRenderingShape(this.getRenderingTextFactory().create(Y.TextModel.createEmptyText(0).insertText(0,a.tsto(!1)),f),k.Geometry.createTranslation(c,e-b.height/2))};return[c(-.25,-.25,16777215),c(.25,-.25,16777215),c(-.25,.25,
16777215),c(.25,.25,16777215),c(0,0,0)]}getRenderingTextFactory(){return this.renderingTextFactory}getInvalidator(){return this}getTriggerKeys(){return[...this.renderingShapeCacheInvalidatorKeys,n.CetRendererInternal.getShapeCacheKey(),n.CetRendererInternal.getZOrderComponentKey(),n.CetRendererInternal.getVisibilityComponentKey(),g.CetModel.ID.TRANSFORMED.LOCAL_TO_WORLD,g.CetModel.ID.BACKGROUND_LAYER.DEPTH]}invalidate(a,b){null!=a.invalidEntities&&a.invalidEntities.add(b)}getBaseDepth(a,b=0){switch(a){case X.ZObject:return 1E6*
(b+1);case X.Overview:return 1E7;case X.Quadtree:return 2E7;default:throw Error("unknown layer kind");}}getDepth(a){if(a.isDef(g.CetModel.ID.OVERVIEW))return this.getBaseDepth(X.Overview);a=a.getComponent(n.CetRendererInternal.getZOrderComponentKey());return null!=a?this.getBaseDepth(X.ZObject,a.getZLayer())+a.getZIndex():0}handleSceneOrParamsChange(a,b,c){a.document===b&&a.renderParams.showObjectIds===c.showObjectIds&&a.renderParams.showQuadtreeBounds===c.showQuadtreeBounds&&a.renderParams.showSurroundings===
c.showSurroundings||a.invalidate()}pixelHitTest(a,b,c,d,e,f){if(!this.isReady())return!1;null!=this.lastHitTestTime&&100<performance.now()-this.lastHitTestTime&&(this.lastHitTestTime=null);null!=this.lastHitTestTime||null!=this.hitCache&&this.hitCache.entityId===d.getId()&&this.hitCache.localX===b&&this.hitCache.localY===c&&this.hitCache.surroundingSquareSizeLocal===a||(this.lastHitTestTime=performance.now(),e=this.getRenderingShapes(d,f,this.renderingSurface).getShapes().some((d)=>d instanceof da.WebGlPathRenderingShape?
d.ensureCachedTarget(this.geometryHitTest).hitTestLocal({x:b,y:c},a/2):!1),this.setHitCache({entityId:d.getId(),localX:b,localY:c,surroundingSquareSizeLocal:a,result:e}));return this.hitCache.result}getHitTest(){return new ib.WebGlHitTest(this)}runRenderTask(){if(!this.isEnabled)return!0;const a=this.renderTask;if(!a||!a.channel||a.beforeRender&&!a.beforeRender())return!0;const b=this.renderChannel(a.channel,a.renderContext,a.needHighQuality);a.afterRender&&a.afterRender(b);this.runSampleTasks=!0;
return b}getCameraTransformAndViewport(a,b){var c=b.getWidth();const d=b.getHeight();b={x:0,y:0,width:c,height:d};var e=a.renderParams.aspectRatioClip&&!a.renderParams.showSurroundings?a.renderParams.camera.getMarginCorrectedViewport():null;null!=e&&(b={x:e.getLeft()+c/2,y:e.getTop()+d/2,width:e.getWidth(),height:e.getHeight()});const f=a.renderParams.camera.getTransform(),g=k.Geometry.createIdentity();g.scale(f.getScale());g.rotate(f.getRotationRad());g.translate(-f.getTranslation().x,-f.getTranslation().y);
null!=e&&(e=e.getCenter(),g.translate(e.x,e.y));a.renderParams.showSurroundings&&g.scale(.25);a=a.renderParams.camera.getMarginCorrectedViewport();c={x:a.getLeft()+c/2,y:a.getTop()+d/2,width:a.getWidth(),height:a.getHeight()};return{cameraTransform:g.toInverseOrderTransform(),viewport:b,marginCorrectedViewport:c}}renderVideoBackground(a,b,c){if(this.cameraPlayer.isLoaded()){var d=b.backgroundVideo,e=this.cameraPlayer?this.cameraPlayer.getVideoWidth():0,f=this.cameraPlayer?this.cameraPlayer.getVideoHeight():
0,g=Math.abs(d.width),k=Math.abs(d.height),l=Math.sign(d.width),n=Math.sign(d.height),p=Math.min(g/e,k/f);e*=p;f*=p;g=d.left+(g-e)/2*l;p=d.top+(k-f)/2*n;var q=b.camera.getMarginCorrectedViewport().getData();b=Math.min(q.width/1600,q.height/900);k=q.x+c.width/2+g*b;c=q.y+c.height/2+p*b;e*=b;f*=b;d.live&&this.cameraPlayer.update(this.cameraRenderPort);a.drawVideoImage(this.cameraRenderPort.getVideoImage(),k,c,l*e,n*f,{x:d.texOffsetX,y:d.texOffsetY},{x:d.texScaleX,y:d.texScaleY})}}underBackground(a){for(;null!=
a;){if(a.isDef(g.CetModel.ID.BACKGROUND))return!0;a=a.getOwner()}return!1}setComponentsOnLcEntity(a,b,c){let d=this.calcLcEntityTransform(a,b);c.setTransform(d);this.setColorComponentOnLcEntity(a,b,c)}calcLcEntityTransform(a,b){a=null!=a.get(g.CetModel.ID.TRANSFORMED.LOCAL_TO_WORLD)?k.Geometry.createFromTransform(a.get(g.CetModel.ID.TRANSFORMED.LOCAL_TO_WORLD)):k.Geometry.createFromTransform(k.Geometry.transform2dFromRad({x:0,y:0},1,0));let c=b.getWebGlToLocalTransform();b=b.isFlipped()?-1:1;null!=
c&&(a=a.clone(),a.multiplyFromRight(c));return this.libboxfish.createTransform2D({x:a.getData().x,y:a.getData().y},{x:b*a.getScaleX(),y:a.getScaleY()},a.toTransform().getRotationRad())}setColorComponentOnLcEntity(a,b,c){a=a.isDef(g.CetModel.ID.HAS_COLOR_FILTER)?a.get(g.CetModel.ID.HAS_COLOR_FILTER.COLOR_FILTER):null;if(null!=a&&a.getObjectType()===ub.ColorFilterType.SOLID_COLOR_BLEND){b=a.getBlendColor();a=a.getBlendAlpha();b=b.getRGBData();let d=a/255;c.setColorTransform({offset:{x:b.r*d,y:b.g*d,
z:b.b*d,w:0},scale:{x:1-a,y:1-a,z:1-a,w:1}})}}};C.WebGlBaseRenderer.keyShowObjectIds="showObjectIds";C.WebGlRenderer=class extends C.WebGlBaseRenderer{constructor(a,b,c,d,e,f,g,k){super(a,b,c,e,f,g);this.isDesktop=d;this.isGridEnabledStream=g;this.assetLoadingBus=k;this.subRenderers=[];this.mipmapServiceUrl="https://prezi.com/api/";this.offscreenRenderContext=null;this.fullyRenderableInfo={notFullyRenderableMain:new Set,notFullyRenderableOthers:new Set};this.videoViewLog=[];this.libboxfishPromise=
new Promise((a)=>{this.libboxfishResolve=a});this.renderTask=null;this.urlResolver=new C.UrlResolver(b.getUrlRewriter());this.renderingAssetManager=new ya.WebGlRenderingAssetManagerImpl(this.libboxfishPromise.then((a)=>({libboxfish:a,assetManager:this.libboxfishAssetManager,tiledImageLoader:this.tiledImageLoader,pigImageLoader:this.pigImageLoader})),this.urlResolver,this.fullyRenderableInfo);this.initLibboxfish()}getIsReady(){return this.libboxfishPromise.then(()=>{})}initLibboxfish(){M.LibboxfishModule.createLibboxfishAsync(this.canvas,
this.isDesktop,this.assetLoadingBus,this.urlResolver,this.videoViewLog,(a)=>{const b=!S.isActive("js-webgl-disable-mipmap-service"),c=S.isActive("js-disable-download-retry")?0:10;a.createAndRunApplication(this.isDesktop,b,{onApplicationStart:(d)=>{this.libboxfish=a;this.window=d;this.libboxfishAssetManager=a.getAssetManager();this.libboxfishAssetManager.setMaximumRetryCount(c);this.tiledImageLoader=a.getTiledImageLoader();this.pigImageLoader=a.getPIGImageLoader();b&&(this.mipmapServiceClient=a.getMipmapServiceClient(),
this.mipmapServiceClient.setServiceUrl(this.mipmapServiceUrl));this.renderingSurface=new pb.WebGlRenderingSurface(a);this.renderingTextFactory.init(a);this.geometryHitTest=this.libboxfish.createGeometryHitTest();this.renderTask={channel:null,needHighQuality:!1,renderContext:null};this.libboxfishResolve(a);return this.renderedInHighQuality=!0},onApplicationQuit:()=>{},update:()=>{if(this.renderTask&&this.renderTask.channel){var a=this.renderTask.channel;const b=null!=this.renderTask.channel.renderParams.backgroundVideo&&
null!=this.renderTask.channel.renderParams.backgroundVideo.source&&this.renderTask.channel.renderParams.backgroundVideo.live,c=a.backgroundScene&&a.backgroundScene.needsRender(),d=a.zObjectScene&&a.zObjectScene.needsRender();a=a.logoScene&&a.logoScene.needsRender();(b||!this.renderedInHighQuality||c||d||a)&&this.requestRedraw()}},renderToWindow:(a)=>{this.renderTask.renderContext=a;this.renderedInHighQuality=this.runRenderTask()},renderOffscreen:()=>{this.subRenderers.forEach((a)=>{a.needsRedraw&&
a.runRenderTask()})},postRender:()=>{if(0<this.sampleTasks.length&&this.runSampleTasks){for(const a of this.sampleTasks){const b=a.canvas,c=a.screenRectData,d=this.getDevicePixelRatio();b.getContext("2d").drawImage(this.canvas,c.x*d,c.y*d,c.width*d,c.height*d,0,0,b.width,b.height);a.resolve()}this.sampleTasks=[];this.runSampleTasks=!1}},onRendererReset:()=>{}})})}createSubRenderer(a){a=new C.WebGlSubRenderer(a,this.renderingAssetManager,this.libboxfish,this.assetManager,this.renderingShapeCacheInvalidatorKeys,
this.libboxfishAssetManager,this.renderingSurface,this.geometryHitTest,this,this.isCaptureTasksPossible,this.isCaptureTasksPreferred,this.isGridEnabledStream);this.subRenderers.push(a);return a}_removeSubRenderer(a){this.subRenderers=this.subRenderers.filter((b)=>b!==a)}getOffscreenContext(a,b){const c=this.libboxfish.getRendererInterface();null!==this.offscreenRenderContext&&(this.offscreenRenderContext.getWidth()<a||this.offscreenRenderContext.getHeight()<b)&&(c.deleteOffscreenContext(this.offscreenRenderContext),
this.offscreenRenderContext=null);null===this.offscreenRenderContext&&(this.offscreenRenderContext=c.createOffscreenContext(a,b,!0));return this.offscreenRenderContext}getFullyRenderableInfo(){return this.fullyRenderableInfo}drawEntities(a,b,c,d){this.requestRedraw();return super.drawEntities(a,b,c,d)}requestRedraw(){this.window.setNeedsRedraw(!0)}getVideoViewLogForTest(){return this.videoViewLog}};C.WebGlSubRenderer=class extends C.WebGlBaseRenderer{constructor(a,b,c,d,e,f,g,k,l,n,p,q){super(a,d,
e,n,p,q);this.parentRenderer=l;this.needsRedraw=!1;this.renderingAssetManager=b;this.libboxfish=c;this.libboxfishAssetManager=f;this.renderingSurface=g;this.geometryHitTest=k;this.renderingTextFactory.init(c);if(null!=a){var h=a.width,m=a.height;const b=l.getOffscreenContext(a.width,a.height);this.renderTask={channel:null,renderContext:b,needHighQuality:!1,afterRender:()=>{b.flush();b.copyToCanvas(a,0,0,h,m);this.needsRedraw=!1}}}}requestRedraw(){this.needsRedraw=!0}getIsReady(){return Promise.resolve()}isReady(){return this.parentRenderer.isReady()&&
super.isReady()}dispose(){this.libboxfish=null;this.parentRenderer._removeSubRenderer(this)}createSubRenderer(a){return this.parentRenderer.createSubRenderer(a)}getDevicePixelRatio(){return 1}getFullyRenderableInfo(){return this.parentRenderer.getFullyRenderableInfo()}getVideoViewLogForTest(){return this.parentRenderer.getVideoViewLogForTest()}};var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});Aa.ZOrderComponentImpl=class extends U.BaseComponentKludge{constructor(a=0,b){super();this.zIndex=
a;this.zLayer=null==b?l.LayerType.PdomLayer:b}getZIndex(){return this.zIndex}getZLayer(){return this.zLayer}createChildComponent(){let a=new Aa.ZOrderComponentImpl(this.zIndex,this.zLayer);a.setVersion(this.version);return a}};var sb={};Object.defineProperty(sb,"__esModule",{value:!0});sb.AnimatedImageDrawComponentImpl=class extends w.AbstractDrawComponent{constructor(){super();this.kind=l.DrawComponentKind.animatedImage;this.assetSize={width:1,height:1}}dispose(){this.isDisposed()||null==this.imageAsset||
(this.imageAsset.free(),this.imageAsset=null);super.dispose()}isReadyToRender(){return null!=this.imageAsset}calculateGraphicsBounds(){const a=r.BoundCalculation.clampMediaAssetDimensions(this.assetSize);return k.Geometry.rectangleFromData({x:-a.width/2,y:-a.height/2,width:a.width,height:a.height})}createRenderingShapes(a,b){return null==this.imageAsset?[]:[b.createAnimatedImage(this.imageAsset,this.calculateGraphicsBounds(a))]}setAssetSize(a){this.assetSize={width:a.width,height:a.height};this.incrementVersion()}setAsset(a){this.imageAsset=
a;this.setAssetSize(a)}};var tb={};Object.defineProperty(tb,"__esModule",{value:!0});const Cb={width:480,height:270};tb.OnCanvasVideoDrawComponentImpl=class extends D.ImageDrawComponentBase{constructor(){super(...arguments);this.kind=l.DrawComponentKind.onCanvasVideo}calculateGraphicsBounds(){const a=null==this.imageAsset?Cb:v.Utils.fit({width:this.imageAsset.width,height:this.imageAsset.height},Cb);return k.Geometry.rectangleFromData({x:.5*-a.width,y:.5*-a.height,width:a.width,height:a.height})}createRenderingShapes(a,
b){a=a.getWrapper(g.CetModel.ID.Z_VIDEO.W);const c=a.getOnlineAssetUrl();if(null==c)return[];this.videoPlayerShape=b.createVideoPlayerShape(a.getId(),c,this.imageAsset);return[this.videoPlayerShape]}onEvent(a){var b;null===(b=this.videoPlayerShape)||void 0===b?void 0:b.onEvent(a)}};var n={};Object.defineProperty(n,"__esModule",{value:!0});n.CetRendererImpl=class{constructor(){this.FORCE_NO_RETRY_FOR_TEST=!1;this.IMAGE_MASK_EDITING_STATE=this.INNER_BORDER_COLOR=this.BORDER_BACKGROUND_DECORATOR=this.LC_ENTITY=
this.TEXT_UNDERLINE=this.DASHED_DECORATOR=this.QUAD_TREE=this.DRAWING_DIMENSIONS=this.SHAPE_CACHE=this.DRAW=this.HIDE_PLACEHOLDER_ASSET=this.HIDE_DOM_FLAG=this.THUMBNAIL_IMAGE=this.PURE_TEXT_GRAPHIC_BOUNDS=null;this.alreadyLoggedExceptions={};this.gridDesc={maxDistance:16,maxCircleRadius:52/729*16,scalePoints:!0,color:{r:128,g:128,b:128,a:.45},top:!1,rotate:!1}}createRenderer(a,b,c,d,e,f,g,k,n){switch(a){case l.RendererKind.WebGl:return this.webGlRenderer=new C.WebGlRenderer(b,c,d,e,f,g,k,n);case l.RendererKind.Mock:return new E.MockRenderer(b,
c,d);case l.RendererKind.Headless:return new H.HeadlessRenderer(b,c,d,null);default:return v.Utils.assertNever(a,`Unknown RendererKind: ${a}`)}}createCanvas(a,b){return sa.CanvasFactory.create(a,b)}getLocalBoundsComponentKey(){return z.LocalBoundsComponent.KEY()}getLocalBoundsComponent(a,b=!1){a=a.getUntypedComponent(z.LocalBoundsComponent.KEY(),b);return null!=a?a:null}getMutableLocalBoundsComponent(a){a=a.getUntypedComponent(z.LocalBoundsComponent.KEY(),!0);return null!=a?a:null}setLocalBounds(a,
b,c){let d=this.getMutableLocalBoundsComponent(a);null==d&&(d=new z.LocalBoundsComponent,a.setUntypedComponent(z.LocalBoundsComponent.KEY(),d));d.setGraphicsBounds(b);null!=c&&d.setBoundingShape(c);return a}updateBounds(a){var b=a.getComponent(this.getDrawComponentKey());this.setLocalBounds(a,b.calculateGraphicsBounds(a));this.getMutableLocalBoundsComponent(a).setBoundingShape(b.calculateBoundingShape(a));g.CetModel.textKludge.isEntityText(a)&&(b=b.calculateZTextBounds(a),null==b?a.discardOwnComponent(this.getZTextBoundsKey()):
a.set(this.getZTextBoundsKey(),b))}createErrorDrawComponent(a){return new Ha.ErrorDrawComponent(a)}createEmptyDrawComponent(){return new Ga.EmptyDrawComponent}createZInvisibleFrameDrawComponent(){return new Ua.ZInvisibleFrameDrawComponent}createZZoomAreaDrawComponent(){return new cb.ZZoomAreaDrawComponent}createZTriangleDrawComponent(){return new bb.ZTriangleDrawComponent}createZRectangleFrameDrawComponent(){return new $a.ZRectangleFrameDrawComponent}createZRectangleDrawComponent(){return new aa.ZRectangleDrawComponent}createZCircleFrameDrawComponent(){return new Ta.ZCircleFrameDrawComponentImpl}createZOvalDrawComponent(){return new Xa.ZOvalDrawComponent}createZCircleDrawComponent(){return new Sa.ZCircleDrawComponentImpl}createZBracketFrameDrawComponent(){return new Ra.ZBracketFrameDrawComponent}createZPersistentGroupDrawComponent(a){return new Ya.ZPersistentGroupDrawComponent(a)}createOverViewFrameDrawComponent(){return new ta.OverviewFrameDrawComponent}createZArrowDrawComponent(){return new Qa.ZArrowDrawComponent}createZLineDrawComponent(){return new Va.ZLineDrawComponent}createZPlaceHolderDrawComponent(){return new Za.ZPlaceholderDrawComponent}createZMarkerPencilDrawComponent(){return new Wa.ZMarkerPencilDrawComponent}createZTextDrawComponent(a){return new ha.ZTextDrawComponent(a)}createVideoThumbnailDrawComponent(a,
b){return new Na.VideoThumbnailDrawComponentImpl(a,b)}createOnCanvasVideoDrawComponent(){return new tb.OnCanvasVideoDrawComponentImpl}createImageDrawComponent(){return new D.ImageDrawComponentImpl}createAnimatedImageDrawComponent(){return new sb.AnimatedImageDrawComponentImpl}createLogoDrawComponent(){return new D.LogoDrawComponentImpl}createNextLogoDrawComponent(){return new D.NextLogoDrawComponentImpl}createXvgDrawComponent(){return new La.XvgDrawComponentImpl}createArcRenderer(){return new Da.ArcDrawComponent}createInvisibleFrameRenderer(){return new Ja.InvisibleFrameDrawComponent}createZTopicContainerDrawComponent(){return new ab.ZTopicContainerDrawComponent}createRectangleRenderer(){return new G.RectangleDrawComponent}createTextHittestRectangleRenderer(){return new Ma.TextHittestRectangleDrawComponent}createAxRenderer(){return new Ea.AxDrawComponent}createLShapeRenderer(a,
b){return new Ka.LShapeDrawComponent(a,b)}createHollowRectangleRenderer(){return new Ia.HollowRectangleDrawComponent}createCircleRenderer(){return new Fa.CircleDrawComponent}getZTextBoundsKey(){null==this.PURE_TEXT_GRAPHIC_BOUNDS&&(this.PURE_TEXT_GRAPHIC_BOUNDS=g.CetModel.createValueComponentKey("pureTextGraphicBounds",!1,!1,!1));return this.PURE_TEXT_GRAPHIC_BOUNDS}getThumbnailImageKey(){null==this.THUMBNAIL_IMAGE&&(this.THUMBNAIL_IMAGE=g.CetModel.createValueComponentKey("THUMBNAIL_IMAGE",!0,!0,
!0));return this.THUMBNAIL_IMAGE}getHideDomComponentKey(){null==this.HIDE_DOM_FLAG&&(this.HIDE_DOM_FLAG=g.CetModel.createValueComponentKey("hideDom",!1,!1,!1));return this.HIDE_DOM_FLAG}getHidePlaceholderAssetKey(){null==this.HIDE_PLACEHOLDER_ASSET&&(this.HIDE_PLACEHOLDER_ASSET=g.CetModel.createValueComponentKey("hidePlaceholderAsset",!1,!1,!1));return this.HIDE_PLACEHOLDER_ASSET}getDrawComponentKey(){null==this.DRAW&&(this.DRAW=g.CetModel.createComponentKey("draw",!0,!0));return this.DRAW}CurvedLineCalculation(){return p.CurvedLineCalculationImpl.I}ArrowCalculation(){return N.ArrowCalculationImpl.I}collectStatistics(a){I.RenderingStatistics.collectStatistics(a)}getInEditFontSizeComponentKey(){null==
this.IN_EDIT_FONT_SIZE&&(this.IN_EDIT_FONT_SIZE=g.CetModel.createValueComponentKey("font-size",!1,!1,!0));return this.IN_EDIT_FONT_SIZE}getDashedDecoratorComponentKey(){null==this.DASHED_DECORATOR&&(this.DASHED_DECORATOR=g.CetModel.createValueComponentKey("dash-decorator",!1,!1,!1));return this.DASHED_DECORATOR}getTextUnderlineComponentKey(){null==this.TEXT_UNDERLINE&&(this.TEXT_UNDERLINE=g.CetModel.createValueComponentKey("text-underline",!1,!1,!0));return this.TEXT_UNDERLINE}getBorderBackgroundDecoratorKey(){null==
this.BORDER_BACKGROUND_DECORATOR&&(this.BORDER_BACKGROUND_DECORATOR=g.CetModel.createValueComponentKey("border-dash-decorator",!1,!1,!1));return this.BORDER_BACKGROUND_DECORATOR}getInnerBorderColorKey(){null==this.INNER_BORDER_COLOR&&(this.INNER_BORDER_COLOR=g.CetModel.createValueComponentKey("secondBorderColor",!1,!1,!1));return this.INNER_BORDER_COLOR}getArcComponentKey(){null==this.ARC_COMPONENT&&(this.ARC_COMPONENT=g.CetModel.createValueComponentKey("arcComponent",!1,!1));return this.ARC_COMPONENT}getVisibilityComponentKey(){null==
this.VISIBLITY_COMPONENT&&(this.VISIBLITY_COMPONENT=g.CetModel.createComponentKey("visibilityComponent",!1,!1,!0));return this.VISIBLITY_COMPONENT}getCommentVisibilityComponentKey(){null==this.COMMENT_VISIBILITY_COMPONENT&&(this.COMMENT_VISIBILITY_COMPONENT=g.CetModel.createComponentKey("commentVisibilityComponent",!1,!1,!1));return this.COMMENT_VISIBILITY_COMPONENT}getWorldGeometryComponentKey(){null==this.WORLD_GEOMETRY_COMPONENT&&(this.WORLD_GEOMETRY_COMPONENT=g.CetModel.createComponentKey("world",
!0,!1));return this.WORLD_GEOMETRY_COMPONENT}createWorldGeometryComponent(){return new ka.WorldGeometryComponent}updateWorldProperties(a){Ca.WorldGeometryCalculator.updateWorldProperties(a)}getZOrderComponentKey(){null==this.ZORDER&&(this.ZORDER=g.CetModel.createComponentKey("zorder",!0,!0));return this.ZORDER}getFadingComponentKey(){null==this.FADING&&(this.FADING=g.CetModel.createComponentKey("fading",!1,!1));return this.FADING}createSpeedMeter(a){return new x.SpeedMeterController(a)}getDrawingDimensionsKey(){null==
this.DRAWING_DIMENSIONS&&(this.DRAWING_DIMENSIONS=g.CetModel.createValueComponentKey("drawing-dimensions",!1,!1));return this.DRAWING_DIMENSIONS}getImageMaskEditingStateComponentKey(){null==this.IMAGE_MASK_EDITING_STATE&&(this.IMAGE_MASK_EDITING_STATE=g.CetModel.createValueComponentKey("image-mask-editing-state",!0,!0,!0));return this.IMAGE_MASK_EDITING_STATE}addPaddingToBounds(a,b){return r.BoundCalculation.addPaddingToBounds(a,b)}getBoundsComponentKeys(){return[...g.CetModel.ID.CIRCULAR.getFields(),
...g.CetModel.ID.CURVED_LINE.getFields(),...g.CetModel.ID.HAS_BORDER.getFields(),...g.CetModel.ID.HAS_FONT.getFields(),...g.CetModel.ID.HAS_PADDING.getFields(),...g.CetModel.ID.HAS_POINTS.getFields(),...g.CetModel.ID.HAS_RADIUS.getFields(),...g.CetModel.ID.HAS_THICKNESS.getFields(),...g.CetModel.ID.RECTANGULAR.getFields(),...g.CetModel.ID.TRANSFORMED_IMAGE.getFields(),...g.CetModel.ID.POSSIBLY_PLACEHOLDER.getFields(),l.CetRendererModule.getHidePlaceHolderTextKey(),g.CetModel.ID.Z_VIDEO.LETTERBOX_YOUTUBE_THUMBNAIL]}getIsStackComponentKey(){null==
this.IS_STACK&&(this.IS_STACK=g.CetModel.createValueComponentKey("is_stack",!1,!1));return this.IS_STACK}createZOrderComponent(a,b){return new Aa.ZOrderComponentImpl(a,null==b?l.LayerType.PdomLayer:b)}getShapeCacheKey(){null==this.SHAPE_CACHE&&(this.SHAPE_CACHE=g.CetModel.createComponentKey("ShapeCache",!0,!1));return this.SHAPE_CACHE}getLcEntityKey(){null==this.LC_ENTITY&&(this.LC_ENTITY=g.CetModel.createComponentKey("LC_ENTITY",!1,!1));return this.LC_ENTITY}getQuadTreeComponentKey(){null==this.QUAD_TREE&&
(this.QUAD_TREE=g.CetModel.createValueComponentKey("quadtree",!1,!1));return this.QUAD_TREE}getEntitiesToRender(a,b){let c=this.getBackgroundsInDepthOrder(b);c=c.concat(this.getZEntitiesToRender(a,b));a=b.getEntity().getChild(g.CetModel.ID.PREZI.OVERVIEW);null!=a&&c.push(a);return c}getEntityIdsToRender(a,b){return this.getEntitiesToRender(a,b).map((a)=>a.getId())}getZEntitiesToRender(a,b){b=b.getEntity().get(this.getQuadTreeComponentKey());a=null==b?[]:b.queryRectangle(a.getStageArea().transformAABB(k.Geometry.createFromTransform(a.getTransform()).invert()));
a=this.sortEntitiesInZOrder(a);return a.slice()}sortEntitiesInZOrder(a){return a.filter((a)=>{let b=a.getComponent(this.getVisibilityComponentKey());return null!=this.zOrder(a)&&null!=b&&b.isVisible()}).sort((a,c)=>l.CetRendererModule.getEntityOrder(c,a))}getEntityOrder(a,b){a=l.CetRendererModule.zOrder(a);b=l.CetRendererModule.zOrder(b);var c=l.CetRendererModule.calcLayerInt(a.getZLayer());c=l.CetRendererModule.calcLayerInt(b.getZLayer())-c;return 0!==c?c:b.getZIndex()-a.getZIndex()}calcLayerInt(a){return a===
l.LayerType.PdomLayer?0:a===l.LayerType.StoryLayer?1:a===l.LayerType.DecoratorLayer?2:a===l.LayerType.LogoLayer?3:0}getBackgroundsInDepthOrder(a){let b=[];a.getBackground().getLayers().forEach((a)=>{a=a.getEntity();let c=a.get(g.CetModel.ID.BACKGROUND_LAYER.DEPTH);for(let d=0,f=b.length;d<f;d++){let e=b[d].get(g.CetModel.ID.BACKGROUND_LAYER.DEPTH);if(c>=e){b.splice(d,0,a);return}}b.push(a)});return b}zOrder(a,b=!1){return(a=a.getComponent(this.getZOrderComponentKey(),b))?a:null}logMonitoringOncePerSession(a,
b,c,d,e,f,g=J.Level.ERROR){const h=b+c+d;if(!this.alreadyLoggedExceptions[h]){e={error:(e.stack?e.stack:e)+""};f&&(e.object_tsto=f);null!=b&&(e.object_id=b);b={action:d,object:c,trigger:"machine",payload:e};switch(g){case J.Level.ERROR:a.error(b);break;case J.Level.WARN:a.warn(b);break;case J.Level.INFO:a.info(b);break;default:throw Error(`unhandled log-level:${g}`);}this.alreadyLoggedExceptions[h]=!0}}getLocalToWorld(a){return Z.TransformCalculation.getLocalToWorld(a)}calculateWorldZoomObb_killme(a){return r.BoundCalculation.calculateWorldZoomObb_killme(a)}calculateWorldZoomObb_wrapChildrenNoBaseline(a){return r.BoundCalculation.calculateWorldZoomObb_wrapChildrenNoBaseline(a)}getIsLoadedComponentKey(){null==
this.IS_LOADED&&(this.IS_LOADED=g.CetModel.createValueComponentKey("is-loaded",!0,!0));return this.IS_LOADED}getHidePlaceHolderTextKey(){null==this.HIDE_PLACEHOLDER_TEXT&&(this.HIDE_PLACEHOLDER_TEXT=g.CetModel.createValueComponentKey("HIDE_PLACEHOLDER_TEXT",!1,!0,!0));return this.HIDE_PLACEHOLDER_TEXT}isLoaded(a){return a.get(this.getIsLoadedComponentKey())}setLoaded(a,b){a.set(this.getIsLoadedComponentKey(),b)}isLoadedComponentVersion(a){a=a.getComponent(this.getIsLoadedComponentKey());return null==
a?0:a.getVersion()}hidePlaceHolderTextKeyVersion(a){a=a.getComponent(this.getHidePlaceHolderTextKey());return null==a?0:a.getVersion()}preloadTextModulesForMockRenderer(){return E.MockRenderer.preloadTextModules()}tranformMaskRectangle(a,b,c){return r.BoundCalculation.tranformMaskRectangle(a,b,c)}freeAsset(a){a.free()}};n.CetRendererInternal=new n.CetRendererImpl;var l={};Object.defineProperty(l,"__esModule",{value:!0});(function(a){a[a.WebGl=0]="WebGl";a[a.Headless=1]="Headless";a[a.Mock=2]="Mock"})(l.RendererKind||
(l.RendererKind={}));(l.DrawComponentMouseEventKindWithPosition||(l.DrawComponentMouseEventKindWithPosition={})).Move="Move";(function(a){a.Leave="Leave";a.Activate="Activate";a.Deactivate="Deactivate"})(l.DrawComponentMouseEventWithoutPositionKind||(l.DrawComponentMouseEventWithoutPositionKind={}));(function(a){a.Received="Received";a.Lost="Lost"})(l.DrawComponentFocusEventKind||(l.DrawComponentFocusEventKind={}));(function(a){a.error="error";a.empty="empty";a.invisibleFrame="invisibleFrame";a.zZoomArea=
"zZoomArea";a.zTriangle="zTriangle";a.zRectangleFrame="zRectangleFrame";a.zRectangle="zRectangle";a.zInvisibleFrame="zInvisibleFrame";a.zIframePlaceHolder="zIframePlaceHolder";a.zCircleFrame="zCircleFrame";a.zOval="zOval";a.zCircle="zCircle";a.zBracketFrame="zBracketFrame";a.zPersistentGroup="zPersistentGroup";a.overviewFrame="overviewFrame";a.zPlaceholder="zPzlaceholder";a.zArrow="zArrow";a.zLine="zLine";a.zMarkerPencil="zMarkerPencil";a.zText="zText";a.arc="arc";a.ax="ax";a.rectangle="rectangle";
a.circle="circle";a.textHittestRectangle="textHittestRectangle";a.lshape="lshape";a.hollowRectangle="hollowRectangle";a.zTopicContainer="topicContainer";a.videoThumbnail="videoThumbnail";a.image="image";a.animatedImage="animatedImage";a.logo="logo";a.nextLogo="nextLogo";a.xvg="xvg";a.onCanvasVideo="onCanvasVideo"})(l.DrawComponentKind||(l.DrawComponentKind={}));(function(a){a.preziLogoSmall="preziLogoSmall";a.preziLogoLarge="preziLogoLarge";a.documentBasedSmall="documentBasedSmall";a.documentBasedLarge=
"documentBasedLarge"})(l.LogoSizeCategory||(l.LogoSizeCategory={}));(function(a){a[a.PdomLayer=0]="PdomLayer";a[a.StoryLayer=1]="StoryLayer";a[a.DecoratorLayer=2]="DecoratorLayer";a[a.LogoLayer=3]="LogoLayer"})(l.LayerType||(l.LayerType={}));(function(a){a[a.TOP_LEFT=0]="TOP_LEFT";a[a.TOP_RIGHT=1]="TOP_RIGHT";a[a.BOTTOM_LEFT=2]="BOTTOM_LEFT";a[a.BOTTOM_RIGHT=3]="BOTTOM_RIGHT"})(l.LShapeOrientation||(l.LShapeOrientation={}));(function(a){a.Image="image";a.Xvg="xvg";a.AnimatedImage="animatedImage"})(l.AssetKind||
(l.AssetKind={}));(function(a){a.ALL_ASSETS_LOADED="allAssetsLoaded";a.VIDEO_LOADING_STARTED="videoLoadingStarted";a.VIDEO_LOADING_FINISHED="videoLoadingFinished"})(l.AssetLoadingMessage||(l.AssetLoadingMessage={}));l.CetRendererModule=n.CetRendererInternal;return Db=l});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_cet_renderer",["require","prezi.engine.dom","prezi.geometry","prezi_bacon","prezi_cet_model","prezi_editor_error","prezi_featureswitcher","prezi_logger","prezi_pdf_render","prezi_service_assetloader","prezi_service_http","prezi_textmodel","prezi_utils"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_cet_renderer.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("prezi.engine.dom"),require("prezi.geometry"),require("prezi_bacon"),require("prezi_cet_model"),require("prezi_editor_error"),require("prezi_featureswitcher"),require("prezi_logger"),require("prezi_pdf_render"),require("prezi_service_assetloader"),require("prezi_service_http"),require("prezi_textmodel"),require("prezi_utils"));}else{this["prezi_cet_renderer"]=__factory(this["prezi.engine.dom"],this["prezi.geometry"],this["prezi_bacon"],this["prezi_cet_model"],this["prezi_editor_error"],this["prezi_featureswitcher"],this["prezi_logger"],this["prezi_pdf_render"],this["prezi_service_assetloader"],this["prezi_service_http"],this["prezi_textmodel"],this["prezi_utils"]);}}).call(this);