;(function(){var baseUrl;var __factory=function(){var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_image_color_thief";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{}};})());};})(arguments);var moduleImpl=(function(){return module(function(){function r(a){this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.width=this.canvas.width=a.width;this.height=this.canvas.height=a.height;this.context.drawImage(a,0,0,this.width,this.height)}var u={I:function(a){return{r:Math.round(a[0]),g:Math.round(a[1]),b:Math.round(a[2]),a:1}},B:function(a){let b=a[0]/360;var c=a[1]/100;a=a[2]/100;let h;if(0===c){var e=255*a;return[e,e,e]}c=.5>a?a*(1+c):a+c-a*c;a=
2*a-c;h=[0,0,0];for(let g=0;3>g;g++)e=b+1/3*-(g-1),0>e&&e++,1<e&&e--,e=1>6*e?a+6*(c-a)*e:1>2*e?c:2>3*e?a+(c-a)*(2/3-e)*6:a,h[g]=255*e;return h},H:function(a){var b=a[0]/255;const c=a[1]/255,h=a[2]/255;a=Math.min(b,c,h);const e=Math.max(b,c,h),g=e-a;let k;e===a?k=0:b===e?k=(c-h)/g:c===e?k=2+(h-b)/g:h===e&&(k=4+(b-c)/g);k=Math.min(60*k,360);0>k&&(k+=360);b=(a+e)/2;return[k,100*(e===a?0:.5>=b?g/(e+a):g/(2-e-a)),100*b]}};Object.defineProperty(u,"__esModule",{value:!0});var m={};Object.defineProperty(m,
"__esModule",{value:!0});r.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};r.prototype.update=function(a){this.context.putImageData(a,0,0)};r.prototype.A=function(){return this.width*this.height};r.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};r.prototype.G=function(){this.canvas.parentNode.removeChild(this.canvas)};m.c=function(){};m.c.prototype.getColor=function(a,b){return this.getPalette(a,5,b)[0]};m.c.prototype.getPalette=
function(a,b,c){if("undefined"===typeof b||2>b||256<b)b=10;if("undefined"===typeof c||1>c)c=10;a=new r(a);for(var h=a.getImageData().data,e=a.A(),g=[],k=0,f;k<e;k+=c){f=4*k;var d=h[f+0],x=h[f+1],y=h[f+2];f=h[f+3];125<=f&&(250<d&&250<x&&250<y||g.push([d,x,y]))}b=(b=z.F(g,b))?b.D():null;a.G();return b};m.c.prototype.getColorFromUrl=function(a,b,c){sourceImage=document.createElement("img");var h=this;sourceImage.addEventListener("load",function(){var e=h.getPalette(sourceImage,5,c)[0];b(e,a)});sourceImage.src=
a};m.c.prototype.getImageData=function(a,b){xhr=new XMLHttpRequest;xhr.open("GET",a,!0);xhr.responseType="arraybuffer";xhr.onload=function(){if(200==this.status){uInt8Array=new Uint8Array(this.response);var a=uInt8Array.length;binaryString=Array(a);for(a=0;a<uInt8Array.length;a++)binaryString[a]=String.fromCharCode(uInt8Array[a]);data=binaryString.join("");base64=window.btoa(data);b("data:image/png;base64,"+base64)}};xhr.send()};m.c.prototype.getColorAsync=function(a,b,c){var h=this;this.getImageData(a,
function(a){sourceImage=document.createElement("img");sourceImage.addEventListener("load",function(){var a=h.getPalette(sourceImage,5,c)[0];b(a,this)});sourceImage.src=a})};var t={map:function(a,b){var c={};return b?a.map(function(a,e){c.index=e;return b.call(c,a)}):a.slice()},m:function(a,b){return a<b?-1:a>b?1:0},J:function(a,b){var c={};return a.reduce(b?function(a,e,g){c.index=g;return a+b.call(c,e)}:function(a,b){return a+b},0)},max:function(a,b){return Math.max.apply(null,b?t.map(a,b):a)}},
z=function(){function a(a){function d(){f.sort(a);b=!0}var f=[],b=!1;return{push:function(a){f.push(a);b=!1},f:function(a){b||d();void 0===a&&(a=f.length-1);return f[a]},pop:function(){b||d();return f.pop()},size:function(){return f.length},map:function(a){return f.map(a)},debug:function(){b||d();return f}}}function b(a,d,b,e,c,q,p){this.r1=a;this.r2=d;this.g1=b;this.g2=e;this.b1=c;this.b2=q;this.l=p}function c(){this.i=new a(function(a,d){return t.m(a.h.count()*a.h.volume(),d.h.count()*d.h.volume())})}
function h(a){var d=Array(32768),f,b,e,c;a.forEach(function(a){b=a[0]>>k;e=a[1]>>k;c=a[2]>>k;f=(b<<10)+(e<<5)+c;d[f]=(d[f]||0)+1});return d}function e(a,d){var f=1E6,e=0,c=1E6,q=0,p=1E6,v=0,h,l,n;a.forEach(function(a){h=a[0]>>k;l=a[1]>>k;n=a[2]>>k;h<f?f=h:h>e&&(e=h);l<c?c=l:l>q&&(q=l);n<p?p=n:n>v&&(v=n)});return new b(f,e,c,q,p,v,d)}function g(a,d){function f(a){var f=a+"1";a+="2";for(l=d[f];l<=d[a];l++)if(h[l]>p/2){var b=d.j(),e=d.j();var c=l-d[f];var g=d[a]-l;for(g=c<=g?Math.min(d[a]-1,~~(l+g/2)):
Math.max(d[f],~~(l-1-c/2));!h[g];)g++;for(c=k[g];!c&&h[g-1];)c=k[--g];b[a]=g;e[f]=b[a]+1;return[b,e]}}if(d.count()){var b=d.r2-d.r1+1,e=d.g2-d.g1+1,c=t.max([b,e,d.b2-d.b1+1]);if(1==d.count())return[d.j()];var p=0,h=[],k=[],l,n,g;if(c==b)for(l=d.r1;l<=d.r2;l++){var m=0;for(n=d.g1;n<=d.g2;n++)for(g=d.b1;g<=d.b2;g++){var r=(l<<10)+(n<<5)+g;m+=a[r]||0}p+=m;h[l]=p}else if(c==e)for(l=d.g1;l<=d.g2;l++){m=0;for(n=d.r1;n<=d.r2;n++)for(g=d.b1;g<=d.b2;g++)r=(n<<10)+(l<<5)+g,m+=a[r]||0;p+=m;h[l]=p}else for(l=
d.b1;l<=d.b2;l++){m=0;for(n=d.r1;n<=d.r2;n++)for(g=d.g1;g<=d.g2;g++)r=(n<<10)+(g<<5)+l,m+=a[r]||0;p+=m;h[l]=p}h.forEach(function(a,d){k[d]=p-a});return c==b?f("r"):c==e?f("g"):f("b")}}var k=3;b.prototype={volume:function(a){if(!this.s||a)this.s=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1);return this.s},count:function(a){var d=this.l;if(!this.v||a){a=0;var b,f,c;for(b=this.r1;b<=this.r2;b++)for(f=this.g1;f<=this.g2;f++)for(c=this.b1;c<=this.b2;c++)a+=d[(b<<10)+(f<<5)+c]||0;this.u=a;
this.v=!0}return this.u},j:function(){return new b(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.l)},w:function(a){var d=this.l;if(!this.o||a){var b=a=0,f=0,c=0,e,g,h;for(e=this.r1;e<=this.r2;e++)for(g=this.g1;g<=this.g2;g++)for(h=this.b1;h<=this.b2;h++){var k=d[(e<<10)+(g<<5)+h]||0;a+=k;b+=k*(e+.5)*8;f+=k*(g+.5)*8;c+=k*(h+.5)*8}this.o=a?[~~(b/a),~~(f/a),~~(c/a)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this.o},contains:function(a){var d=
a[0]>>k;gval=a[1]>>k;bval=a[2]>>k;return d>=this.r1&&d<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}};c.prototype={push:function(a){this.i.push({h:a,color:a.w()})},D:function(){return this.i.map(function(a){return a.color})},size:function(){return this.i.size()},map:function(a){for(var d=this.i,b=0;b<d.size();b++)if(d.f(b).h.contains(a))return d.f(b).color;return this.C(a)},C:function(a){for(var b=this.i,c=0;c<b.size();c++){var e=Math.sqrt(Math.pow(a[0]-b.f(c).color[0],2)+
Math.pow(a[1]-b.f(c).color[1],2)+Math.pow(a[2]-b.f(c).color[2],2));if(e<f||void 0===f)var f=e,g=b.f(c).color}return g}};return{F:function(b,d){function f(a,b){for(var d=1,c=0,e;1E3>c;)if(e=a.pop(),e.count()){var f=g(k,e);e=f[0];f=f[1];if(!e)break;a.push(e);f&&(a.push(f),d++);if(d>=b)break;if(1E3<c++)break}else a.push(e),c++}if(!b.length||2>d||256<d)return!1;var k=h(b),m=0;k.forEach(function(){m++});var q=e(b,k);b=new a(function(a,b){return t.m(a.count(),b.count())});b.push(q);f(b,.75*d);for(q=new a(function(a,
b){return t.m(a.count()*a.volume(),b.count()*b.volume())});b.size();)q.push(b.pop());f(q,d-q.size());for(d=new c;q.size();)d.push(q.pop());return d}}}(),w={generateFiveFromLogo:function(a){let [b,c,h]=u.H([a.r,a.g,a.b]);a=[100,68,60,78,100];let e=[75,60,47,35,25];if(15>=c||15>=h||50>c+h)b=0,a=[0,0,0,0,0],e=[100,81,63,44,25];let g=[];for(let c=0;5>c;c++)g.push([b,a[c],e[c]]);return g.map(u.B).map(u.I)}};Object.defineProperty(w,"__esModule",{value:!0});w.ColorThiefTool=new m.c;return w});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_image_color_thief",["require"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_image_color_thief.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)();}else{this["prezi_image_color_thief"]=__factory();}}).call(this);