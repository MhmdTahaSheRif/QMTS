;(function(){var baseUrl;var __factory=function(){var React=arguments[0];var ReactDOM=arguments[1];var ReactTransitionGroup=arguments[2];var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_presenter_communication";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi_utils":dependencies[3]}};})(),React,ReactDOM,ReactTransitionGroup);};})(arguments);var moduleImpl=(function(){return module(function(n,p,q,r){function l(a,b,d=null){a=c.generateKey(a,b,d);try{return JSON.parse(localStorage.getItem(a||"null"))}catch(t){return null}}function m(a){a=c.getPrefix(a);const b=[];for(let d=0;d<window.localStorage.length;++d){const c=window.localStorage.key(d);c.startsWith(a)&&b.push(c)}b.forEach((a)=>window.localStorage.removeItem(a))}function g(a){return"presenterview2."+a}var e={};Object.defineProperty(e,"__esModule",{value:!0});const f=(a,b)=>"thumbnails.navigator"===b.kind||"thumbnails.preview"===
b.kind||"loaded"===b.kind?c.generateKey(a,b.kind,b.index):c.generateKey(a,b.kind),h=(a)=>(b)=>localStorage.setItem(f(a,b),JSON.stringify(b)),k=(a)=>(b)=>l(a,b);e.LocalStorageCommunication=class{constructor(a){this.handler=null;this.postMessage=(a)=>{if(null==this.handler)throw Error("Message handler not set!");window.localStorage.removeItem(f(this.oid,a));localStorage.setItem(f(this.oid,a),JSON.stringify(a))};this.onMessage=(a)=>{window.removeEventListener("storage",this.handler);this.handler=(b)=>
{b.key.startsWith(c.getPrefix(this.oid))&&null!=b.newValue&&(b=JSON.parse(b.newValue),a(b))};m(this.oid);window.addEventListener("storage",this.handler)};this.oid=a;this.get=k(a);this.set=h(a)}};e.BroadcastApiCommunication=class{constructor(a){this.channel=new BroadcastChannel("prezi-presenter-view-comm");this.handlerSet=!1;this.postMessage=(a)=>{if(!this.handlerSet)throw Error("Message handler not set!");this.channel.postMessage({oid:this.oid,message:a})};this.onMessage=(a)=>{this.handlerSet=!0;
this.channel.onmessage=({data:{oid:b,message:c}})=>{b===this.oid&&a(c)}};this.get=k(a);this.set=h(a);this.oid=a}};var c={};Object.defineProperty(c,"__esModule",{value:!0});(function(a){a.next="next";a.prev="prev";a.home="home";a.end="end";a.pathElementId="pathElementId"})(c.NavigationTargetKind||(c.NavigationTargetKind={}));c.getPrefix=g;c.generateKey=function(a,b,c=null){c=null!=c?"."+c:"";return g(a)+"."+b+c};(function(a){a.createPresenterViewCommunicationChannel=function(a,c){return c||"undefined"===
typeof window.BroadcastChannel?new e.LocalStorageCommunication(a):new e.BroadcastApiCommunication(a)}})(c.PresenterViewCommunicationModule||(c.PresenterViewCommunicationModule={}));return c});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_presenter_communication",["require","react","react-dom","react-transition-group","prezi_utils"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_presenter_communication.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("react"),require("react-dom"),require("react-transition-group"),require("prezi_utils"));}else{this["prezi_presenter_communication"]=__factory(React,ReactDOM,ReactTransitionGroup,this["prezi_utils"]);}}).call(this);