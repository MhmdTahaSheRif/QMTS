;(function(){var baseUrl;var __factory=function(){var React=arguments[0];var ReactDOM=arguments[1];var ReactTransitionGroup=arguments[2];var module=(function(dependencies){return function(init){return init.call({},(function(){return{getSpaghettiVersion:function(){return "14.0-9-g58006c6";},getModuleName:function(){return "prezi_client_player";},getModuleVersion:function(){return "release-2023w26-base-4-g4a3c2ed4bcb";},getResourceUrl:function(resource){if(resource.substr(0,1)!="/"){resource="/"+resource;}return baseUrl+resource;},"dependencies":{"prezi.geometry":dependencies[3],"prezi_app_utils":dependencies[4],"prezi_bacon":dependencies[5],"prezi_canvas_listener":dependencies[6],"prezi_cet":dependencies[7],"prezi_cet_model":dependencies[8],"prezi_cet_model_editor":dependencies[9],"prezi_cet_renderer":dependencies[10],"prezi_editor_store_focus":dependencies[11],"prezi_editor_store_mode":dependencies[12],"prezi_editor_store_ui":dependencies[13],"prezi_externalserviceprovider":dependencies[14],"prezi_featureswitcher":dependencies[15],"prezi_i18n":dependencies[16],"prezi_koi_navigation":dependencies[17],"prezi_koi_widgets":dependencies[18],"prezi_logger":dependencies[19],"prezi_nativeapitypes":dependencies[20],"prezi_onboarding":dependencies[21],"prezi_playback":dependencies[22],"prezi_presenter_view_web":dependencies[23],"prezi_sound_playback":dependencies[24],"prezi_thumbnail_render":dependencies[25],"prezi_video":dependencies[26]}};})(),React,ReactDOM,ReactTransitionGroup);};})(arguments);var moduleImpl=(function(){return module(function(e,G,H,z){z=null;var d=e.dependencies.prezi_app_utils,f=e.dependencies.prezi_bacon,g=e.dependencies.prezi_canvas_listener,h=e.dependencies.prezi_cet,A=e.dependencies.prezi_cet_model,t=e.dependencies.prezi_cet_model_editor,v=e.dependencies.prezi_cet_renderer,L=e.dependencies.prezi_editor_store_focus,M=e.dependencies.prezi_editor_store_ui,n=e.dependencies.prezi_featureswitcher,I=e.dependencies.prezi_i18n,u=e.dependencies.prezi_koi_navigation,m=e.dependencies.prezi_logger,p=e.dependencies.prezi_playback,
N=e.dependencies.prezi_presenter_view_web,O=e.dependencies.prezi_thumbnail_render,J=e.dependencies["prezi.geometry"],w=e.dependencies.prezi_nativeapitypes,K=e.dependencies.prezi_video,B={};Object.defineProperty(B,"__esModule",{value:!0});B.DesktopNavigationConnector=class{init(a,b){this.playerUI=a;this.navigationProvider=b;this.playerUI.getFollowActionStream().onValue((a)=>{this.onFollowAction(a)})}convertVideoEventTypeToVideoState(a){switch(a){case K.VideoEventType.Play:return w.VideoState.Play;
case K.VideoEventType.Pause:return w.VideoState.Pause;default:throw Error("Unecpected VideoEvent occured");}}onFollowAction(a){switch(a.type){case "FollowerPathAction":if(a.event.getToPos()){var b=a.event.getToPos().getStep();a=a.event.getToPos().getAction();if(this.currentStepIndex!==b||this.currentActionIndex!==a)this.currentStepIndex=b,this.currentActionIndex=a,this.navigationProvider.goToPath(this.currentStepIndex,this.currentActionIndex)}}}goToPath(a,b){this.playerUI.flyToStepAction(a,b,()=>
{})}moveCamera(a,b,c,d,l){this.playerUI.getPlayback().getStage().slideToRect(J.Geometry.rectangleFromData({x:a-c/2,y:b-d/2,width:c,height:d}),J.Geometry.transform2dFromRad({x:0,y:0},1,l))}flyToOverview(){this.playerUI.flyToOverview()}flyToObject(a){this.playerUI.flyToObject(a)}goToVideo(a,b,c){this.playerUI.flyToObject(a);switch(b){case w.VideoState.Play:this.playerUI.getPlayback().getStage().play(c);break;case w.VideoState.Pause:this.playerUI.getPlayback().getStage().pause()}}};var x={};Object.defineProperty(x,
"__esModule",{value:!0});x.EMBED_PLAY="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAkCAMAAABPJrEfAAAAaVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8G612AAAAInRSTlMAvfwdCNTFWDns37+SfHBJJxTy566ln2ZDLfXas4qHZBACzma61AAAAJlJREFUKM910ssWgjAQA9CWlgqiiKICvp3//0jYZZFJtvdk0UnDnINM6RZp0dr+L80sLtrscszSzEqjzR6okqHqmVXvHxlSn9hQPZwdQ5UNuSdttt/BOLcEc6owznXQtk2nrfpI65rgGAaNquRb2+cg7DWom40T3xpPFjZ+ATCcmA3TsGFStudWYsMXYsP/YUOJUuo5qExJ0gowTjqsF0o0GAAAAABJRU5ErkJggg==";
x.LOADING_SPINNER="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAMAAADyHTlpAAAAq1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////Nr6iZAAAAOXRSTlMABBUdEhkqL+F6XU7nWDk0CIV1bFIlDvXOxLWnZ2JEl5F/cEk917qNicmwrCEL8Ny/op7r0psK/EA0b+RzAAACEUlEQVQ4y43U2ZaiMBCA4bALyCYScWERRVFBW1vR93+yqYr0SDOQM/8Vej5S4bCQTqWl72+LxTJdRwHhJEWPxWKx2319zefzw+E4GdKifzoe2zQMQ0/pgYK1PJ3QNvSA9H4PJ0JX0vWyS0Okeb6UO7vcX5dgOxRlfpmrv2Ryuza2mGqSW0uO8UAK8nLJW5YWt9vbGq1pchYyORrN//4rTB4PpNdMJL9S0hwkdPy5tmmSMGuSf1oxOR7rzaA0YdYmPZlMjkcSwYwUbbIhvfkox98J29A+RbsiAz0AQiqO2KNN5SGqjACezx4c6nsoNclg6+8zdIeTiqIAS4epiHI200hcYD7htJthOrE8zyuKLY9mjF5J5GElj75ms+fzuSMZoyKPBk8sJ/oac3m0GmMjPm0SWcTXMZn8RwajEo8I74ipTyCHS11MIPYEs3i0ruoaqQgwy7KaQymtIDiIMsi3OYvKMgWN9wKg76+qwZ2KMkRd9v3BVvEQlUURsUCgGCCk9UuqKCJUvX8gjKKo7JOVJCmIBcKymTQMtWd6KTFLfzZuMmlY27pzRUpQMvt58FyLScuaam4bqmrArCK05hgQyKlp2qVcCYJLlUDT1MaCbNkpSEY3mzh+bW3bcTSwQAOU7dwY5Icyy5ZF2UnQUHYoWLH3Xju46IeihSX7o2qM9NVQVeG+RzTQHHu7ddRA6T6XfwBDFkpxJ2SBPAAAAABJRU5ErkJggg==";
var k={};Object.defineProperty(k,"__esModule",{value:!0});k.FlashMessage=class{constructor(a){this.options=a;this.disposed=!1;this.createFlashBox()}static flash(a){a.stopLastMessage&&k.FlashMessage.lastMessage&&k.FlashMessage.lastMessage.dispose();k.FlashMessage.lastMessage=new k.FlashMessage(a);k.FlashMessage.lastMessage.flash()}createFlashBox(){this.flashBox=document.createElement("div");this.flashBox.style.border=k.FlashMessage.SOLID_BLACK_BORDER;this.flashBox.style.backgroundColor="rgba(0,0,0,0.8)";
this.flashBox.style.color="#fff";this.flashBox.style.padding="21px";this.flashBox.style.fontSize="24px";this.flashBox.style.fontFamily="'PT Sans', sans-serif";this.flashBox.style.textAlign="center";this.flashBox.style.pointerEvents="none";this.flashBox.style.display="none";this.flashBox.style.zIndex="99999";this.flashBox.style.position="relative";this.flashBox.style.margin="auto";this.flashBox.style.width="50%";this.flashBox.style.top="38%";this.options.parent.appendChild(this.flashBox);this.flashBox.innerHTML=
this.options.text}dispose(){this.disposed||(this.options.parent.removeChild(this.flashBox),this.disposed=!0)}flash(){$(this.flashBox).stop().fadeIn(50).delay(1600).fadeOut(100,()=>{this.dispose()})}};k.FlashMessage.SOLID_BLACK_BORDER="1px #222222 solid";var C={};Object.defineProperty(C,"__esModule",{value:!0});C.KeyboardCommands=class{constructor(a,b,c,d,l){this.structuredLogger=a;this.playerUI=b;this.keyboardStream=c;this.isFollower=d;this.shouldOverrideBrowserShortcuts=l;this.lastKeystrokeTimestamp=
0;this.keyboardStream.filter((a)=>"keydown"===a.type&&this.debounce(a)).onValue((a)=>this.handleKeyboardInteraction(a))}debounce(a){a=a&&a.timeStamp?a.timeStamp:Date.now();const b=100<=a-this.lastKeystrokeTimestamp;b&&(this.lastKeystrokeTimestamp=a);return b}handleKeyboardInteraction(a){var b=this.playerUI.getPathNavigator(),c=b.getCurrentPosition();c=c?c.getStep():0;b=b.getPath().getStepCount();if(this.shouldOverrideBrowserShortcuts)switch(a.keyCode){case 116:a.preventDefault(),d.AppUtilsModule.getLogHelperUtils().toggleFullscreen(this.structuredLogger,
!this.playerUI.isFullscreen(),c,b,d.LogTrigger.KEYBOARD),this.playerUI.toggleFullscreen()}if(!this.isFollower)switch(a.keyCode){case 32:(a.metaKey||a.ctrlKey)&&this.playerUI.flyToOverview();d.AppUtilsModule.getLogHelperUtils().nextStep(this.structuredLogger,c,b,d.LogTrigger.KEYBOARD);this.playerUI.getPlayback().isVideoInFocus()?this.playerUI.getPlayback().getStage().toggleVideoPlay():this.playerUI.flyToNextStep(null);break;case 35:a.preventDefault();m.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:"JUMP_TO_LAST_PATH_STEP",
action_index:this.playerUI.getPlayback().getCurrentActionIndex(),step_index:c,total_step_number:b});m.avro.Avro.createDefaultLogger().logUseKeyboardShortcut({shortcut_type:"JUMP_TO_LAST_PATH_STEP"});this.playerUI.flyToEnd(()=>{});break;case 36:a.preventDefault();m.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:"JUMP_TO_FIRST_PATH_STEP",action_index:this.playerUI.getPlayback().getCurrentActionIndex(),step_index:c,total_step_number:b});m.avro.Avro.createDefaultLogger().logUseKeyboardShortcut({shortcut_type:"JUMP_TO_FIRST_PATH_STEP"});
this.playerUI.flyToHome(()=>{});break;case 33:case 37:case 38:a.preventDefault();m.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:"BACKWARD_KEYBOARD",action_index:this.playerUI.getPlayback().getCurrentActionIndex(),step_index:c,total_step_number:b});d.AppUtilsModule.getLogHelperUtils().previousStep(this.structuredLogger,c,b,d.LogTrigger.KEYBOARD);this.playerUI.flyToPreviousStep(null);break;case 34:case 39:case 40:a.preventDefault();m.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:"FORWARD_KEYBOARD",
action_index:this.playerUI.getPlayback().getCurrentActionIndex(),step_index:c,total_step_number:b});d.AppUtilsModule.getLogHelperUtils().nextStep(this.structuredLogger,c,b,d.LogTrigger.KEYBOARD);this.playerUI.flyToNextStep(null);break;case 8:a.preventDefault();d.AppUtilsModule.getLogHelperUtils().zoomOut(this.structuredLogger,d.LogTrigger.KEYBOARD,{actionIndex:this.playerUI.getPlayback().getCurrentActionIndex(),stepIndex:c,totalStepNumber:b});this.playerUI.zoomOut();break;case 83:n.isActive("js-developer-features")&&
a.metaKey&&a.altKey&&this.playerUI.getAutoplaySpeedTestHelper().start();break;case 50:n.isActive("js-developer-features")&&a.metaKey&&a.altKey&&this.playerUI.getAutoplaySpeedTestHelper().start(null,[2E3]);break;case 52:case 88:n.isActive("js-developer-features")&&a.metaKey&&a.altKey&&this.playerUI.getAutoplaySpeedTestHelper().start(null,[4E3])}}};var y={};Object.defineProperty(y,"__esModule",{value:!0});y.NavigationUIComponent=class extends G.Component{constructor(a){super(a);this.logger=m.LoggerModule.getLoggerManager().createLogger("prezi_client_player.PlayerUI");
this.doOnceSemaphore=!1;this.movePrev=()=>{this.logNavigatePrezi("BACKWARD_NAVBAR");d.AppUtilsModule.getLogHelperUtils().previousStep(this.logger,this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),this.injectedLogic.playerUI.getPlayback().getStepCount(),d.LogTrigger.BUTTON);this.doOnceTap(()=>{this.injectedLogic.playerUI.flyToPreviousStep(null)});document.body.focus()};this.moveNext=()=>{this.logNavigatePrezi("FORWARD_NAVBAR");d.AppUtilsModule.getLogHelperUtils().nextStep(this.logger,
this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),this.injectedLogic.playerUI.getPlayback().getStepCount(),d.LogTrigger.BUTTON);this.doOnceTap(()=>{this.injectedLogic.playerUI.flyToNextStep(null)});document.body.focus()};this.moveTo=(a)=>{a=t.CetModelEditor.createPathElementIdToPlaybackPathPositionMapFromScene(this.injectedLogic.playerUI.getPlayback().getScene()).get(a);d.AppUtilsModule.getLogHelperUtils().seekbarNavigation(this.logger,this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),
a.step,this.injectedLogic.playerUI.getPlayback().getStepCount());this.logNavigatePrezi("GO_TO_PATH");this.setState({currentPathPosition:a});this.injectedLogic.playerUI.flyToStepAction(a.step,a.action,null)};this.play=()=>{this.injectedLogic.autoPlayer.setInterval(4E3);this.injectedLogic.autoPlayer.setLoop(!0);this.injectedLogic.autoPlayer.start();this.setState({isPlaying:!0})};this.pause=()=>{this.injectedLogic.autoPlayer.stop();this.setState({isPlaying:!1})};this.fullscreen=()=>{this.doOnceTap(()=>
{d.AppUtilsModule.getLogHelperUtils().toggleFullscreen(this.logger,!this.state.isFullscreen,this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),this.injectedLogic.playerUI.getPlayback().getStepCount(),d.LogTrigger.BUTTON);this.injectedLogic.playerUI.toggleFullscreen();this.setState({isFullscreen:!this.state.isFullscreen});this.injectedLogic.options.isFollower&&this.logger.info({feature:"remote_presentation",action:this.state.isFullscreen?"back":"show",object:"full_screen",trigger:"click"})})};
this.updateThumbnail=(a)=>{var b;null!=this.job&&this.job.cancel();const d=this.injectedLogic.renderThumbnail(a);this.job=d;null===(b=this.job)||void 0===b?void 0:b.getThumbnail().then((a)=>{null!=a&&d===this.job&&(this.setState({thumbnail:a.canvas}),this.job=null)})};this.setAutoplay=(a)=>{d.AppUtilsModule.getLogHelperUtils().setAutoplay(this.logger,this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),this.injectedLogic.playerUI.getPlayback().getStepCount(),a);this.injectedLogic.playerUI.setAutoPlay_killme(a,
!0);this.setState({autoplayValue:a})};this.injectedLogic=a.injectedLogic;this.injectedLogic.userLicenseStream.onValue((a)=>this.userLicenseInformation=a);this.state={isLoadingAssets:!1,isPlaying:!1,currentPathPosition:null,pathPositionsWithVoiceOver:[],isFullscreen:!1,autoplayValue:null==this.injectedLogic.autoPlayer?-1:this.injectedLogic.autoPlayer.getInterval(),canHaveFocus:!0,isStorylineOn:!1,isOverviewInFocus:!1,isPreviewInsertCommentButtonVisible:!1,isEditMode:!0,isPresentMode:!1,isFullscreenVisible:this.props.isFullscreenVisible,
isMuted:this.props.isMuted,isMobileClickerPopupVisible:!1,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,viewportMarginRight:0,thumbnail:null,hasBackgroundSound:!1,isZoomInLimitReached:!1,isZoomOutLimitReached:!1,forcedVisible:!1}}logNavigatePrezi(a){m.avro.Avro.createDefaultLogger().logNavigatePrezi({navigation_type:a,action_index:this.injectedLogic.playerUI.getPlayback().getCurrentActionIndex(),step_index:this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),total_step_number:this.injectedLogic.playerUI.getPlayback().getStepCount()})}doOnceTap(a){this.doOnceSemaphore||
(this.doOnceSemaphore=!0,setTimeout(()=>{this.doOnceSemaphore=!1},100),a(null))}isPresenterViewButtonVisible(){return null==this.injectedLogic.options.preziLinkToken}render(){var a,b,c,e;const l=this.injectedLogic.playerUI.getPlayback(),f=null==l||this.state.isEditMode?u.NavbarVisibility.HIDDEN:this.state.forcedVisible?u.NavbarVisibility.VISIBLE:u.NavbarVisibility.AUTO;let g=!1,q=null,h=[],k=[],D=0,m=0;const r=new Map;if(null!=l)try{g=null!=l&&t.CetModelEditor.usesChaptersOnOverview(l.getScene());
q=l.getStartPosition();h=l.getPathPositionsForNavigation();k=l.getPathNavigator().getPath().getAllPathPositions();D=l.getStepCount();m=null!=this.state.currentPathPosition?l.getActionCount(this.state.currentPathPosition.step):0;const a=t.CetModelEditor.createPathElementIdToPlaybackPathPositionMapFromScene(l.getScene());for(const [b,c]of a.entries()){let a=r.get(c.step);null==a&&(a=new Map,r.set(c.step,a));a.set(c.action,b)}}catch(P){this.logger.warn({action:"render",object:"NavigationUi",trigger:"machine",
payload:{message:"playback scene not updated?"}}),g=!1,q=null,h=[],k=[],m=D=0,r.clear()}return u.NavigationModule.createNavigationFactory().navigation(Object.assign(Object.assign({},this.state),{isFullScreenVisible:this.state.isFullscreenVisible,hasPrev:null!=this.state.currentPathPosition&&(0<this.state.currentPathPosition.step||0<this.state.currentPathPosition.action),hasNext:null!=this.state.currentPathPosition&&(this.state.currentPathPosition.step<D-1||this.state.currentPathPosition.action<m),
startPathElementId:null===(a=r.get(null===q||void 0===q?void 0:q.step))||void 0===a?void 0:a.get(null===q||void 0===q?void 0:q.action),pathElementIdsWithThumbnail:h.map((a)=>{var b;return null===(b=r.get(a.step))||void 0===b?void 0:b.get(a.action)}).filter((a)=>null!=a),pathElementIdsAll:k.map((a)=>{var b;return null===(b=r.get(a.step))||void 0===b?void 0:b.get(a.action)}).filter((a)=>null!=a),pathElementIdsWithVoiceOver:this.state.pathPositionsWithVoiceOver.map((a)=>{var b;return null===(b=r.get(a.step))||
void 0===b?void 0:b.get(a.action)}).filter((a)=>null!=a),currentPathElementId:null===(c=r.get(null===(b=this.state.currentPathPosition)||void 0===b?void 0:b.step))||void 0===c?void 0:c.get(null===(e=this.state.currentPathPosition)||void 0===e?void 0:e.action),visibility:f,isInfoButtonVisible:!this.injectedLogic.options.isLoggedIn&&!this.state.isFullscreen&&!this.injectedLogic.options.isFollower,isFullScreenDisabled:!1,isPathProgressBarVisible:!this.injectedLogic.options.isFollower,blinkNextButtonOnLoad:!0,
forcePrevButtonDisabled:!1,forceNextButtonDisabled:!1,userCanEdit:this.props.userCanEdit,userHasEditRight:this.props.userHasEditRight,preziPage:this.injectedLogic.options.isPrezipage,isFranklinStructure:g,isPresenterViewButtonVisible:this.isPresenterViewButtonVisible(),remotePresentationInProgressStream:this.injectedLogic.remotePresentationInProgressStream,isTextZoomOutButton:!0,isMobileClickerButtonVisible:n.isActive("js-mobile-clicker"),mobileClickerProvider:this.injectedLogic.mobileClickerProvider,
mobileClickerStatusStream:this.injectedLogic.mobileClickerStatusStream,isMobileClickerPopupVisible:this.state.isMobileClickerPopupVisible,marginLeft:this.state.marginLeft,marginRight:this.state.marginRight,marginTop:this.state.marginTop,marginBottom:this.state.marginBottom,viewportMarginRight:this.state.viewportMarginRight,isZoomInLimitReached:this.state.isEditMode&&this.state.isZoomInLimitReached,isZoomOutLimitReached:this.state.isEditMode&&this.state.isZoomOutLimitReached,isPresentMode:this.state.isPresentMode,
isEditMode:this.state.isEditMode,startAtIndexZero:n.isActive("js-frame-only-editor"),hideZoomButtons:n.isActive("js-navigation-control-bar")&&this.state.isEditMode,callbacks:{movePrev:this.movePrev,moveNext:this.moveNext,moveTo:this.moveTo,play:this.play,pause:this.pause,toggleMuted:()=>this.props.callbacks.toggleMuted(),fullscreen:this.fullscreen,restart:()=>{"function"===typeof this.injectedLogic.options.setInfoLayerMode&&this.injectedLogic.options.setInfoLayerMode(d.InfoLayerMode.RESTART)},updateThumbnail:this.updateThumbnail,
setAutoplay:this.setAutoplay,goHome:()=>this.injectedLogic.navigationUIController.goHome(),zoomIn:()=>this.injectedLogic.navigationUIController.zoomIn(),zoomOut:()=>{d.AppUtilsModule.getLogHelperUtils().zoomOut(this.logger,d.LogTrigger.BUTTON,{actionIndex:this.injectedLogic.playerUI.getPlayback().getCurrentActionIndex(),stepIndex:this.injectedLogic.playerUI.getPlayback().getCurrentStepIndex(),totalStepNumber:this.injectedLogic.playerUI.getPlayback().getStepCount()});this.injectedLogic.navigationUIController.zoomOut()},
addComment:()=>this.injectedLogic.navigationUIController.addComment(),navBarVisibilityChanged:(a)=>this.injectedLogic.navigationUIController.setNavbarVisibility(a),info:()=>{"function"===typeof this.injectedLogic.options.setInfoLayerMode&&this.injectedLogic.options.setInfoLayerMode(d.InfoLayerMode.MINI)},nextForcedDots:()=>{},openPresenterView:()=>{const a=this.injectedLogic.playerUI.getOptions().preziId;this.logger.info({action:"open_presenter_view",object:"presenter_view",trigger:"navbar_presenter_view_button",
category:"presenter_view_structured"});this.injectedLogic.navigationUIController.openPresenterView(a,()=>{this.userLicenseInformation.featureSet.presenterView?this.injectedLogic.playerUI.openPresenterView():(this.injectedLogic.navigationUIController.toggleDialog(M.BuiltinDialog.upgradeLicensePresenterView),this.injectedLogic.playerUI.isFullscreen()&&this.injectedLogic.playerUI.toggleFullscreen())})},openMobileClickerPopup:()=>{this.injectedLogic.navigationUIController.togglePopup("mobile-clicker-popup")}}}))}};
y.NavigationUIComponent.displayName="PlayerUI";var E={};Object.defineProperty(E,"__esModule",{value:!0});E.NavigationUIController=class{constructor(a,b,c){this.isOverviewId=b;this.zoomEventBus=f.Bacon.newBus();this.navbarVisibilityBus=f.Bacon.newBus();this.addCommentStream=f.Bacon.newBus();this.toggleDialogBus=f.Bacon.newBus();this.togglePopupBus=f.Bacon.newBus();a.onValue((a)=>this.currentTopicId=a);this.presenterViewProvider=c;this.mobileClickerPopupVisible=!1}goHome(){this.zoomEventBus.push(p.ZoomEvent.HOME)}zoomIn(){this.zoomEventBus.push(p.ZoomEvent.ZOOM_IN)}zoomOut(){this.isOverviewId(this.currentTopicId)?
this.zoomEventBus.push(p.ZoomEvent.HOME):this.zoomEventBus.push(p.ZoomEvent.ZOOM_OUT)}addComment(){this.addCommentStream.push(null)}setNavbarVisibility(a){this.navbarVisibilityBus.push(a)}getZoomEventStream(){return this.zoomEventBus}getAddCommentStream(){return this.addCommentStream}getNavbarVisibilityStream(){return this.navbarVisibilityBus}openPresenterView(a,b){this.presenterViewProvider.launchExternalPresenterView(a)||b()}toggleDialog(a){return this.toggleDialogBus.push(a)}getToggleDialogStream(){return this.toggleDialogBus}getTogglePopupStream(){return this.togglePopupBus}togglePopup(a){return this.togglePopupBus.push(a)}getMobileClickerPopupVisible(){return this.mobileClickerPopupVisible}setMobileClickerPopupVisible(a){this.mobileClickerPopupVisible=
a}};var F={};Object.defineProperty(F,"__esModule",{value:!0});F.PlayerUIImpl=class{constructor(a,b,c,e,l,g,h,k,n,p){this.elementId=a;this.options=b;this.app=e;this.externalServiceProvider=l;this.mobileClickerConnectionProvider=g;this.mobileClickerStatusStream=h;this.userLicenseInformationStream=k;this.logoTypeStream=n;this.activityLogger=p;this.allAssetsLoaded=!1;this.resizeDebounceMS=100;this.logger=m.LoggerModule.getLoggerManager().createLogger("prezi_client_player.PlayerUI");this.renderThumbnail=
(a)=>null!=this.thumbnailService?this.thumbnailService.renderPathElementById(a,{needHighQuality:!0,size:O.ThumbnailSize._176}):null;this.wrapStream=(a)=>(b)=>({type:a,event:b});this.currentTopicIdStream=f.Bacon.newBus();this.coverEditModeStream=f.Bacon.newBus();this.changeModeActionBus=f.Bacon.newBus();this.currentTopicNavigationStream=f.Bacon.newBus();this.modeStreamWithFullscreen=f.Bacon.newBus();this.navigationUIController=new E.NavigationUIController(this.currentTopicIdStream,(a)=>this.isOverviewId(a),
this.externalServiceProvider);this.playerDiv=document.getElementById(this.elementId);if(!this.playerDiv)throw"Player container not found with id "+this.elementId;this.onFocusBus=f.Bacon.newBus();this.focusModeBus=f.Bacon.newBus();this.isNavBarFullVisibleBus=f.Bacon.newBus();this.highlightEntityIdsStream=f.Bacon.newBus();this.hoveredEntityIdsStream=f.Bacon.newBus();this.remotePresentationInProgressStream=f.Bacon.newBus();this.isStorylineVisibleStream=f.Bacon.newBus();this.navigationUIController.getNavbarVisibilityStream().skipDuplicates().onValue((a)=>
{!a&&this.navigationUIController.getMobileClickerPopupVisible()&&this.navigationUIController.togglePopup(null)});a=this.navigationUIController.getNavbarVisibilityStream().skipDuplicates().map((a)=>!!a);this.isNavBarFullVisibleBus.plug(a.filter((a)=>a).delay(u.NavigationAnimationTimes.NAVBAR_APPEAR).filterWithStream(a.toProperty(!0)).merge(a.filter((a)=>!a)));this.muteController=this.resizeDebounceTimer=null;this.startSpinner();this.initPlayer();this.initFullScreenSupport();this.handleResize();this.initVisibilityListener();
a=new Promise((a)=>{if(null!=this.options.preziId)a(this.options.preziId);else c.filter((a)=>null!=a.oid).onValue((b)=>{a(b.oid)})});this.presenterViewWebController=N.createPresenterViewWebController(a,this.fullscreenChangeProperty);a=this.modeStreamWithFullscreen.sampledBy(this.presenterViewWebController.getPresenterWindowClosedStream()).map((a)=>a.mode.kind===d.EditorMode.playback?{newMode:d.EditorMode.playback,trigger:"Closing presenter window",presenterNotesFlow:!1,linkClickedFlow:a.mode.linkClickedFlow,
showTopmenu:a.mode.showTopmenu,shouldGoFullscreen:!1,shouldSeekPathToStart:!1}:null).filter((a)=>null!=a);this.changeModeActionBus.plug(a);this.currentTopicIdStream.onValue((a)=>{this.app.getMainStage().getCamera().setReferenceTransformEntity(a)})}isOverviewId(a){return!!a&&t.CetModelEditor.isOverview(a,this.playbackScene)}isEditingEnabled(){return this.options.userCanEdit}isCommentingEnabled(){return this.options.userCanComment}isLoggedIn(){return this.options.isLoggedIn}setMuteController(a){this.muteController=
a}setAutoPlay_killme(a,b){this.autoPlayer.setLoop(b);0<a?(this.autoPlayer.setInterval(a),this.autoPlayer.start()):(this.autoPlayer.setInterval(-1),this.autoPlayer.stop())}setKeyboardStream(a){new C.KeyboardCommands(this.logger,this,a,this.options.isFollower,this.externalServiceProvider.shouldOverrideBrowserShortcuts())}setIsFocusOnOverview(){this.playback.getStage().getEntityIdInFocusStream().skipDuplicates().onValue((a)=>{this.navigationUI&&this.navigationUI.setState({isOverviewInFocus:this.isOverviewId(a)})})}updateVoiceOvers(){this.playbackPathQuery&&
this.navigationUI&&this.navigationUI.setState({pathPositionsWithVoiceOver:this.playback.getPathStepPositionsWithAudio()})}setModeStream(a){this.modeStreamWithFullscreen.plug(a);this.currentTopicIdStream.toProperty(null).combineAndSample((a,c)=>({currentTopicId:a,mode:c.mode,isFullscreen:c.isFullscreen}),a).onValue((a)=>{let b=a.mode.kind===d.EditorMode.edit||a.mode.kind===d.EditorMode.animationPreview,e=a.mode.kind===d.EditorMode.view||a.mode.kind===d.EditorMode.playback&&a.isFullscreen;b?this.mobileClickerConnectionProvider.disconnectPreziRemote():
e&&this.updateVoiceOvers();if(this.navigationUI&&0<this.playback.getStepCount()){let c=this.playback.getCurrentStepIndex();const d=this.playback.getPathNavigator().getPath();d.getPathCalculator().hasStep(c)||(null==a.currentTopicId?c=0:(a=this.playbackPathQuery.getStepIndexesForEntityId(a.currentTopicId),c=0===a.length?0:a[0]),this.playback.getPathNavigator().seekTo(d.getPathPosition(c,0)));this.navigationUI.setState({isEditMode:b,isPresentMode:e,autoplayValue:null==this.autoPlayer?-1:this.autoPlayer.getInterval(),
isPlaying:!1,currentPathPosition:this.playback.getCurrentPathPosition(),isFullscreenVisible:this.isFullscreenVisible(),pathPositionsWithVoiceOver:d.getPathStepPositionsWithAudio()})}b&&this.playback&&this.autoPlayer.stop()})}setAudioStateStream(a){a.map((a)=>a.isMuted).skipDuplicates().onValue((a)=>{this.navigationUI&&this.navigationUI.setState({isMuted:a})})}setCurrentTopicIdStream(a){this.currentTopicIdStream.plug(a.toEventStream())}setCurrentTopicNavigationStream(a){this.currentTopicNavigationStream.plug(a.toEventStream())}setCoverEditModeStream(a){this.coverEditModeStream.plug(a.toEventStream())}setRemotePresentationInProgressStream(a){this.remotePresentationInProgressStream.plug(a)}setIsStorylineVisibleStream(a){this.isStorylineVisibleStream.plug(a)}setPreviewInsertCommentButtonVisibilityStream(a){a.onValue((a)=>
{this.navigationUI.setState({isPreviewInsertCommentButtonVisible:a})})}setIsStorylineOn(a){this.isStorylineOnStream=a;this.isStorylineOnStream.onValue((a)=>{this.navigationUI.setState({isStorylineOn:a})})}stopSpinner(){this.spinner&&this.options.showSpinnerOnStartup&&this.spinner.hide()}startSpinner(){!this.spinner&&this.options.showSpinnerOnStartup&&(this.spinner=$('<div style="display:table;position:absolute;height:100%;width:100%;z-index:101;"><div style="display:table-cell;vertical-align:middle;"><div style="background:url('+
x.LOADING_SPINNER+') center center no-repeat;margin-left:auto;margin-right:auto;width:42px;height:42px;" class="xml-loading-spinner"></div></div></div>'),$("#"+this.elementId).append(this.spinner))}getFullScreenChangeStream(){return this.fullscreenChangeProperty}isFullscreen(){return this.externalServiceProvider.isInFullscreen()}toggleFullscreen(){const a=$("#"+this.elementId).parent();this.externalServiceProvider.toggleFullscreen(a[0])}togglePopup(a){this.navigationUIController.setMobileClickerPopupVisible("mobile-clicker-popup"===
a);this.navigationUI.setState({isMobileClickerPopupVisible:this.navigationUIController.getMobileClickerPopupVisible()})}initPlayer(){const a=$("#"+this.elementId),b=a.parent();if("number"!==typeof this.options.width||0===this.options.width)this.options.width=b.width(),this.options.height=b.height();this.resize(this.options.width,this.options.height);$(window).on("resize",()=>{this.options.fixedSize||this.resize(b.width(),b.height())});this.container=$("<div class='player'></div>");0<this.container.length&&
this.container.append(this.app.getCetUI().getCetContainer());this.options.lockToPath&&this.container.css("pointer-events","none");const c=$('<div id="navigation-container"></div>');this.presenterEndWidgetContainer=$('<div id="remote-presentation-widget-container"></div>');this.container.append(c).append(this.presenterEndWidgetContainer);a.addClass("preziPlayerContainer").append(this.container);this.navigationUI=H.render(G.createElement(y.NavigationUIComponent,{injectedLogic:{options:this.options,
autoPlayer:this.autoPlayer,playerUI:this,renderThumbnail:this.renderThumbnail,navigationUIController:this.navigationUIController,mobileClickerProvider:this.externalServiceProvider,mobileClickerStatusStream:this.mobileClickerStatusStream,userLicenseStream:this.userLicenseInformationStream,remotePresentationInProgressStream:this.remotePresentationInProgressStream},isEditMode:!0,isMuted:!1,isFullscreenVisible:!1,userCanEdit:!1,userHasEditRight:this.options.userCanEdit,isLoggedIn:this.options.isLoggedIn,
callbacks:{toggleMuted:()=>{this.muteController.toggleMuted();this.navigationUI.setState({isMuted:this.muteController.isMuted()})}}}),c[0]);this.app.getMainStage().getCamera().getZoomingLimitStream().onValue((a)=>{this.navigationUI.setState({isZoomInLimitReached:a===h.ZoomingLimit.ZoomInLimitReached,isZoomOutLimitReached:a===h.ZoomingLimit.ZoomOutLimitReached})});this.activityLogger.listenToEvents(d.ActivityContext.EDITOR,f.Bacon.fromEvent(c,"click"))}attachPresenterEndWidget(a){H.render(a,this.presenterEndWidgetContainer[0])}openPresenterView(){this.presenterViewWebController.openPresenterView();
this.changeModeActionBus.push({newMode:d.EditorMode.playback,trigger:"presenter-view",shouldGoFullscreen:!1,shouldSeekPathToStart:!1,showTopmenu:!1,linkClickedFlow:!1,presenterNotesFlow:!0})}initFullScreenSupport(){const a=f.Bacon.newBus();this.externalServiceProvider.onFullscreenChange((b)=>{a.push(b)});this.fullscreenChangeProperty=a.toProperty(this.externalServiceProvider.isInFullscreen());this.fullscreenChangeProperty.onValue((a)=>{this.handleFullscreenChange(a)})}startFromStep(a){1<a&&this.navigationUI.setState({currentPathPosition:{step:a-
1,action:0}})}initVisibilityListener(){let a,b;"hidden"in document?(b="visibilityState",a="visibilitychange"):"mozHidden"in document?(b="mozVisibilityState",a="mozvisibilitychange"):"msHidden"in document?(b="msVisibilityState",a="msvisibilitychange"):"webkitHidden"in document&&(b="webkitVisibilityState",a="webkitvisibilitychange");const c=this;document.addEventListener(a,function(){"visible"===document[b]&&c.onFocusBus&&c.onFocusBus.push(!0)},!1)}resize(a,b){if(this.options.width!==a||this.options.height!==
b)null!==this.resizeDebounceTimer&&clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(()=>{this.handleResize()},this.resizeDebounceMS)}handleFullscreenChange(a){a?(this.navigationUI.setState({isFullscreen:!0}),this.app.getMainStage().setBottomPadding(this.options.navbarHeight),$(document.activeElement).blur()):(this.navigationUI.setState({isFullscreen:!1}),this.app.getMainStage().setBottomPadding(0));this.handleResize()}getHeight(){let a=this.container.height();null!=document.msFullscreenElement&&
(a=window.innerHeight);return a-(this.externalServiceProvider.isInFullscreen()?0:this.options.navbarHeight)}getWidth(){let a=this.container.width();null!=document.msFullscreenElement&&(a=window.innerWidth);return a}handleResize(){const a=this.getWidth(),b=this.getHeight();this.options.width=a;this.options.height=b;null!=this.app&&this.app.getCetUI().resize({width:a,height:b})}setOnStep(a){this.onStepCallback=a}handleStep(a){if(null!=this.onStepCallback)this.onStepCallback(a);this.navigationUI.setState({currentPathPosition:a.currentPathPosition})}areAllAssetsLoaded(){return this.allAssetsLoaded}setMetadata(a){this.options.preziId=
a.oid;this.externalServiceProvider.setDocumentTitle(a.title+" | Prezi")}startRendering(a){this.handleResize();this.initPlayback();this.initAutoplayer();this.initCanvasListeners(a);this.startFromStep(this.options.startFromStep);this.addVideoLoadingObserver();this.addAllAssetsLoadedHandler(()=>{this.navigationUI.setState({isLoadingAssets:!1});this.allAssetsLoaded=!0});this.app.initializeLoop(this.onFocusBus);this.stopSpinner();this.setIsFocusOnOverview();this.app.startLoop();this.autoPlayer.getEventStream().filter((a)=>
a.getType()===h.AutoPlayEventType.START||a.getType()===h.AutoPlayEventType.STOP).onValue((a)=>{this.navigationUI&&this.navigationUI.setState({autoplayValue:a.getAutoPlayer().getInterval(),isPlaying:a.getAutoPlayer().isEnabled()});let b;switch(a.getType()){case h.AutoPlayEventType.START:b=I.I18n.tsFormat("Autoplay with {} sec delay",String(a.getAutoPlayer().getInterval()/1E3|0));this.flashMessage(b);break;case h.AutoPlayEventType.STOP:b=I.I18n.ts("Autoplay off")}this.flashMessage(b)});this.playback.setOnStep((a)=>
this.handleStep(a));this.navigationUI&&this.navigationUI.setState({isLoadingAssets:!0,currentPathPosition:null,hasBackgroundSound:!1,pathPositionsWithVoiceOver:[]});this.setupAutoplayLogging();if("function"===typeof this.options.onLoad)this.options.onLoad()}initPlayback(){const a=this.modeStreamWithFullscreen.map((a)=>a.mode);this.playbackScene=p.PlaybackModule.createPlaybackScene(this.app,this.app.getMainStage(),"playback",this.currentTopicNavigationStream.toProperty(null),this.coverEditModeStream.toProperty(null),
a.map((a)=>a.kind).toProperty(null),this.logoTypeStream,this.highlightEntityIdsStream,this.hoveredEntityIdsStream);this.playbackPathQuery=t.CetModelEditor.createPlaybackPathQuery(this.playbackScene);this.playback=p.PlaybackModule.createPlayback(this.app,this.playbackScene);this.playback.getPathNavigationEndStream().onValue((a)=>{a||this.navigationUI.setState({currentPathPosition:this.playback.getCurrentPathPosition()})});this.hoveredEntityIdsStream.plug(this.playback.getHoverStream().map((a)=>[a]));
this.getPathUpdateStream().onValue(()=>{this.updatePathState()})}initAutoplayer(){this.autoPlayer=h.Cet.createAutoPlayer(this.playback.getPathNavigator(),this.playback.getCameraNavigationStream());this.autoplaySpeedTestHelper=h.Cet.createAutoplaySpeedTestHelper(this.autoPlayer,this.app.getSpeedMeter())}initCanvasListeners(a){this.canvasListener=g.CanvasListenerModule.createCanvasListener(this.app.getCetUI(),a);if(this.externalServiceProvider.shouldOverrideBrowserShortcuts())this.canvasListener.getKeyboardStream().filter((a)=>
a.keyCode===g.Key.BACKSPACE||a.keyCode===g.Key.F5||a.keyCode===g.Key.PAGE_UP||a.keyCode===g.Key.LEFT_ARROW||a.keyCode===g.Key.PAGE_DOWN).onValue((a)=>a.preventDefault());this.canvasFocusStream=this.canvasListener.getFocusStream();this.canvasFocusStream.onValue((a)=>{this.navigationUI&&this.navigationUI.setState({canHaveFocus:!a})});this.canvasListener.getMouseInteractionStream().filter((a)=>a.type===g.MouseInteractionType.Click||a.type===g.MouseInteractionType.DoubleClick||a.type===g.MouseInteractionType.TripleClick||
a.type===g.MouseInteractionType.DragEnd||a.type===g.MouseInteractionType.DragEndRight||a.type===g.MouseInteractionType.ContextMenu).onValue(()=>this.focusModeBus.push(L.ComponentFocusActionKind.canvasInteracted))}getAutoPlayer(){return this.autoPlayer}getAutoplaySpeedTestHelper(){return this.autoplaySpeedTestHelper}addAllAssetsLoadedHandler(a){this.app.getAssetLoadingProperty().filter(function(a){return a===v.AssetLoadingMessage.ALL_ASSETS_LOADED}).take(1).onValue(()=>{a()})}addVideoLoadingObserver(){this.app.getAssetLoadingProperty().filter(function(a){return a===
v.AssetLoadingMessage.VIDEO_LOADING_STARTED||a===v.AssetLoadingMessage.VIDEO_LOADING_FINISHED}).onValue((a)=>{a===v.AssetLoadingMessage.VIDEO_LOADING_STARTED?this.navigationUI.setState({isLoadingAssets:!0}):this.navigationUI.setState({isLoadingAssets:!1})})}reset(a){this.navigationUI&&this.navigationUI.setState({isLoadingAssets:!1,currentPathPosition:null,hasBackgroundSound:!1,pathPositionsWithVoiceOver:[],autoplayValue:null==this.autoPlayer?-1:this.autoPlayer.getInterval()});this.playback.reset();
this.thumbnailService.reset();this.stopSpinner();for(let b of Object.keys(a))this.options[b]=a[b]}flyToStep(a,b){this.playback.flyToStep(a,b,null)}flyToStepAction(a,b,c){this.playback.flyToStepAction(a,b,c)}flyToHome(a){if(0<this.playback.getStepCount()){const b=this.playback.getStartPosition(),c=this.getPathNavigator().getCurrentPosition();c.getStep()===b.getStep()&&c.getAction()===b.getAction()||this.flyToStepAction(b.getStep(),b.getAction(),a)}}flyToEnd(a){if(0<this.playback.getStepCount()){const b=
this.getPathNavigator().getPath().getAllPathPositions().pop(),c=this.getPathNavigator().getCurrentPosition();c.getStep()===b.getStep()&&c.getAction()===b.getAction()||this.flyToStepAction(b.getStep(),b.getAction(),a)}}flyToNextStep(a){0<this.playback.getStepCount()&&this.playback.hasNext()&&this.playback.navigateForward(a,null)}focusToStep(a){0>a?a=0:a>this.playback.getStepCount()&&(a=this.playback.getStepCount());a=this.playback.getPathNavigator().getPath().getPathPosition(a,0);this.navigationUI.setState({currentPathPosition:a});
this.playback.getPathNavigator().jump(a)}restart(){const a=this.playback.getPathNavigator().getPath().getStartPoint();this.navigationUI.setState({currentPathPosition:a});this.flyToStepAction(a.getStep(),a.getAction(),null)}zoomOut(){this.navigationUIController.zoomOut()}flyToPreviousStep(a){0<this.playback.getStepCount()&&this.playback.navigateBackward(()=>{this.navigationUI.setState({currentPathPosition:this.playback.getCurrentPathPosition()});null!=a&&a()},null)}flyToObject(a){return this.playback.flyToObject(a)}flyToOverview(){return this.playback.flyToOverview()}getThumbnailService(){return this.thumbnailService}setThumbnailService(a){this.thumbnailService=
a}getPlayerDiv(){return this.playerDiv}getCet(){return this.app}getPlayback(){return this.playback}getPlaybackForWiring(){return this.playback}getCanvasOffset(){const a=$(this.app.getCetUI().getCanvas()).offset();return{x:a.left,y:a.top}}getCanvasSize(){return this.app.getCetUI().getSize()}getCanvasListener(){return this.canvasListener}flashMessage(a){k.FlashMessage.flash({parent:this.container[0],text:a,stopLastMessage:!0})}getPathNavigator(){return this.app.getMainStage().getPathNavigator()}setupAutoplayLogging(){this.autoPlayer.getEventStream().filter((a)=>
a.getType()===h.AutoPlayEventType.NEXT).onValue(()=>{d.AppUtilsModule.getLogHelperUtils().nextStep(this.logger,this.playback.getCurrentStepIndex(),this.playback.getStepCount(),d.LogTrigger.AUTOPLAY)})}getZoomEventStream(){return this.navigationUIController.getZoomEventStream()}getAddCommentStream(){return this.navigationUIController.getAddCommentStream()}getOptions(){return this.options}getCamera(){return this.app.getMainStage().getCamera()}getComponentFocusActionStream(){return this.focusModeBus}setHighlightEntityIdsStream(a){this.highlightEntityIdsStream.plug(a)}getFollowActionStream(){const a=
this.getPathNavigator().getPathNavigationStream().map(this.wrapStream("FollowerPathAction")),b=this.getCet().getMainStage().getVideoEventStream().map(this.wrapStream("FollowerVideoAction")),c=this.getCamera().getCameraTransformStream().map(this.wrapStream("FollowerCameraTransformAction")),d=this.getCet().getMainStage().getNavigationActions().map(this.wrapStream("FollowerCameraNavigationAction"));return f.Bacon.mergeAll([a,b,c,d])}getToggleDialogStream(){return this.navigationUIController.getToggleDialogStream()}getTogglePopupStream(){return this.navigationUIController.getTogglePopupStream()}getNavbarFullyVisibleStream(){return this.isNavBarFullVisibleBus}getChangeModeActionStream(){return this.changeModeActionBus}setNavbarForcedVisibility(a){this.navigationUI.setState({forcedVisible:a})}setMargins(a,
b,c,d,e,f){this.getCet().getMainStage().setMargins(a,b,c,d,e,f);e=this.getCanvasSize().width;f=this.getCamera().getMarginCorrectedViewport().getData().width;this.navigationUI.setState({marginLeft:d,marginRight:b,marginTop:a,marginBottom:c,viewportMarginRight:.5*(e-f)})}isFullscreenVisible(){return this.externalServiceProvider.isFullscreenEnabled()}getPathUpdateStream(){return this.playbackScene.getImmediateChangeStream(h.ChangeEventKind.Entity).filter((a)=>a.some((a)=>(a.type===A.ChangeType.AddEntity||
a.type===A.ChangeType.RemoveEntity)&&a.entity.isDef(A.CetModel.ID.EDITOR_PATH_STEP))).map(()=>null)}updatePathState(){0!==this.playback.getStepCount()&&this.navigationUI&&this.navigationUI.setState({currentPathPosition:this.playback.getCurrentPathPosition()})}setMuted(a){null!=this.muteController&&this.muteController.setMuted(a);null!=this.navigationUI&&this.navigationUI.setState({isMuted:this.muteController.isMuted()})}isMuted(){return null!=this.muteController&&this.muteController.isMuted()}};e=
{};Object.defineProperty(e,"__esModule",{value:!0});(function(a){a.createPlayerUI=function(a,c,d,e,f,g,h,k,m,n){return new F.PlayerUIImpl(a,c,d,e,f,g,h,k,m,n)};a.createDesktopNavigationConnector=function(){return new B.DesktopNavigationConnector}})(e.PlayerUIModule||(e.PlayerUIModule={}));z=e;e=document.createElement("style");e.textContent=".rotating-from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}.rotating-to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}@-webkit-keyframes rotating{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotating{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-ms-keyframes rotating{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotating{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotating{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.xml-loading-spinner{-webkit-animation:rotating 1s linear infinite;-moz-animation:rotating 1s linear infinite;-ms-animation:rotating 1s linear infinite;-o-animation:rotating 1s linear infinite;animation:rotating 1s linear infinite}.preziPlayerContainer{position:relative;overflow:hidden;width:100%;height:100%}.preziPlayerContainer .player{position:relative;border-bottom:none;overflow:hidden;height:100%;width:100%;-moz-user-select:-moz-none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.preziPlayerContainer .renderContainer{position:absolute;border:none;top:0;left:0}.preziPlayerContainer .playerLayer{background:#000;position:absolute;top:0;left:0;zIndex:100;heigth:100%;width:100%}.preziPlayerContainer .playerLayer.domLayer{background:transparent;position:relative;top:0;left:0;z-index:101}\n";
document.body.appendChild(e);return z});

})() || {};
moduleImpl["module"]=moduleImpl;
return moduleImpl;};if(typeof define==="function"&&define.amd){define("prezi_client_player",["require","react","react-dom","react-transition-group","prezi.geometry","prezi_app_utils","prezi_bacon","prezi_canvas_listener","prezi_cet","prezi_cet_model","prezi_cet_model_editor","prezi_cet_renderer","prezi_editor_store_focus","prezi_editor_store_mode","prezi_editor_store_ui","prezi_externalserviceprovider","prezi_featureswitcher","prezi_i18n","prezi_koi_navigation","prezi_koi_widgets","prezi_logger","prezi_nativeapitypes","prezi_onboarding","prezi_playback","prezi_presenter_view_web","prezi_sound_playback","prezi_thumbnail_render","prezi_video"],function(){var moduleUrl=arguments[0]["toUrl"]("prezi_client_player.js");baseUrl=moduleUrl.substr(0,moduleUrl.lastIndexOf("/"));return(__factory).apply({},[].slice.call(arguments,1));});}else if(typeof exports==="object"&&typeof exports.nodeName!=="string"){baseUrl=__dirname;module.exports=(__factory)(require("react"),require("react-dom"),require("react-transition-group"),require("prezi.geometry"),require("prezi_app_utils"),require("prezi_bacon"),require("prezi_canvas_listener"),require("prezi_cet"),require("prezi_cet_model"),require("prezi_cet_model_editor"),require("prezi_cet_renderer"),require("prezi_editor_store_focus"),require("prezi_editor_store_mode"),require("prezi_editor_store_ui"),require("prezi_externalserviceprovider"),require("prezi_featureswitcher"),require("prezi_i18n"),require("prezi_koi_navigation"),require("prezi_koi_widgets"),require("prezi_logger"),require("prezi_nativeapitypes"),require("prezi_onboarding"),require("prezi_playback"),require("prezi_presenter_view_web"),require("prezi_sound_playback"),require("prezi_thumbnail_render"),require("prezi_video"));}else{this["prezi_client_player"]=__factory(React,ReactDOM,ReactTransitionGroup,this["prezi.geometry"],this["prezi_app_utils"],this["prezi_bacon"],this["prezi_canvas_listener"],this["prezi_cet"],this["prezi_cet_model"],this["prezi_cet_model_editor"],this["prezi_cet_renderer"],this["prezi_editor_store_focus"],this["prezi_editor_store_mode"],this["prezi_editor_store_ui"],this["prezi_externalserviceprovider"],this["prezi_featureswitcher"],this["prezi_i18n"],this["prezi_koi_navigation"],this["prezi_koi_widgets"],this["prezi_logger"],this["prezi_nativeapitypes"],this["prezi_onboarding"],this["prezi_playback"],this["prezi_presenter_view_web"],this["prezi_sound_playback"],this["prezi_thumbnail_render"],this["prezi_video"]);}}).call(this);